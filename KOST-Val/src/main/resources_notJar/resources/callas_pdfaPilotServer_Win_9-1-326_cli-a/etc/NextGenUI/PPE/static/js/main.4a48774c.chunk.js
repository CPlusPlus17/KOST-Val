(this["webpackJsonpprocess-plan-editor"]=this["webpackJsonpprocess-plan-editor"]||[]).push([[0],{105:function(e,t,n){e.exports=n.p+"static/media/certify.efd31ec9.svg"},106:function(e,t,n){e.exports=n.p+"static/media/create_reports.ca4c033c.svg"},107:function(e,t,n){e.exports=n.p+"static/media/create_report.179c6cdc.svg"},109:function(e,t,n){e.exports=n.p+"static/media/spinner.b48014ab.svg"},121:function(e,t,n){e.exports=n(201)},141:function(e,t,n){},143:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(22),s=n.n(i),r=n(40),c=n(13),l=n(98),p=n.n(l),u=n(99),d=n.n(u),h=n(205),f=n(100),y=n(101);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=n(16),b=(n(141),n(142),n(143),n(2)),m=n.n(b),g=n(5),P=n(6),x=n(9),_=n(7),I=n(8),O=n(102),S=n(12),E=n(3),T=n(11),k=n(14),w=n(108),C=n(202),j=n(64),N=function(){function e(){Object(g.a)(this,e)}return Object(P.a)(e,[{key:"subscribe",value:function(){}},{key:"loadObjects",value:function(){throw new Error("loadObjects not implemented")}},{key:"loadProcessPlan",value:function(){throw new Error("loadProcessPlan not implemented")}},{key:"saveProcessPlan",value:function(){throw new Promise((function(e){e()}))}},{key:"loadSettings",value:function(){throw new Error("loadSettings not implemented")}},{key:"updateSettings",value:function(e){return console.log("Settings update requested",e),new Promise((function(e){return e()}))}},{key:"createExternalObject",value:function(e){return console.log("createExternalObject: ".concat(e)),new Promise((function(e){return e()}))}},{key:"updateExternalObject",value:function(e,t){return console.log("updateExternalObject: ".concat(e,", ").concat(t)),new Promise((function(e){return e()}))}},{key:"duplicateExternalObject",value:function(e,t){return console.log("duplicateExternalObject: ".concat(e,", ").concat(t)),new Promise((function(e){return e()}))}},{key:"setPassword",value:function(e){return console.log("setPassword: ".concat(e)),new Promise((function(e){return e()}))}},{key:"checkPassword",value:function(e){return console.log("checkPassword: ".concat(e)),new Promise((function(e){return e()}))}}]),e}(),A=function(e){function t(){return Object(g.a)(this,t),Object(x.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(P.a)(t,[{key:"loadObjects",value:function(){return fetch("./samples/availableObjects.json").then((function(e){return e.json()}))}},{key:"loadProcessPlan",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return fetch("./samples/processPlans/"+e+".json").then((function(e){return e.json()}))}},{key:"loadSettings",value:function(){return fetch("./samples/settings.json").then((function(e){return e.json()}))}},{key:"createExternalObject",value:function(e){return console.log("createExternalObject: ".concat(e," => <file_name:> should be selected")),Promise.resolve("V8ae60b5a7524b68eda9fc1dbd2bffbad")}},{key:"duplicateExternalObject",value:function(e,t){return console.log("duplicateExternalObject: ".concat(e,", ").concat(t," => <font_name:Hugo> should be selected")),Promise.resolve("Vd125ff9fe4a7dcf7c763c49c425e4902")}},{key:"setPassword",value:function(e){return Promise.resolve(!0)}},{key:"checkPassword",value:function(e){return Promise.resolve(!0)}}]),t}(N),L=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(x.a)(this,Object(_.a)(t).call(this))).backEventsHandlers={},window.sendExtensionMessage({request:{method:"registerEventCallback"},persistent:!0,onSuccess:function(t){var n=e.backEventsHandlers[t.eventName];m.a.isFunction(n)&&n(t)}}),e}return Object(I.a)(t,e),Object(P.a)(t,[{key:"_sendMessage",value:function(e,t){return new Promise((function(n,o){window.sendExtensionMessage({request:{method:e,data:t},onSuccess:function(e){try{var t;if(null!=e&&null!=e.value&&null!=e.contentType)switch(e.contentType){case"json":t=JSON.parse(e.value);break;case"string":case"bool":t=e.value;break;default:o(new Error("Received unknown contentType ".concat(e.contentType,", ignoring")))}n(t)}catch(a){o(a)}},onFailure:function(e,t){console.log("Error("+e+"): "+t),o(new Error(t))}})}))}},{key:"subscribe",value:function(e,t){this.backEventsHandlers[e]=t}},{key:"loadObjects",value:function(){return this._sendMessage("loadObjects")}},{key:"loadProcessPlan",value:function(e){return this._sendMessage("loadDefault")}},{key:"saveProcessPlan",value:function(e){return this._sendMessage("saveProcessPlan",e)}},{key:"loadSettings",value:function(){return this._sendMessage("loadSettings")}},{key:"updateSettings",value:function(e){return this._sendMessage("updateSettings",JSON.stringify(e))}},{key:"createExternalObject",value:function(e){return this._sendMessage("createExternalObject",e)}},{key:"updateExternalObject",value:function(e,t){return this._sendMessage("updateExternalObject",{type:e,id:t})}},{key:"duplicateExternalObject",value:function(e,t){return this._sendMessage("duplicateExternalObject",{type:e,id:t})}},{key:"setPassword",value:function(e){return this._sendMessage("setPassword",e)}},{key:"checkPassword",value:function(e){return this._sendMessage("checkPassword",e)}}]),t}(N),R=m.a.isFunction(window.sendExtensionMessage),D=R?new L:new A,M=n(23),G=n.n(M),z=n(17),V={processplan:"NG_PPE_MetaProfName_long",profile:"NG_PPE_ProfileName_long",action:"NG_PPE_SwitchName_long",variable:"NG_PPE_VariableName_long",fixup:"NG_PPE_FixupName_long",check:"NG_PPE_RuleName_long",quickcheck:"NG_PPE_QuickCheckName_long",addfiles:"NG_PPE_AddFilesName_long",pdfcopy:"NG_PPE_SavePDFName_long",rename:"NG_PPE_RenameName_long",filepickup:"NG_PPE_PickupName_long"},U={processplan:"NG_PPE_MetaProfCreate_long",profile:"NG_PPE_ProfileCreate_long",action:"NG_PPE_ActionCreate_long",variable:"NG_PPE_VariableCreate_long",fixup:"NG_PPE_FixupCreate_long",check:"NG_PPE_RuleCreate_long",quickcheck:"NG_PPE_QuickCheckCreate_long",addfiles:"NG_PPE_AddFilesCreate_long"},F={processplan:"NG_PPE_MetaProfEdit_long",profile:"NG_PPE_ProfileEdit_long",action:"NG_PPE_ActionEdit_long",variable:"NG_PPE_VariableEdit_long",fixup:"NG_PPE_FixupEdit_long",check:"NG_PPE_RuleEdit_long",quickcheck:"NG_PPE_QuickCheckEdit_long",addfiles:"NG_PPE_AddFilesEdit_long"},B={processplan:"NG_PPE_MetaProfDuplicate_long",profile:"NG_PPE_ProfileDuplicate_long",action:"NG_PPE_ActionDuplicate_long",variable:"NG_PPE_VariableDuplicate_long",fixup:"NG_PPE_FixupDuplicate_long",check:"NG_PPE_RuleDuplicate_long",quickcheck:"NG_PPE_QuickCheckDuplicate_long",addfiles:"NG_PPE_AddFilesDuplicate_long"},H={Name:"NG_PPE_StepName_long","Pick up PDF from":"NG_PPE_Pick_up_PDF_from_long"},K={"Do not apply Fixups":"NG_PPE_ProfileFixups_long","Overwrite existing file":"NG_PPE_Overwrite_long","Replace file name with prefix and suffix":"NG_PPE_SavePDFOmitName_long","Enable step":"NG_PPE_EnableStep_long"},W={txt_report:"NG_PPE_Report_Text_long",xml_report:"NG_PPE_Report_XML_long",overview_report:"NG_PPE_Report_Overview_long",mask_report:"NG_PPE_Report_Mask_long",comment_report:"NG_PPE_Report_Comment_long",layer_report:"NG_PPE_Report_Layer_long",compare_report:"NG_PPE_Report_Compare_long",inventory_report:"NG_PPE_Report_Inventory_long"},Y={Text:"NG_PPE_Report_Text_long",XML:"NG_PPE_Report_XML_long","PDF overview":"NG_PPE_Report_Overview_long","PDF mask":"NG_PPE_Report_Mask_long",Comment:"NG_PPE_Report_Comment_long",Layer:"NG_PPE_Report_Layer_long",Compare:"NG_PPE_Report_Compare_long",Inventory:"NG_PPE_Report_Inventory_long"},q={success:"NG_PPE_StepOnSuccess_long",failure:"NG_PPE_StepOnFailure_long",error:"NG_PPE_StepOnError_long",warning:"NG_PPE_StepOnWarning_long",hit:"NG_PPE_StepOnHit_long",info:"NG_PPE_StepOnInfo_long",else:"NG_PPE_StepElse_long",disabled:"NG_PPE_IfDisabled_long","Certify PDF":"NG_PPE_Certify_long","Create report":"NG_PPE_Create_report_long","Transition types":"NG_PPE_Transition_types_long","Post processing":"NG_PPE_Post_processing_long","Problems highlighting":"NG_PPE_ReportProblemsHighlighting_long"},Z={"Transparent masks":"NG_PPE_ReportByTransparentMasks_long",Layers:"NG_PPE_ReportByLayers_long"},X={success:"NG_PPE_StepOnSuccess_long",failure:"NG_PPE_StepOnFailure_long",error:"NG_PPE_StepOnError_long",warning:"NG_PPE_StepOnWarning_long",hit:"NG_PPE_StepOnHit_long",info:"NG_PPE_StepOnInfo_long",else:"NG_PPE_StepElse_long",disabled:"NG_PPE_IfDisabled_long"},J={on_success:"NG_PPE_StepOnSuccess_long",on_failure:"NG_PPE_StepOnFailure_long",on_error:"NG_PPE_StepOnError_long",on_warning:"NG_PPE_StepOnWarning_long",on_hit:"NG_PPE_StepOnHit_long",on_info:"NG_PPE_StepOnInfo_long",else:"NG_PPE_StepElse_long",if_disabled:"NG_PPE_IfDisabled_long"},Q=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.transitionsLayout},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Remove transition":return n.applyRemoveTransitionLayout(e);case"Add transition":return n.applyAddTransitionLayout(e);case"Change transition position":return n.applyTransitionLayoutPositionChange(e);case"Remove step":return n.applyRemoveTransitionConnectionLayout(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForTransitionsLayout(e);case"Insert new step into transition":case"Create transitions for insert step":return n.applyAddTransitionLayoutForInsertStep(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Remove transition":return n.revertRemoveTransitionLayout(e);case"Add transition":return n.revertAddTransitionLayout(e);case"Change transition position":return n.revertTransitionLayoutPositionChange(e);case"Remove step":return n.revertRemoveTransitionConnectionLayout(e);case"Generate auto layout":return n.revertAutoGenerationForTransitionsLayout(e);case"Insert new step into transition":case"Create transitions for insert step":return n.revertAddTransitionLayoutForInsertStep(e);default:return e}}},{}),$=function(e,t){if(m.a.isNil(e))return null;var n,o;switch(t){case"left":n=e.position.x+5,o=e.position.y+e.size.height/2+5;break;case"right":n=e.position.x+e.size.width+5,o=e.position.y+e.size.height/2+5;break;case"top":n=e.position.x+e.size.width/2+10,o=e.position.y+5;break;case"bottom":n=e.position.x+e.size.width/2+10,o=e.position.y+e.size.height+5;break;default:return"Error"}return{x:n,y:o,position:t}},ee=function(e,t,n,o){var a,i,s,r,c=[];return n.x+10<o.x?n.y+10<o.y?c.push({x:o.x,y:n.y}):(n.x+25>t.position.x?(s=o.x-n.x,a=n.x+s,c.push({x:a,y:n.y}),r=e.position.y-(t.position.y+t.size.height),i=e.position.y-r/2,c.push({x:a,y:i}),a=t.position.x-25,c.push({x:a,y:i})):(s=o.x-t.size.width/2-n.x,a=n.x+s/2,c.push({x:a,y:n.y})),i=o.y-25,c.push({x:a,y:i},{x:o.x,y:i})):(e.position.y+t.size.height>o.y?n.x<t.position.x+t.size.width?(a=t.position.x+t.size.width+25,c.push({x:a,y:n.y}),i=o.y-25):(a=n.x+25,c.push({x:a,y:n.y}),i=e.position.y<o.y?e.position.y-25:o.y-25):(a=n.x+25,c.push({x:a,y:n.y}),i=(r=o.y-t.size.height/2-n.y)<e.size.height/2?e.position.y-25:n.y+r/2+e.size.height/2),c.push({x:a,y:i},{x:o.x,y:i})),c},te=function(e,t,n,o){var a,i,s,r,c=[];if(n.x<o.x)n.y-25<o.y?(r=o.y+25-n.y,n.x+25<t.position.x?Math.abs(r)<10?i=o.y+25-r:(s=t.position.x-n.x,a=n.x+s/2,c.push({x:a,y:n.y}),i=o.y+25,c.push({x:a,y:i})):(a=n.x+25,c.push({x:a,y:n.y}),r=t.position.y-(e.position.y+e.size.height),i=t.position.y-r/2,c.push({x:a,y:i}),a=t.position.x-25,c.push({x:a,y:i}),i=o.y+25,c.push({x:a,y:i}))):i=n.y;else{if(a=n.x+25,c.push({x:a,y:n.y}),t.position.y+t.size.height+25>e.position.y)t.position.x+t.size.width>n.x?(r=t.position.y-(e.position.y+e.size.height),i=e.position.y+e.size.height+r/2,c.push({x:a,y:i}),a=t.position.x-25,c.push({x:a,y:i}),i=o.y+25):i=(r=e.position.y-(t.position.y+t.size.height))<t.size.height&&e.position.y+e.size.height>t.position.y+t.size.height?n.y+e.size.height+25:o.y+25;else{var l=e.position.y-o.y;i=e.position.y-l/2}c.push({x:a,y:i})}return c.push({x:o.x,y:i}),c},ne=function(e,t,n,o){var a,i,s,r,c=[];return n.x+25<o.x?(r=o.y-n.y,Math.abs(r)<5?a=o.x:(s=o.x-n.x,a=n.x+s/2,c.push({x:a,y:n.y}))):(a=n.x+25,c.push({x:a,y:n.y}),e.position.y+e.size.height>t.position.y+t.size.height?i=(r=n.y-(o.y+t.size.height/2-e.size.height/2))<t.size.height+25?o.y-t.size.height:n.y-r/2:t.position.y-25>e.position.y+e.size.height?(r=o.y-(n.y+e.size.height/2-t.size.height/2),i=n.y+r/2):i=e.position.y-25,c.push({x:a,y:i}),a=o.x-25,c.push({x:a,y:i})),c.push({x:a,y:o.y}),c},oe=function(e,t,n,o){var a,i,s,r=[];return n.x<o.x?(s=t.position.y+e.size.height-e.position.y,t.position.y<e.position.y+e.size.height&&t.position.y+e.size.height>e.position.y&&s>5?(a=n.x+25,r.push({x:a,y:n.y}),i=n.y+s,r.push({x:a,y:i}),a=o.x+25,r.push({x:a,y:i})):(a=o.x+25,r.push({x:a,y:n.y}))):(a=n.x+25,r.push({x:a,y:n.y}),t.position.y<e.position.y+e.size.height&&t.position.y+e.size.height>e.position.y&&(i=n.y-e.size.height,r.push({x:a,y:i}),a=o.x+25,r.push({x:a,y:i}))),r.push({x:a,y:o.y}),r},ae=function(e,t,n,o){var a,i,s,r,c=[];return n.y<o.y?(r=o.y-n.y)<e.size.height/2?(i=n.y+25,n.x>o.x?(s=t.position.x+t.size.width-e.position.x,c.push({x:n.x,y:i}),a=t.position.x+t.size.width-s/2):(s=t.position.x-(e.position.x+e.size.width),c.push({x:n.x,y:i}),a=e.position.x+e.size.width+s/2),c.push({x:a,y:i}),i=o.y-25,c.push({x:a,y:i}),c.push({x:o.x,y:i})):(s=o.x-n.x,Math.abs(s)>5&&(i=n.y+r/2,a=n.x,c.push({x:a,y:i}),c.push({x:o.x,y:i}))):(i=n.y+25,c.push({x:n.x,y:i}),e.position.x+e.size.width+25<t.position.x?(s=t.position.x-(e.position.x+e.size.width),a=e.position.x+e.size.width+s/2,c.push({x:a,y:i}),i=o.y-25):t.position.x+t.size.width>=e.position.x+e.size.width?(a=t.position.x+t.size.width+25,c.push({x:a,y:i}),i=o.y-25):t.position.x+t.size.width+25<e.position.x?(s=-(e.position.x-(t.position.x+t.size.width)),a=t.position.x+t.size.width-s/2,c.push({x:a,y:i}),i=o.y-25):(a=e.position.x+e.size.width+25,c.push({x:a,y:i}),i=t.position.y-25),c.push({x:a,y:i}),c.push({x:o.x,y:i})),c},ie=function(e,t,n,o){var a,i,s,r,c=[];return n.y+25>t.position.y?e.position.x-25>o.x?(r=(i=n.y+25)-o.y,Math.abs(r)<10?(c.push({x:n.x,y:i-r}),a=o.x):(c.push({x:n.x,y:i}),s=e.position.x-o.x,a=o.x+s/2,c.push({x:a,y:i}))):o.x<e.position.x+e.size.width&&o.y<n.y?(i=n.y+25,c.push({x:n.x,y:i}),a=e.position.x+e.size.width+25,c.push({x:a,y:i})):(i=t.position.y+25<n.y?n.y+25:o.x-25<n.x?n.y+25:t.position.y+t.size.height+25,r=o.y-i,Math.abs(r)<10?a=n.x:(c.push({x:n.x,y:i}),a=o.x+25,c.push({x:a,y:i}))):o.x+25>n.x?(s=n.x-(o.x+25),Math.abs(s)<10?a=n.x:(r=t.position.y-n.y,i=n.y+r/2,c.push({x:n.x,y:i}),a=o.x+25,c.push({x:a,y:i}))):a=n.x,c.push({x:a,y:o.y}),c},se=function(e,t,n,o){var a,i,s,r,c=[];return n.y+25>o.y?n.x<o.x?(s=o.x-(e.position.x+e.size.width),n.y<t.position.y+t.size.height?n.y+25>o.y&&s<0?a=n.x:s<10?a=n.x:(i=t.position.y+t.size.height+25,c.push({x:n.x,y:i}),a=o.x-s/2,c.push({x:a,y:i})):s<25?e.position.y<o.y?a=n.x:(i=n.y+25,c.push({x:n.x,y:i}),a=e.position.x+e.size.width+25,c.push({x:a,y:i}),r=e.position.y-(t.position.y+t.size.height),i=t.position.y+t.size.height+r/2,c.push({x:a,y:i}),a=o.x-25,c.push({x:a,y:i})):(i=n.y+25,c.push({x:n.x,y:i}),a=o.x-s/2,c.push({x:a,y:i}))):(n.y<t.position.y+t.size.height?(i=t.position.y+t.size.height+25,c.push({x:n.x,y:i}),a=o.x-25):(i=n.y+25,c.push({x:n.x,y:i}),a=o.x<e.position.x?o.x-25:e.position.x-25),c.push({x:a,y:i})):n.x+25<o.x?a=n.x:(s=n.x-(o.x-25),Math.abs(s)<10?a=o.x-25+s:(r=t.position.y-n.y,i=n.y+r/2,c.push({x:n.x,y:i}),a=o.x-25,c.push({x:a,y:i}))),c.push({x:a,y:o.y}),c},re=function(e,t,n,o){var a,i,s,r,c=[];return n.y<o.y?(e.position.x+e.size.width>o.x-25&&n.x<=o.x?((r=t.position.y-n.y)<25&&(r=50),i=n.y+r/2,c.push({x:n.x,y:i}),a=t.position.x-25,c.push({x:a,y:i}),i=o.y+25):t.position.x+t.size.width>n.x-25&&n.x>o.x?((r=t.position.y-n.y)<25&&(r=50),i=n.y+r/2,c.push({x:n.x,y:i}),a=t.position.x+t.size.width+25,c.push({x:a,y:i}),i=o.y+25):(i=o.y+25,a=n.x),c.push({x:a,y:i})):(i=n.y+25,e.position.x+e.size.width+25>o.x&&o.x>=n.x?(c.push({x:n.x,y:i}),s=(a=e.position.x+e.size.width+25)-o.x,Math.abs(s)<10?(a-=s,c.push({x:a,y:i}),i=o.y):(a=e.position.x+e.size.width+25,c.push({x:a,y:i}),(r=e.position.y-o.y)<25&&(r=50),i=o.y+r/2,c.push({x:a,y:i}))):(o.x+25>e.position.x&&o.x+25-25<=n.x?(c.push({x:n.x,y:i}),a=e.position.x-25,c.push({x:a,y:i}),(r=e.position.y-o.y)<25&&(r=50),i=o.y+r/2):a=n.x,c.push({x:a,y:i}))),c.push({x:o.x,y:i}),c},ce=function(e,t,n,o){var a,i,s,r,c=[];return n.y+10>t.position.y?(s=n.x-(t.position.x+t.size.width),r=e.position.y-(t.position.y+t.size.height),e.position.x+e.size.width/2>t.position.x+t.size.width&&s<25&&r>25?(a=n.x-25,c.push({x:a,y:n.y}),i=t.position.y+t.size.height+r/2,c.push({x:a,y:i}),a=t.position.x+t.size.width+25,c.push({x:a,y:i}),i=o.y-25):t.position.x+t.size.width+25<n.x?(a=n.x-s/2,c.push({x:a,y:n.y}),i=o.y-25):n.x<t.position.x?(a=n.x-25,c.push({x:a,y:n.y}),i=e.position.y<o.y?e.position.y-25:o.y-25):(a=t.position.x-25,c.push({x:a,y:n.y}),i=o.y-25),c.push({x:a,y:i})):o.x+25>n.x?e.position.x+e.size.width+25<o.x&&e.position.y+e.size.height+25>o.y?(a=n.x-25,c.push({x:a,y:n.y}),i=e.position.y-25,c.push({x:a,y:i})):(r=o.y-(e.position.y+e.size.height))<25?i=n.y:(s=(a=n.x-25)-o.x,Math.abs(s)<10?i=n.y:(c.push({x:a,y:n.y}),i=o.y-r/2,c.push({x:a,y:i}))):i=n.y,c.push({x:o.x,y:i}),c},le=function(e,t,n,o){var a,i,s,r,c=[];return n.y>t.position.y+t.size.height?o.x>n.x?(r=e.position.y-o.y,a=n.x-25,c.push({x:a,y:n.y}),i=r<25?e.position.y+e.size.height+25:o.y+r/2,c.push({x:a,y:i})):i=n.y:(t.position.x+t.size.width+25>n.x?a=t.position.x>n.x?t.position.x+t.size.width<n.x?t.position.x-25:n.x-25:t.position.x-25:(s=n.x-(t.position.x+t.size.width),a=n.x-s/2),c.push({x:a,y:n.y}),i=o.y+25,c.push({x:a,y:i})),c.push({x:o.x,y:i}),c},pe=function(e,t,n,o){var a,i,s,r,c=[];return n.y+25<t.position.y?(a=o.x>n.x+25?n.x-25:o.x-25,c.push({x:a,y:n.y})):t.position.y+t.size.height+25<n.y?(a=o.x+25>n.x?n.x-25:o.x-25,c.push({x:a,y:n.y})):o.y<n.y?e.position.x+e.size.width+25<o.x?(a=n.x-25,c.push({x:a,y:n.y}),i=e.position.y-25,c.push({x:a,y:i}),s=o.x-(e.position.x+e.size.width),a=o.x-s/2,c.push({x:a,y:i})):t.position.x+t.size.width>n.x?o.x>n.x?a=n.x:(a=o.x-25,c.push({x:a,y:n.y})):(i=t.position.y+t.size.height+25,r=n.y-i,Math.abs(r)<10?i+=r:(s=n.x-(t.position.x+t.size.width),a=n.x-s/2,c.push({x:a,y:n.y}),c.push({x:a,y:i})),a=o.x-25,c.push({x:a,y:i})):e.position.x+e.size.width+25<o.x?(a=n.x-25,c.push({x:a,y:n.y}),i=e.position.y+e.size.height+25,r=o.y-i,Math.abs(r)<10?(i+=r,c.push({x:a,y:i}),a=n.x):(c.push({x:a,y:i}),s=o.x-(e.position.x+e.size.width),a=o.x-s/2,c.push({x:a,y:i}))):t.position.x+t.size.width>n.x?o.x>n.x?a=n.x:(a=o.x-25,c.push({x:a,y:n.y})):(i=t.position.y-25,r=n.y-i,Math.abs(r)<10?i+=r:(s=n.x-(t.position.x+t.size.width),a=n.x-s/2,c.push({x:a,y:n.y},{x:a,y:i})),a=o.x-25,c.push({x:a,y:i})),c.push({x:a,y:o.y}),c},ue=function(e,t,n,o){var a,i,s,r,c=[];if(e.position.x+10>t.position.x)if((s=n.x-o.x)>25)r=n.y-o.y,Math.abs(r)<5?a=o.x:(a=n.x-s/2,c.push({x:a,y:n.y}));else{var l=e.position.y-(t.position.y+t.size.height);l<25?o.x<e.position.x?a=n.x:(l=t.position.y-(e.position.y+e.size.height),a=t.position.x-25,c.push({x:a,y:n.y}),i=e.position.y+e.size.height<t.position.y&&l<25?t.position.y+t.size.height+25:t.position.y-25,c.push({x:a,y:i}),a=o.x+25,c.push({x:a,y:i})):(l=e.position.y-(t.position.y+t.size.height),a=n.x-25,c.push({x:a,y:n.y}),i=l<25?t.position.y-25:e.position.y-l/2,c.push({x:a,y:i}),a=o.x+25,c.push({x:a,y:i}))}else a=n.x-25,c.push({x:a,y:n.y}),i=e.position.y<t.position.y?e.position.y-25:t.position.y-25,c.push({x:a,y:i}),a=o.x+25,c.push({x:a,y:i});return c.push({x:a,y:o.y}),c},de=function(e,t,n,o){var a,i,s,r,c=[];return n.x<o.x?n.y>o.y+10?(t.position.x-25<n.x?(r=n.y-(t.position.y+t.size.height),i=n.y-r/2,c.push({x:n.x,y:i}),a=t.position.x+t.size.width+25,c.push({x:a,y:i})):a=n.x,i=o.y-25,c.push({x:a,y:i})):e.position.x+e.size.width>o.x-25?(r=o.y-(e.position.y+e.size.height))<10?i=n.y:(i=n.y-25,c.push({x:n.x,y:i}),s=(a=e.position.x+e.size.width+25)-o.x,Math.abs(s)<10?i=n.y-25:(c.push({x:a,y:i}),i=o.y-r/2,c.push({x:a,y:i}))):(i=n.y-25,c.push({x:n.x,y:i})):n.y>o.y+10?(t.position.x+t.size.width+25>n.x?(r=n.y-(t.position.y+t.size.height),i=n.y-r/2,c.push({x:n.x,y:i}),a=t.position.x-25,c.push({x:a,y:i}),i=o.y-25):(i=o.y-25,a=n.x),c.push({x:a,y:i})):o.x+25>e.position.x?(r=o.y-(e.position.y+e.size.height))<10?i=n.y:(i=n.y-25,c.push({x:n.x,y:i}),s=(a=e.position.x-25)-o.x,Math.abs(s)<10?i=n.y-25:(c.push({x:a,y:i}),i=o.y-r/2,c.push({x:a,y:i}))):(i=n.y-25,c.push({x:n.x,y:i})),c.push({x:o.x,y:i}),c},he=function(e,t,n,o){var a,i,s,r,c=[];return n.x<o.x?n.y>t.position.y+t.size.height?a=n.x:(r=n.y-25-o.y,i=n.y-25,Math.abs(r)<10?a=n.x:(s=o.x-(e.position.x+e.size.width))>25?(c.push({x:n.x,y:i}),a=o.x-s/2,c.push({x:a,y:i})):(r=t.position.y-(e.position.y+e.size.height))<25?o.y<e.position.y?a=n.x:(i=e.position.y-25,c.push({x:n.x,y:i}),a=e.position.x-25,c.push({x:a,y:i})):(i=n.y-25,c.push({x:n.x,y:i}),a=e.position.x+e.size.width+25,c.push({x:a,y:i}),i=t.position.y-r/2,c.push({x:a,y:i}),a=o.x-25,c.push({x:a,y:i}))):(n.y>t.position.y+t.size.height+10?(r=n.y-(t.position.y+t.size.height),i=n.y-r/2,c.push({x:n.x,y:i}),a=o.x-25):e.position.y<t.position.y+25?(i=e.position.y-25,c.push({x:n.x,y:i}),a=o.x+25>e.position.x?e.position.x-25:o.x-25):(i=t.position.y-25,c.push({x:n.x,y:i}),a=o.x-25),c.push({x:a,y:i})),c.push({x:a,y:o.y}),c},fe=function(e,t,n,o){var a,i,s,r,c=[];return n.x<o.x?t.position.y+t.size.height+25<e.position.y?(s=n.x-o.x,Math.abs(s)>5&&(r=e.position.y-(t.position.y+t.size.height),i=n.y-r/2,a=n.x,c.push({x:a,y:i}),c.push({x:o.x,y:i}))):(e.position.x+e.size.width+25<t.position.x?(i=n.y-25,c.push({x:n.x,y:i}),s=t.position.x-(e.position.x+e.size.width),a=e.position.x+e.size.width+s/2):t.position.x+t.size.width-25<e.position.x+e.size.width?(i=n.y-25,c.push({x:n.x,y:i}),a=e.position.x+e.size.width+25):(i=t.position.y>e.position.y?n.y-25:t.position.y-25,c.push({x:n.x,y:i}),a=t.position.x+t.size.width+25),c.push({x:a,y:i}),i=o.y+25,c.push({x:a,y:i}),c.push({x:o.x,y:i})):t.position.y+t.size.height+25<e.position.y?(s=n.x-o.x,Math.abs(s)>5&&(r=e.position.y-(t.position.y+t.size.height),i=n.y-r/2,a=n.x,c.push({x:a,y:i}),c.push({x:o.x,y:i}))):(t.position.x+t.size.width+25<e.position.x?(i=n.y-25,c.push({x:n.x,y:i}),s=e.position.x-(t.position.x+t.size.width),a=e.position.x-s/2):t.position.x+25>e.position.x?(i=n.y-25,c.push({x:n.x,y:i}),a=e.position.x-25):(i=t.position.y<e.position.y?t.position.y-25:n.y-25,c.push({x:n.x,y:i}),a=t.position.x-25),c.push({x:a,y:i}),i=o.y+25,c.push({x:a,y:i}),c.push({x:o.x,y:i})),c},ye=function(e,t,n,o){var a,i,s,r,c=[];return n.x-25<o.x?t.position.y+25>n.y?(i=n.y-25,c.push({x:n.x,y:i}),a=o.x+25<e.position.x+e.size.width?e.position.x+e.size.width+25:o.x+25,c.push({x:a,y:i})):(i=(r=n.y-(t.position.y+t.size.height))>25?n.y-r/2:t.position.y-25,s=n.x-(o.x+25),Math.abs(s)<10?a=n.x:(c.push({x:n.x,y:i}),a=o.x+25,c.push({x:a,y:i}))):o.y+25<=n.y?a=n.x:o.x+25<e.position.x?(r=(i=n.y-25)-o.y,Math.abs(r)<10?a=n.x:(c.push({x:n.x,y:i}),s=e.position.x-o.x,a=o.x+s/2,c.push({x:a,y:i}))):o.y>e.position.y+e.size.height?(r=t.position.y-(e.position.y+e.size.height))<10?a=n.x:(i=n.y-25,c.push({x:n.x,y:i}),a=e.position.x-25,c.push({x:a,y:i}),i=t.position.y-r/2,c.push({x:a,y:i}),a=o.x+25,c.push({x:a,y:i})):a=n.x,c.push({x:a,y:o.y}),c},ve=function(e,t){return m.a.find(function(e){return e.transitionsLayout}(e),(function(e,n){return n===t}))},be=Object(T.a)("TRANSITION_SELECT",(function(e){return e})),me=Object(T.a)("TRANSITION_HIGHLIGHT",(function(e){return e})),ge=Object(T.a)("TRANSITIONS_INTERSECT",(function(e,t,n){return{position:e,stepsLayout:t,transitionsLayout:n}})),Pe=function(e,t){return function(n,o){switch(m.a.isNil(e)&&(n(me(null)),n(ka(null))),t){case"transition":var a=ke(o(),e);n(ka(a.startStepId)),n(me(e)),n(ka(a.endStepId));break;case"step":var i=Re(o(),e);m.a.mapValues(i,(function(e){return n(me(e.id))})),n(ka(e))}}},xe={txt_report:"Text",xml_report:"XML",overview_report:"PDF overview",mask_report:"PDF mask",comment_report:"Comment",layer_report:"Layer",compare_report:"Compare",inventory_report:"Inventory"},_e={on_success:"success",on_failure:"failure",on_error:"error",on_warning:"warning",on_hit:"hit",on_info:"info",else:"else",if_disabled:"disabled"},Ie={processplan:[],profile:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],check:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],fixup:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],action:["compare_report","inventory_report"],variable:["compare_report","inventory_report"],filepickup:[],pdfcopy:[],quickcheck:[],addfiles:[],rename:[]},Oe={processplan:["on_error","else","if_disabled"],profile:["on_error","on_warning","on_info","on_success","if_disabled"],check:["on_hit","on_success","if_disabled"],fixup:["on_success","on_failure","if_disabled"],action:["on_success","on_failure","if_disabled"],variable:["on_success","on_failure","if_disabled"],filepickup:["on_success","on_failure","if_disabled"],pdfcopy:["on_success","on_failure","if_disabled"],quickcheck:["on_success","on_failure","if_disabled"],addfiles:["on_success","on_failure","if_disabled"],rename:["on_success","on_failure","if_disabled"]},Se=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.transitions},TRANSITION_SELECT:function(e,t){return m.a.isNil(t.payload)?m.a.mapValues(e,(function(e){return Object(E.a)({},e,{selected:!1})})):m.a.mapValues(e,(function(e,n){return n===t.payload?Object(E.a)({},e,{selected:!0}):e.selected?Object(E.a)({},e,{selected:!1}):e}))},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Add transition":return n.applyAddTransition(e);case"Change transition position":return n.applyTransitionPositionChange(e);case"Remove step":return n.applyRemoveTransitionConnected(e);case"Remove transition":return n.applyRemoveTransition(e);case"Insert new step into transition":case"Create transitions for insert step":return n.applyAddTransitionForInsertStep(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForTransitions(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Add transition":return n.revertAddTransition(e);case"Change transition position":return n.revertTransitionPositionChange(e);case"Remove step":return n.revertRemoveTransitionConected(e);case"Remove transition":return n.revertRemoveTransition(e);case"Insert new step into transition":case"Create transitions for insert step":return n.revertAddTransitionForInsertStep(e);case"Generate auto layout":return n.revertLayoutAutoGenerationForTransitions(e);default:return e}},TRANSITION_HIGHLIGHT:function(e,t){return m.a.isNil(t.payload)?m.a.mapValues(e,(function(e){return Object(E.a)({},e,{highlighted:!1})})):m.a.mapValues(e,(function(e){return e.id===t.payload?Object(E.a)({},e,{highlighted:!0}):e}))},TRANSITIONS_INTERSECT:function(e,t){var n,o,a,i,s=t.payload.position,r=t.payload.stepsLayout,c=t.payload.transitionsLayout,l=e,p=null;return m.a.forEach(l,(function(e){var t=Ee(r[e.startStepId],r[e.endStepId],c[e.id]);m.a.forEach(t,(function(r,c){c===t.length-1?(n=t[c].y<t[c-1].y?t[c].y:t[c-1].y,o=t[c].y<t[c-1].y?t[c-1].y:t[c].y,a=t[c].x<t[c-1].x?t[c].x:t[c-1].x,i=t[c].x<t[c-1].x?t[c-1].x:t[c].x):(n=t[c].y<t[c+1].y?t[c].y:t[c+1].y,o=t[c].y<t[c+1].y?t[c+1].y:t[c].y,a=t[c].x<t[c+1].x?t[c].x:t[c+1].x,i=t[c].x<t[c+1].x?t[c+1].x:t[c].x),Math.abs(o-n)<=5&&n-2<=s.y&&s.y<=n+2&&a-2<=s.x&&s.x<=i+2?p=e:Math.abs(i-a)<=5&&a-2<=s.x&&s.x<=a+2&&n-2<=s.y&&s.y<=o+2&&(p=e)}))})),m.a.isNull(p)?(m.a.map(l,(function(e){return e.intersected=!1})),l):Object(E.a)({},l,Object(z.a)({},p.id,{id:p.id,startStepId:p.startStepId,endStepId:p.endStepId,selected:!1,highlighted:!1,intersected:!0}))}},{}),Ee=function(e,t,n){if(m.a.isNil(e))return null;var o,a=[],i=$(e,n.start.position),s=$(t,n.end.position);switch(a.push(i),n.start.position){case"right":switch(n.end.position){case"top":o=ee(e,t,i,s),a=m.a.concat(a,o);break;case"left":o=ne(e,t,i,s),a=m.a.concat(a,o);break;case"right":o=oe(e,t,i,s),a=m.a.concat(a,o);break;case"bottom":o=te(e,t,i,s),a=m.a.concat(a,o)}break;case"bottom":switch(n.end.position){case"top":o=ae(e,t,i,s),a=m.a.concat(a,o);break;case"bottom":o=re(e,t,i,s),a=m.a.concat(a,o);break;case"right":o=ie(e,t,i,s),a=m.a.concat(a,o);break;case"left":o=se(e,t,i,s),a=m.a.concat(a,o)}break;case"left":switch(n.end.position){case"top":o=ce(e,t,i,s),a=m.a.concat(a,o);break;case"bottom":o=le(e,t,i,s),a=m.a.concat(a,o);break;case"left":o=pe(e,t,i,s),a=m.a.concat(a,o);break;case"right":o=ue(e,t,i,s),a=m.a.concat(a,o)}break;case"top":switch(n.end.position){case"top":o=de(e,t,i,s),a=m.a.concat(a,o);break;case"left":o=he(e,t,i,s),a=m.a.concat(a,o);break;case"bottom":o=fe(e,t,i,s),a=m.a.concat(a,o);break;case"right":o=ye(e,t,i,s),a=m.a.concat(a,o)}}return a.push(s),a},Te=function(e){return e.transitions},ke=function(e,t){return m.a.find(Te(e),(function(e){return e.id===t}))},we=Object(k.createSelector)(Te,(function(e){return Object.keys(e)})),Ce=Object(k.createSelector)(Te,(function(e){return m.a.find(e,(function(e){return!0===e.selected}))})),je=Object(k.createSelector)(Ce,(function(e){return e?e.id:null})),Ne=function(e,t){var n=m.a.find(e,(function(e){return t===e.id}));return n?n.startStepId:null},Ae=function(e,t){var n=Ne(Te(e),t);if(m.a.isNil(n))return null;var o=Ie[za(e,n)];return m.a.map(o,(function(e){return{label:a.a.createElement(v.b,{id:W[e]}),value:e}}))},Le=function(e,t){var n=Ne(Te(e),t);if(m.a.isNil(n))return null;var o=Oe[za(e,n)];return m.a.map(o,(function(e){return{label:_e[e],value:e}}))},Re=function(e,t){return m.a.pickBy(Te(e),(function(e){return e.startStepId===t}))},De=function(e,t){return m.a.pickBy(Te(e),(function(e){return e.endStepId===t}))},Me=function(e,t){var n=Ga(e),o=ke(e,t);return!m.a.isNil(n)&&!m.a.isNil(o)&&n.id===o.startStepId||!m.a.isNil(o)&&o.selected},Ge=function(e,t){var n=Te(e),o=!1;return m.a.forEach(n,(function(e){e.startStepId!==t&&e.endStepId!==t||(o=!0)})),o},ze=function(e){return!m.a.isUndefined(m.a.find(Te(e),(function(e){return!0===e.intersected})))},Ve=n(70),Ue=n(203),Fe=n(204),Be=Object(T.a)("CHANGE_APPLY",(function(e){return e})),He=Object(T.a)("CHANGE_REVERT",(function(e){return e})),Ke=Object(T.b)({CHANGE_APPLY:function(e,t){var n=t.payload;n.isRedo=!0;var o=[].concat(Object(S.a)(e.undoStack),[n]),a=[];return n.isRedo&&(a=m.a.slice(e.redoStack,0,e.redoStack.length-1)),{undoStack:o,redoStack:a}},CHANGE_REVERT:function(e,t){var n=t.payload;return{undoStack:m.a.slice(e.undoStack,0,e.undoStack.length-1),redoStack:[].concat(Object(S.a)(e.redoStack),[n])}}},{undoStack:[],redoStack:[]}),We=function(e){return e.changeStack.undoStack},Ye=function(e){return e.changeStack.redoStack},qe=function(){function e(t){Object(g.a)(this,e),this.description=t,this.isRedo=!1}return Object(P.a)(e,[{key:"applyStepsLayout",value:function(e){return e}},{key:"revertStepsLayout",value:function(e){return e}},{key:"applyRemoveStep",value:function(e){return e}},{key:"applyRemoveStepLayout",value:function(e){return e}},{key:"applyRemoveTransition",value:function(e){return e}},{key:"revertRemoveStep",value:function(e){return e}},{key:"revertRemoveStepLayout",value:function(e){return e}},{key:"revertRemoveTransition",value:function(e){return e}},{key:"applyAddStep",value:function(e){return e}},{key:"applyAddStepLayout",value:function(e){return e}},{key:"revertAddStep",value:function(e){return e}},{key:"revertAddStepLayout",value:function(e){return e}},{key:"applyAddStepProperty",value:function(e){return e}},{key:"revertAddStepProperty",value:function(e){return e}},{key:"applyStepPropertyChange",value:function(e){return e}},{key:"revertStepPropertyChange",value:function(e){return e}},{key:"applyProcessPlanNameChange",value:function(e){return e}},{key:"revertProcessPlanNameChange",value:function(e){return e}},{key:"applyProcessPlanPasswordChange",value:function(e){return e}},{key:"revertProcessPlanPasswordChange",value:function(e){return e}},{key:"applyProcessPlanEmailChange",value:function(e){return e}},{key:"revertProcessPlanEmailChange",value:function(e){return e}},{key:"applyProcessPlanCommentChange",value:function(e){return e}},{key:"revertProcessPlanCommentChange",value:function(e){return e}},{key:"applyRemoveTransitionProperty",value:function(e){return e}},{key:"revertRemoveTransitionProperty",value:function(e){return e}},{key:"applyTransitionPropertyChange",value:function(e){return e}},{key:"revertTransitionPropertyChange",value:function(e){return e}}]),e}(),Ze=function(e){function t(e,n,o){var a;return Object(g.a)(this,t),(a=Object(x.a)(this,Object(_.a)(t).call(this,"Change step property"))).stepId=e,a.name=n,a.value=o,a.currentValue=null,a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyStepPropertyChange",value:function(e){var t=this;return m.a.map(e,(function(e){return e.stepId===t.stepId&&e.name===t.name?(t.currentValue=e.value,Object(E.a)({},e,{value:t.value})):e}))}},{key:"revertStepPropertyChange",value:function(e){var t=this;return m.a.map(e,(function(e){return e.stepId===t.stepId&&e.name===t.name?Object(E.a)({},e,{value:t.currentValue}):e}))}},{key:"applyUpdateConnection",value:function(e){var t=this;return m.a.isUndefined(m.a.find(e,(function(e){return e.startStepId===t.stepId})))?e:m.a.map(e,(function(e){return e.startStepId===t.stepId?Object(E.a)({},e,{endStepId:t.value}):e}))}},{key:"revertUpdateConnection",value:function(e){var t=this;return m.a.isUndefined(m.a.find(e,(function(e){return e.startStepId===t.stepId})))?e:m.a.map(e,(function(e){return e.startStepId===t.stepId?Object(E.a)({},e,{endStepId:t.currentValue}):e}))}}]),t}(qe),Xe=Object(T.a)("STEPS_LAYOUT_POSITION_UPDATE",(function(e,t){return{id:e,position:t}})),Je=Object(T.a)("STEPS_LAYOUT_SIZE_UPDATE",(function(e,t){return{id:e,size:t}})),Qe=Object(T.a)("STEP_MOVE",(function(e,t){return{id:e,direction:t}})),$e={left:{deltaX:-5,deltaY:0},top:{deltaX:0,deltaY:-5},right:{deltaX:5,deltaY:0},bottom:{deltaX:0,deltaY:5}},et=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.stepsLayout},STEPS_LAYOUT_POSITION_UPDATE:function(e,t){return m.a.mapValues(e,(function(e,n){if(n===t.payload.id){var o={x:t.payload.position.x,y:t.payload.position.y};return Object(E.a)({},e,{position:o})}return e}))},STEPS_LAYOUT_SIZE_UPDATE:function(e,t){return m.a.mapValues(e,(function(e,n){return n===t.payload.id?Object(E.a)({},e,{size:t.payload.size}):e}))},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Move step":return n.applyStepsLayout(e);case"Remove step":return n.applyRemoveStepLayout(e);case"Add step":return n.applyAddStepLayout(e);case"Insert new step into transition":return n.applyInsertStepLayout(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForStepsLayout(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Move step":return n.revertStepsLayout(e);case"Remove step":return n.revertRemoveStepLayout(e);case"Add step":return n.revertAddStepLayout(e);case"Insert new step into transition":return n.revertInsertStepLayout(e);case"Generate auto layout":return n.revertLayoutAutoGenerationForStepsLayout(e);default:return e}},STEP_MOVE:function(e,t){var n=t.payload.direction.length>0?$e[t.payload.direction[0]].deltaX:0;n+=t.payload.direction.length>1?$e[t.payload.direction[1]].deltaX:0;var o=t.payload.direction.length>0?$e[t.payload.direction[0]].deltaY:0;return o+=t.payload.direction.length>1?$e[t.payload.direction[1]].deltaY:0,m.a.mapValues(e,(function(e,a){return a===t.payload.id?Object(E.a)({},e,{position:{x:e.position.x+n,y:e.position.y+o}}):e}))}},{}),tt=function(e){return e.stepsLayout},nt=function(e,t){return m.a.find(tt(e),(function(e,n){return n===t}))},ot=function(e){var t=Object.keys(e)[0],n=m.a.get(e,t+".position.x")+m.a.get(e,t+".size.width");for(var o in e)n<e[o].position.x+e[o].size.width&&(n=e[o].position.x+e[o].size.width);return n+60},at=function(e){var t=Object.keys(e)[0],n=m.a.get(e,t+".position.y")+m.a.get(e,t+".size.height");for(var o in e)n<e[o].position.y+e[o].size.height&&(n=e[o].position.y+e[o].size.height);return n+60},it=function(e){var t=Object.keys(e)[0],n=m.a.get(e,t+".position.x");for(var o in e)n>e[o].position.x&&(n=e[o].position.x);return n-60},st=function(e){var t=Object.keys(e)[0],n=m.a.get(e,t+".position.y");for(var o in e)n>e[o].position.y&&(n=e[o].position.y);return n-60},rt=(n(147),n(148),n(149),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).onMouseUp=function(){n.props.hover&&n.props.handleMouseUp(n.props.position)},n.onMouseOver=function(){n.props.hover&&n.props.handleMouseOver(n.props.position)},n.onMouseDown=function(e){e.stopPropagation(),n.props.active&&n.props.handleMouseDown(n.props.position)},n.onHandleTouchStart=function(e){e.stopPropagation(),n.props.active&&n.props.handleMouseDown(n.props.position),document.addEventListener("touchmove",n.handleTouchMove)},n.handleTouchMove=function(e){n.computedPosition={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},n.props.handleTouchTransitionMove({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY-ds})},n.handleTouchEnd=function(e){if(e.stopPropagation(),!m.a.isUndefined(n.computedPosition)){var t=document.elementFromPoint(n.computedPosition.x,n.computedPosition.y);if(m.a.isNull(t)||m.a.isNull(t.cx)||m.a.isUndefined(t.cx)||m.a.isNull(t.cy)||m.a.isUndefined(t.cy))n.props.handleDeleteTempTransition();else{var o,a=t.className.baseVal.split(" ")[1];switch(a){case"top":o=document.elementFromPoint(n.computedPosition.x,n.computedPosition.y+15);break;case"right":o=document.elementFromPoint(n.computedPosition.x-15,n.computedPosition.y);break;case"bottom":o=document.elementFromPoint(n.computedPosition.x,n.computedPosition.y-15);break;case"left":o=document.elementFromPoint(n.computedPosition.x+15,n.computedPosition.y)}n.props.handleCreateTransitionByTouch(o.id,a)}}document.removeEventListener("touchmove",n.handleTouchMove)},n.onMouseOut=function(){n.props.hover&&n.props.handleMouseOut()},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="anchor-outline "+(this.props.anchorHighlighted?" anchorHighlighted ":"")+this.props.stepClassName+(this.props.hover?" hover ":"")+(this.props.selectable?" selectable ":"")+(this.props.active?" active ":"")+(this.props.selected?" selected ":""),t="anchor-point "+this.props.stepClassName+(this.props.hover?" hover ":"")+(this.props.selectable?" selectable ":"")+(this.props.active?" active ":"")+(this.props.selected?" selected ":"");return a.a.createElement("g",{className:"anchor"},a.a.createElement("circle",{className:e,cx:this.props.x,cy:this.props.y,r:this.props.outlineRadius,onMouseUp:this.onMouseUp,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut}),a.a.createElement("circle",{className:t,cx:this.props.x,cy:this.props.y,r:this.props.pointRadius,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onHandleTouchStart,onTouchEnd:this.handleTouchEnd,onTouchEndCapture:this.handleCreateTransitionByTouch,onTouchCancel:this.handleDeleteTempTransition,onMouseOver:this.onMouseOver}))}}]),t}(o.Component));rt.defaultProps={pointRadius:5,outlineRadius:12};var ct=rt,lt=n(42),pt=n.n(lt),ut=["top","right","bottom","left"],dt={ArrowLeft:"left",ArrowUp:"top",ArrowRight:"right",ArrowDown:"bottom"},ht=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(x.a)(this,Object(_.a)(t).call(this))).setStep=function(t){e.step=t},e.setStepText=function(t){e.stepText=t},e.renderAnchorPoints=function(){var t=e.props.modifyingTransition;return m.a.map(ut,(function(n){var o=Ba(n,{position:e.props.position,size:{width:e.props.size.width,height:e.stepText?e.stepText.offsetHeight+10:e.props.size.height}}),i=e.props.intersectedAnchors?m.a.intersection(e.props.intersectedAnchors,[n]):[];return a.a.createElement(ct,{key:"".concat(e.props.className," ").concat(o.x," ").concat(o.y),stepClassName:n+" "+e.props.className,x:o.x,y:o.y,position:n,selected:e.props.selected,active:e.props.anchorStartEndAvailability&&!e.props.modifyingConnection,hover:t,selectable:"start"!==e.props.id,anchorHighlighted:i.length>0,handleMouseDown:e.handleAnchorMouseDown,handleMouseUp:e.handleTransitionCreationEnd,handleMouseOver:e.props.onAnchorMouseOver,handleMouseOut:e.props.onAnchorMouseOut,handleDeleteTempTransition:e.props.onDeleteTempTransition,handleTouchTransitionMove:e.props.onCreateTempTransitionByTouch,handleCreateTransitionByTouch:e.props.onAddTransition})}))},e.renderLeftTopAngleAnchor=function(){if("start-end"!==e.props.className){var t=e.props.modifyingConnection;return a.a.createElement(ct,{stepClassName:e.props.className+(e.props.connectionAnchorIsVisible?" connection ":" "),x:e.props.position.x+5,y:e.props.position.y+5,pointRadius:5.6,position:"left-top-angle",selected:!1,active:!1,hover:t,selectable:!0,handleMouseDown:e.handleAnchorMouseDown,handleMouseUp:e.handleTransitionCreationEnd,handleMouseOver:e.props.onAnchorMouseOver,handleMouseOut:e.props.onAnchorMouseOut,handleDeleteTempTransition:e.props.onDeleteTempTransition,handleTouchTransitionMove:e.props.onCreateTempTransitionByTouch,handleCreateTransitionByTouch:e.props.onAddTransition})}},e.renderFilePickUpAnchorPoint=function(){if(e.props.pickUpFile)return a.a.createElement(ct,{stepClassName:e.props.className+" connection ",x:e.props.position.x+5,y:e.props.position.y+5,pointRadius:5.6,position:"left-top-angle",selected:!0,active:e.props.connectionCanStart,hover:!1,selectable:!0,handleMouseDown:e.handleAnchorMouseDown,handleMouseUp:e.handleTransitionCreationEnd,handleMouseOver:e.props.onAnchorMouseOver,handleMouseOut:e.props.onAnchorMouseOut,handleDeleteTempTransition:e.props.onDeleteTempTransition,handleTouchTransitionMove:e.props.onCreateTempTransitionByTouch,handleCreateTransitionByTouch:e.props.onAddTransition})},e.renderText=function(){return e.props.text},e.renderValidationTooltips=function(){if(0!==e.props.validationTooltips.length)return a.a.createElement("g",null,a.a.createElement("image",{className:"error-icon",href:pt.a,x:e.props.position.x+e.props.size.width-12.5-5,y:e.props.position.y-5,height:25,width:25}),a.a.createElement("title",null,m.a.join(e.props.validationTooltips,".\n")))},e.handleMouseDown=function(t){t.stopPropagation(),e.props.isLockedProcessPlan||(e.haveChangedPosition=!1,e.computedPosition=e.startPosition={},e.startPosition={x:e.props.position.x,y:e.props.position.y},e.computedPosition={x:t.pageX,y:t.pageY},document.addEventListener("mousemove",e.handleMouseMove),document.addEventListener("mouseup",e.handleMouseUp),e.mouseDownTimeout=setTimeout((function(){return e.setState({cursorType:"draggable"})}),150))},e.handleTouchStart=function(t){t.stopPropagation(),e.props.isLockedProcessPlan||(e.haveChangedPosition=!1,e.computedPosition=e.startPosition={},e.startPosition={x:e.props.position.x,y:e.props.position.y},e.computedPosition={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},document.addEventListener("touchmove",e.handleTouchMove),document.addEventListener("touchend",e.handleTouchEnd))},e.handleMouseMove=function(t){var n={x:t.pageX,y:t.pageY},o=(e.computedPosition.x-n.x)*e.props.zoomScale,a=(e.computedPosition.y-n.y)*e.props.zoomScale;0===o&&0===a||(e.haveChangedPosition=!0),e.computedPosition.x=n.x,e.computedPosition.y=n.y,e.position={x:e.props.position.x-o,y:e.props.position.y-a},e.props.onStepPositionChange(e.position),e.mouseMoveTimeout=setTimeout((function(){e.props.isExistDependentTransition||e.props.onTransitionOver({x:t.pageX*e.props.zoomScale+e.props.svgPosition.x,y:(t.pageY-100)*e.props.zoomScale+e.props.svgPosition.y})}),100)},e.handleTouchMove=function(t){var n=(e.computedPosition.x-t.targetTouches[0].pageX)*e.props.zoomScale,o=(e.computedPosition.y-t.targetTouches[0].pageY)*e.props.zoomScale;0===n&&0===o||(e.haveChangedPosition=!0),e.computedPosition.x=t.targetTouches[0].pageX,e.computedPosition.y=t.targetTouches[0].pageY,e.position={x:e.props.position.x-n,y:e.props.position.y-o},e.props.onStepPositionChange(e.position)},e.handleMouseUp=function(t){!e.props.snapToGrid||m.a.isUndefined(e.startPosition)||m.a.isUndefined(e.position)||m.a.isEmpty(e.position)||(Math.abs(e.startPosition.x-e.position.x)>=20||Math.abs(e.startPosition.y-e.position.y)>=20)&&(e.position={x:20*Math.round(e.position.x/20),y:20*Math.round(e.position.y/20)}),m.a.isEqual(e.startPosition,e.position)||m.a.isEmpty(e.position)||e.props.onStepPositionChangeEnd(e.startPosition,e.position),document.removeEventListener("mousemove",e.handleMouseMove),document.removeEventListener("mouseup",e.handleMouseUp),e.computedPosition=e.startPosition=e.position={},e.props.isIntersected&&e.props.onDropStep(),clearTimeout(e.mouseMoveTimeout),clearTimeout(e.mouseDownTimeout),e.setState({cursorType:"default"}),t.stopPropagation()},e.handleTouchEnd=function(){!e.props.snapToGrid||m.a.isUndefined(e.startPosition)||m.a.isUndefined(e.position)||m.a.isEmpty(e.position)||(Math.abs(e.startPosition.x-e.position.x)>=20||Math.abs(e.startPosition.y-e.position.y)>=20)&&(e.position={x:20*Math.round(e.position.x/20),y:20*Math.round(e.position.y/20)}),m.a.isEqual(e.startPosition,e.position)||m.a.isEmpty(e.position)||e.props.onStepPositionChangeEnd(e.startPosition,e.position),document.removeEventListener("touchmove",e.handleTouchMove),document.removeEventListener("touchend",e.handleTouchStart),e.computedPosition=e.startPosition=e.position={}},e.handleClick=function(t){t.stopPropagation(),!e.haveChangedPosition&&e.props.selectable&&e.props.onStepSelect()},e.handleAnchorMouseDown=function(t){e.props.isLockedProcessPlan||("left-top-angle"===t&&"filepickup"===e.props.className||"left-top-angle"!==t)&&e.props.onTransitionCreationStart(t)},e.handleTransitionCreationEnd=function(t){e.props.onTransitionCreationEnd(t)},e.handleMouseEnter=function(){e.props.selectable&&e.props.onStepHighlight()},e.handleMouseLeave=function(){e.props.selectable&&e.props.onStepHighlightReset()},e.handleArrowKeyDown=function(t,n){t.repeat||(e.movementPositon={x:e.props.position.x,y:e.props.position.y}),t.shiftKey?(t.stopPropagation(),e.props.isLockedProcessPlan||e.props.onTransitionCreationStartByShortcut(n)):t.altKey?(t.stopPropagation(),e.props.isLockedProcessPlan||(e.movementDirection.length<2&&!e.movementDirection.includes(n)&&e.movementDirection.push(n),e.props.onMoveStep(e.movementDirection))):e.props.onAnotherElementSelect(n)},e.handleKeyDown=function(t){switch(t.preventDefault(),t.key){case"Delete":t.stopPropagation(),e.props.isLockedProcessPlan||e.props.onRemoveStep();break;case"ArrowLeft":t.stopPropagation(),e.handleArrowKeyDown(t,"left");break;case"ArrowRight":t.stopPropagation(),e.handleArrowKeyDown(t,"right");break;case"ArrowUp":t.stopPropagation(),e.handleArrowKeyDown(t,"top");break;case"ArrowDown":t.stopPropagation(),e.handleArrowKeyDown(t,"bottom")}},e.handleKeyUp=function(t){if(t.stopPropagation(),e.props.snapToGrid&&!m.a.isUndefined(e.props.position)){var n={x:20*Math.round(e.props.position.x/20),y:20*Math.round(e.props.position.y/20)};m.a.isNull(e.movementPositon)||e.props.onStepPositionChangeEnd(e.movementPositon,n)}else m.a.isNull(e.movementPositon)||e.props.onStepPositionChangeEnd(e.movementPositon,e.props.position);var o=dt[t.key];t.altKey?o&&(e.movementDirection=m.a.difference(e.movementDirection,[o])):e.movementDirection=[],e.movementPositon=null},e.state={cursorType:"default"},e.movementDirection=[],e.movementPositon=null,e.textStepHeight=null,e}return Object(I.a)(t,e),Object(P.a)(t,[{key:"renderContent",value:function(){var e=m.a.floor((this.props.size.width-10)/7.8),t="start-end"===this.props.className||e>this.props.text.length?"":"ww";return a.a.createElement("div",{className:"text",ref:this.setStepText},a.a.createElement("span",{className:"icon-text-offset"},t),a.a.createElement("span",null,this.props.text))}},{key:"render",value:function(){var e="step "+this.props.className+(this.props.selected?" selected ":" ")+(this.props.highlighted?" highlighted ":" ")+this.state.cursorType+("start-end"!==this.props.className?this.props.stepAvailability:""),t="pattern_"+this.props.className+this.props.id,n=this.props.className+(this.props.selected?" selected":" ")+"Icon",o=("start-end"===this.props.className||this.props.className===this.props.text?this.props.text:this.props.className+" "+this.props.text)+" step";return a.a.createElement("g",{className:e,role:"img","aria-label":o,ref:this.setStep,x:this.props.position.x,y:this.props.position.y,tabIndex:"0",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onClick:this.handleClick},a.a.createElement("pattern",{id:t,x:"0",y:"0",width:"5",height:"5"},a.a.createElement("rect",{x:"0",y:"0",rx:"10",ry:"10",width:this.props.size.width,height:this.stepText?this.stepText.offsetHeight+10>40?this.stepText.offsetHeight+10:40:this.props.size.height,className:n}),ft(this.props.className)),a.a.createElement("rect",{id:this.props.id,x:this.props.position.x+5,y:this.props.position.y+5,rx:"10",ry:"10",width:this.props.size.width,height:this.stepText?this.stepText.offsetHeight+10>40?this.stepText.offsetHeight+10:40:this.props.size.height,fill:"url(#"+t+")"}),a.a.createElement("foreignObject",{x:this.props.position.x+5,y:this.props.position.y+10,width:this.props.size.width,height:this.stepText?this.stepText.offsetHeight+10>40?this.stepText.offsetHeight+10:40:this.props.size.height},this.renderContent()),this.renderAnchorPoints(),this.renderLeftTopAngleAnchor(),this.renderFilePickUpAnchorPoint(),this.renderValidationTooltips())}},{key:"componentDidMount",value:function(){this.props.selected&&this.step.focus(),this.setState({textStepHeight:this.stepText.offsetHeight}),this.props.onSizeChange({width:this.props.size.width,height:this.stepText.offsetHeight+10>40?this.stepText.offsetHeight+10:40})}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.step.focus(),e.text!==this.props.text&&(this.setState({textStepHeight:this.stepText.offsetHeight}),this.props.onSizeChange({width:this.props.size.width,height:this.stepText.offsetHeight+10>40?this.stepText.offsetHeight+10:40}))}}]),t}(o.Component);function ft(e){switch(e){case"processplan":return a.a.createElement("g",null,a.a.createElement("path",{d:"M8.798425935864337,15.746427373489912 l8.526603775668603,5.327974099218227 L8.798425935864337,26.333181103105346 zM11.987237104000563,10.487647743092701 V16.50756653052109 l3.188811168136226,2.0066395958094625 V14.91609374763772 L16.770453856204902,15.95401077995296 l1.7330495479001229,1.037917032315239 L20.444518897753163,15.746427373489912 zM16.215878000876863,19.13695634571969 L17.87960556686098,20.17487337803493 l1.3864396383200985,0.8995280946732074 l-1.3864396383200985,0.8995280946732074 L16.215878000876863,22.942652130875565 v4.428446004545019 L24.673159794629463,22.112318505023378 L16.215878000876863,16.853538874626167 z",fill:"#FFCC00"}));case"check":return a.a.createElement("g",null,a.a.createElement("path",{d:"M16.24251874771214,22.717441912033802 c-2.1636013312411566,0 -3.9810264494837284,-1.7308810649929258 -3.9810264494837284,-3.9810264494837284 C12.261492298228404,16.572814131308917 14.07891741647098,14.755389013066344 16.24251874771214,14.755389013066344 c2.250145384490805,0 3.9810264494837284,1.8174251182425722 3.9810264494837284,3.9810264494837284 c0,2.250145384490805 -1.7308810649929258,3.9810264494837284 -3.9810264494837284,3.9810264494837284 m0,-12.54888772119871 C11.48259581898159,10.16855419083509 7.674657475997156,13.976492533819528 7.674657475997156,18.736415462550074 c0,4.759922928730545 3.8079383429844365,8.654405324964626 8.567861271714982,8.654405324964626 c4.759922928730545,0 8.654405324964626,-3.8944823962340824 8.654405324964626,-8.654405324964626 c0,-4.759922928730545 -3.8944823962340824,-8.567861271714982 -8.654405324964626,-8.567861271714982 z",fill:"#CC66FF"}));case"quickcheck":return a.a.createElement("g",null,a.a.createElement("path",{d:"M17.12852200988052,19.68126660792371 l5.721616548306819,-2.9889041670259493 C21.82537141520701,14.557430893022081 19.605042605416312,13.10567744046662 17.12852200988052,13.10567744046662 z",fill:"#0000E2"}),a.a.createElement("path",{d:"M17.12852200988052,11.824718511741212 C12.773261652214137,11.824718511741212 9.271973913698023,15.326006250257324 9.271973913698023,19.68126660792371 c0,4.269863095751357 3.5012877385161123,7.77115083426747 7.856548096182496,7.77115083426747 c4.269863095751357,0 7.77115083426747,-3.5012877385161123 7.77115083426747,-7.77115083426747 C24.899672844147993,15.326006250257324 21.398385105631878,11.824718511741212 17.12852200988052,11.824718511741212 m0,1.964137024045625 c3.1596986908560045,0 5.807013810221847,2.647315119365841 5.807013810221847,5.8924110721368725 c0,3.1596986908560045 -2.647315119365841,5.807013810221847 -5.807013810221847,5.807013810221847 C13.883426057109489,25.488280418145557 11.236110937743648,22.840965298779714 11.236110937743648,19.68126660792371 C11.236110937743648,16.43617065515268 13.883426057109489,13.788855535786837 17.12852200988052,13.788855535786837 z",fill:"#E00914"}),a.a.createElement("path",{d:"M19.690439867331335,9.177403392375371 H14.481206890514681 l2.647315119365841,3.928274048091248 zM22.081563200952093,12.422499345146402 l-0.17079452383005456,2.2203288097907055 l2.134931547875679,-0.5977808334051911 zM13.200247961789271,10.543759583015806 L6.624658794332182,9.860581487695589 L13.200247961789271,9.177403392375371 zM11.833891771148839,13.10567744046662 L6.624658794332182,12.422499345146402 L11.833891771148839,11.824718511741212 zM9.271973913698023,15.75299255983246 L6.624658794332182,15.069814464512241 L9.271973913698023,14.386636369192026 z",fill:"#E00914"}));case"addfiles":return a.a.createElement("g",null,a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"gradient",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"0%",y2:"35"},a.a.createElement("stop",{style:{stopColor:"#24945c",stopOpacity:1},offset:"50%"}),a.a.createElement("stop",{style:{stopColor:"#bdcecc",stopOpacity:1},offset:"100%"}))),a.a.createElement("path",{d:"M23.091891628414235,12.494143219058044 L23.091891628414235,28.90162874387368 L8.0625,28.90162874387368 L8.0625,7.512501058934966 L18.489893179561964,7.512501058934966 L18.489893179561964,12.494143219058044 L23.091891628414235,12.494143219058044 zM18.984322764975843,7.512501058934966 L23.0221643791892,12.021525885918166 L18.984322764975843,12.021525885918166 L18.984322764975843,7.512501058934966 z",fill:"url(#gradient)"}),a.a.createElement("path",{d:"M24.030040072532877,21.767661701748704 L24.055395435887437,24.04133427739461 L21.93188375494321,24.06049443954894 L21.93188375494321,26.21920604226894 L19.67525641638755,26.21920604226894 L19.67525641638755,24.079654601703258 L17.41229023699325,24.105201484575684 L17.393273714477335,21.825142188211657 L19.67525641638755,21.805982026057343 L19.67525641638755,19.525922729693313 L21.93188375494321,19.525922729693313 L21.93188375494321,21.786821863903022 L24.030040072532877,21.767661701748704 z",fill:"#0407e0"}));case"fixup":return a.a.createElement("g",null,a.a.createElement("path",{d:"M16.110792914237358,21.3931078979628 L10.54325410685632,15.703132589950936 L7.173427986599378,19.10233861811387 L16.110792914237358,28.117624171067735 L25.048157841875337,19.10233861811387 L21.751588811189194,15.703132589950936 zM16.110792914237358,10.087053065160001 L12.228167166984791,14.003529575869468 l3.8826257472525647,3.9903722939304007 L20.066675751060725,14.003529575869468 z",fill:"#FF6600"}));case"action":return a.a.createElement("g",null,a.a.createElement("path",{d:"M8.306669634203013,25.423145547339963 L12.675115482464262,17.54281186028046 L8.306669634203013,9.748133974167251 H12.675115482464262 l4.454101649207548,7.794677886113206 L12.675115482464262,25.423145547339963 zM15.159133709906932,25.423145547339963 l4.368445848261248,-7.880333687059506 L15.159133709906932,9.748133974167251 h4.368445848261248 l4.454101649207548,7.794677886113206 l-4.454101649207548,7.880333687059506 z",fill:"#00A766"}));case"variable":return a.a.createElement("g",null,a.a.createElement("path",{fill:"#f76b0e",d:"M8.004225328511069,10.590403825502703 L16.966254091095614,25.490081578465055 L25.9282828536802,10.590403825502703 L8.004225328511069,10.590403825502703 z"}),a.a.createElement("path",{fill:"#ef7c34",d:"M10.969107350951692,12.36066304825129 L16.96625451002036,22.331124254564962 L22.96340166908898,12.36066304825129 L10.969107350951692,12.36066304825129 z"}),a.a.createElement("path",{fill:"#ea8b4f",d:"M13.192768662313764,13.688356856365937 L16.96625449574386,19.961905497052676 L20.739740329173962,13.688356856365937 L13.192768662313764,13.688356856365937 z"}));case"filepickup":return a.a.createElement("g",null,a.a.createElement("path",{d:"M8.724213758635278,22.042297607922592 V18.631873525302947 H13.038758819387983 V22.042297607922592 c0,0.4487400108710063 0.28138337352735115,0.7179840173936098 0.6565612048971514,0.7179840173936098 H19.41678195267459 c0.4689722892122513,0 0.7503556627396011,-0.2692440065226038 0.7503556627396011,-0.7179840173936098 V16.567669475296313 c0,-0.35899200869680514 -0.28138337352735115,-0.6282360152194096 -0.7503556627396011,-0.6282360152194096 H14.914647976236985 V11.811025360063647 H19.41678195267459 c2.8138337352735032,0 5.064900723492306,2.1539520521808297 5.064900723492306,4.756644115232666 V22.042297607922592 c0,2.6924400652260374 -2.251066988218802,4.846392117406868 -5.064900723492306,4.846392117406868 H13.695320024285133 C10.97528074685408,26.888689725329456 8.724213758635278,24.73473767314863 8.724213758635278,22.042297607922592 zM15.852592554661484,9.567325305708614 L8.067652553738132,13.875229410070277 l7.784940000923359,4.3079041043616595 z",fill:" #0000E2"}));case"pdfcopy":return a.a.createElement("g",null,a.a.createElement("path",{d:"M20.3410797543537,17.618652121128065 V22.411823914350492 c0,0.4521860182285309 -0.2713116109371188,0.7234976291656494 -0.7234976291656494,0.7234976291656494 H12.744354648114381 c-0.3617488145828248,0 -0.7234976291656494,-0.2713116109371188 -0.7234976291656494,-0.6330604255199433 V17.618652121128065 H7.951182854891954 v4.8836089968681335 c0,2.622678905725479 2.1704928874969482,4.793171793222427 4.793171793222427,4.793171793222427 h6.963664680719376 C22.330698234559236,27.295432911218626 24.501191122056184,25.124940023721678 24.501191122056184,22.411823914350492 V17.618652121128065 zM18.261024070502458,13.45854075342558 V9.298429385723097 H14.100912702799974 V13.45854075342558 H11.83998261165732 l4.3409857749938965,6.963664680719376 L20.521954161645112,13.45854075342558 z",fill:"#E00914"}));case"rename":return a.a.createElement("g",null,a.a.createElement("path",{d:"M12.458732282803728,24.884655477939397 H5.387307422586028 v-5.321425772677791 v-5.321425772677791 h7.0714248602177 h7.071424683432084 v5.321425772677791 v5.321425772677791 zm15.026777452293178,0 h-2.6517842562870317 v-5.321425772677791 v-5.321425772677791 h2.6517842562870317 h2.6517842562870317 v5.321425772677791 v5.321425772677791 z",fill:"#989897"}),a.a.createElement("path",{d:"m19.532961523250652,29.097424408979393 c-1.1051099682166161,0.04893121765557124 -1.3956590099760962,0.010230853663121627 -1.3956590099760962,0.010230853663121627 v-0.7416349157753974 v-0.7416349157753974 h1.2053418722520832 c0.8361788998768603,0.011458259448729897 1.001095674249019,-0.16997753125131126 1.3464679325342321,-0.3829650669906414 c0.3453722582852155,-0.21298753573933096 0.6888825174243098,-0.7716837376578676 0.6888825174243098,-0.7716837376578676 l0.012984994045317333,-7.069552513153306 l0.012989077376778162,-6.926340586012331 l-0.6416665474100297,-0.5827131957857709 c-0.17645831074608698,-0.16024613162221837 -1.0879158761015146,-0.5827131587040245 -1.6333325843166393,-0.5827131587040245 h-0.9916660369066117 v-0.7416349157753974 v-0.7416349157753974 h1.1341428632359902 c0.6237782889465942,0 1.7920965948436782,0.4185084394736185 2.0416657303958026,0.577253019963612 l0.9075228671598096,0.5772529828818656 l0.9075228671598096,-0.5772529828818656 c0.2495687272189767,-0.15874458048999315 1.4178874414492082,-0.577253019963612 2.0416657303958026,-0.577253019963612 h1.1341428632359902 v0.7416349157753974 v0.7416349157753974 h-0.9916660369066117 c-0.5454167082151246,0 -1.4568746819036997,0.4224670270818067 -1.6333325843166393,0.5827131587040245 c-0.17645831074608698,0.16024609454047287 -0.6416677724094676,0.5827117125159388 -0.6416677724094676,0.5827117125159388 V19.466399874292534 V26.45895770457733 c0,0 0.19327265303533483,0.5578522213843846 0.5232250267251622,0.7884546988257539 c0.3299523736898291,0.23060247744137058 0.7169521545520825,0.36250484293422935 1.4252047714269458,0.37697154441880315 h1.318235370481173 v0.7416349157753974 v0.7416349157753974 c0,0 -1.3286629740325964,0.014465589032199142 -1.484607444185958,0.014465589032199142 c-0.15594487848650798,0 -1.2716923334916321,-0.2197712703139285 -1.8222074893687021,-0.5078293171327921 c-0.3196938200608808,-0.16728020506263525 -0.8116409361295267,-0.6834851761167373 -0.8116409361295267,-0.6834851761167373 c0,0 -0.4981398965620804,0.5420108995834217 -0.8296018778929626,0.7113903022751602 c-0.5492223731365826,0.28065615954196776 -0.7178361958133428,0.40629690144093566 -1.8229461640299585,0.4552281190965063 z",fill:"#b72028"}));case"profile":return a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("path",{d:"M15.032252677977382,13.717326361407801 C15.032252677977382,15.602163471598317 13.506432160204106,17.127983989371593 11.62159505001359,17.127983989371593 C9.736757939823075,17.127983989371593 8.210937422049799,15.602163471598317 8.210937422049799,13.717326361407801 C8.210937422049799,11.832489251217286 9.736757939823075,10.306668733444011 11.62159505001359,10.306668733444011 c1.8848371101905157,0 3.41065762796379,1.5258205177732749 3.41065762796379,3.41065762796379 z",fill:"#6999FF"}),a.a.createElement("path",{d:"M17.814631269211,23.321020208569 c0,-1.8848371101905157 1.5258205177732749,-3.41065762796379 3.41065762796379,-3.41065762796379 c1.8848371101905157,0 3.41065762796379,1.5258205177732749 3.41065762796379,3.41065762796379 c0,1.8848371101905157 -1.5258205177732749,3.41065762796379 -3.41065762796379,3.41065762796379 c-1.8848371101905157,0 -3.41065762796379,-1.5258205177732749 -3.41065762796379,-3.41065762796379 z",fill:"#6999FF"}),a.a.createElement("path",{d:"M15.301515122290311,23.500528504777623 c0,-3.3209034798594796 2.6926244431293087,-6.013527922988788 6.013527922988788,-6.013527922988788 c1.2565580734603439,0 2.3336078507120672,0.3590165924172413 3.3209034798594796,0.8975414810431028 v-8.077873329387923 H16.468319047646347 c0.6282790367301729,0.8975414810431028 0.9872956291474129,1.9745912582948257 0.9872956291474129,3.2311493317551703 c0,3.3209034798594796 -2.6926244431293087,6.013527922988788 -6.013527922988788,6.013527922988788 C10.275282828448937,19.55134598818797 9.108478903092902,19.192329395770727 8.210937422049799,18.564050359040554 v8.167627477492232 h8.077873329387923 C15.66053171470755,25.744382207385378 15.301515122290311,24.667332430133655 15.301515122290311,23.500528504777623 z",fill:"#6999FF"}),a.a.createElement("path",{d:"M15.301515122290311,23.500528504777623 c0,-3.3209034798594796 2.6926244431293087,-6.013527922988788 6.013527922988788,-6.013527922988788 c1.2565580734603439,0 2.3336078507120672,0.3590165924172413 3.3209034798594796,0.8975414810431028 v-8.077873329387923 H16.468319047646347 c0.6282790367301729,0.8975414810431028 0.9872956291474129,1.9745912582948257 0.9872956291474129,3.2311493317551703 c0,3.3209034798594796 -2.6926244431293087,6.013527922988788 -6.013527922988788,6.013527922988788 C10.275282828448937,19.55134598818797 9.108478903092902,19.192329395770727 8.210937422049799,18.564050359040554 v8.167627477492232 h8.077873329387923 C15.66053171470755,25.744382207385378 15.301515122290311,24.667332430133655 15.301515122290311,23.500528504777623 z",fill:"#6999FF"})))}}ht.defaultProps={size:{width:200,height:40}};var yt,vt=ht,bt=n(105),mt=n.n(bt),gt=n(106),Pt=n.n(gt),xt=n(107),_t=n.n(xt),It={certify:mt.a,create_report:_t.a,create_reports:Pt.a},Ot=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setTransition=function(e){n.transition=e},n.renderArrow=function(){var e;if(n.props.arrowType){var o=t.arrowPosition(n.props.arrowType);e=n.props.end.x+o.x1+", "+(n.props.end.y+o.y1)+" "+(n.props.end.x+o.x2)+", "+(n.props.end.y+o.y2)+" "+n.props.end.x+", "+n.props.end.y}return e?a.a.createElement("polygon",{points:e}):null},n.renderSelectionPath=function(e){return a.a.createElement("path",{className:"selection-path",d:e,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave,onMouseDown:n.handleMouseDown,onClick:n.handleClick})},n.renderTypes=function(){if(n.props.highlighted||n.props.showTransitionInfo)return m.a.map(n.props.types,(function(e,t){return a.a.createElement("text",{key:e,className:"transition-label ".concat(e),x:n.props.typesPoints[t].x,y:n.props.typesPoints[t].y},n.props.translate(q[e]))}))},n.renderIcons=function(){if(n.props.highlighted||n.props.showTransitionInfo)return m.a.map(n.props.icons,(function(e,t){return a.a.createElement("g",{key:"".concat(e.name).concat(t,"g")},a.a.createElement("image",{href:It[e.name],x:n.props.iconsPoints[t].x,y:n.props.iconsPoints[t].y,key:"".concat(e.name).concat(t),width:zt,height:zt}),e.innerText?a.a.createElement("text",{className:"report-text",x:n.props.iconsPoints[t].x+zt/2-5,y:n.props.iconsPoints[t].y+zt-5},e.innerText):null,e.caption?a.a.createElement("text",{className:"report-text",x:n.props.iconsPoints[t].x+11,y:n.props.iconsPoints[t].y+zt+11,fontSize:"10",textAnchor:"middle"},n.props.translate(Y[e.caption])):null)}))},n.renderValidationTooltips=function(){if(n.props.validationTooltips&&0!==n.props.validationTooltips.length){var e=n.getErrorIconCoordinates();return a.a.createElement("image",{className:"error-icon",href:pt.a,x:e.x,y:e.y,height:20,width:20,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave,onClick:n.handleClick},a.a.createElement("title",null,m.a.join(n.props.validationTooltips,".\n")))}},n.buildPath=function(){if(m.a.isNil(n.props.start))return null;for(var e="M "+n.props.start.x+" "+n.props.start.y,t=1;t<n.props.points.length-1;t++){var o=void 0;switch(n.getLineDirection(n.props.points[t-1],n.props.points[t])){case"H":n.getRadius(n.props.points[t].x,n.props.points[t-1].x),e+=" L "+(o=n.getOffsetCoordinate(n.props.points[t].x,n.props.points[t-1].x))+" "+n.props.points[t].y,e+=" M "+o+" "+n.props.points[t].y,n.getRadius(n.props.points[t].y,n.props.points[t+1].y),o=n.getOffsetCoordinate(n.props.points[t].y,n.props.points[t+1].y),e+=" Q "+n.props.points[t].x+" "+n.props.points[t].y+" "+n.props.points[t].x+" "+o,e+=" M "+n.props.points[t].x+" "+o;break;case"V":n.getRadius(n.props.points[t].y,n.props.points[t-1].y),o=n.getOffsetCoordinate(n.props.points[t].y,n.props.points[t-1].y),e+=" L "+n.props.points[t].x+" "+o,e+=" M "+n.props.points[t].x+" "+o,n.getRadius(n.props.points[t].x,n.props.points[t+1].x),o=n.getOffsetCoordinate(n.props.points[t].x,n.props.points[t+1].x),e+=" Q "+n.props.points[t].x+" "+n.props.points[t].y+" "+o+" "+n.props.points[t].y,e+=" M "+o+" "+n.props.points[t].y}}return e+=" L "+n.props.points[n.props.points.length-1].x+" "+n.props.points[n.props.points.length-1].y},n.getLineDirection=function(e,t){return e.x===t.x?"V":"H"},n.getOffsetCoordinate=function(e,t){return e-Math.sign(e-t)*yt},n.getRadius=function(e,t){return yt=Math.abs(e-t)<20?Math.abs(e-t)<10?2:5:10},n.getAriaLabel=function(){if(m.a.isNil(n.props.types))return"";switch(n.props.types.length){case 0:return"transition";case 1:return"transition on "+n.props.types[0];default:return"transition on "+n.props.types.slice(0,n.props.types.length-1).join(",")+" and "+n.props.types[n.props.types.length-1]}},n.handleClick=function(e){e.stopPropagation(),n.props.onTransitionSelect()},n.handleMouseDown=function(e){if(e.stopPropagation(),!n.props.isLockedProcessPlan&&(document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp),m.a.isFunction(n.props.onStartTransitionPointUpdate))){n.baseStart={start:n.props.start,end:n.props.start};var t=e.pageX*n.props.scale+n.props.svgPosition.x,o=(e.pageY-ds)*n.props.scale+n.props.svgPosition.y;Math.pow(t-n.props.start.x,2)+Math.pow(o-n.props.start.y,2)<=Math.pow(25,2)?n.props.onStartTransitionPointUpdate({start:{x:t,y:o},end:{x:n.props.end.x,y:n.props.end.y}},"start"):Math.pow(t-n.props.end.x,2)+Math.pow(o-n.props.end.y,2)<=Math.pow(25,2)&&n.props.onStartTransitionPointUpdate({start:{x:n.props.start.x-5,y:n.props.start.y-5},end:{x:t,y:o}},"end")}},n.handleMouseUp=function(e){e.stopPropagation()},n.handleMouseEnter=function(){m.a.isFunction(n.props.onTransitionHighlight)&&n.props.onTransitionHighlight()},n.handleMouseLeave=function(){m.a.isFunction(n.props.onTransitionHighlightReset)&&n.props.onTransitionHighlightReset()},n.handleDragOver=function(e){n.setState({isAvailableDrop:!0}),e.preventDefault()},n.handleDragLeave=function(e){n.setState({isAvailableDrop:!1}),e.preventDefault()},n.handleDrop=function(e){if(!n.props.isLockedProcessPlan){var t;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(a){return}var o={x:e.clientX-t.offsetX-5,y:e.clientY-t.offsetY-5-ds};n.props.onInsertStep(t.stepType,o),n.setState({isAvailableDrop:!1}),e.preventDefault(),e.stopPropagation()}},n.onKeyDown=function(e){switch(e.key){case"Delete":e.stopPropagation(),n.props.isLockedProcessPlan||n.props.onRemoveTransition();break;case"ArrowRight":e.stopPropagation(),n.props.onArrowKeyDown("right",e.ctrlKey);break;case"ArrowLeft":e.stopPropagation(),n.props.onArrowKeyDown("left",e.ctrlKey);break;case"ArrowDown":e.stopPropagation(),n.props.onArrowKeyDown("bottom");break;case"ArrowUp":e.stopPropagation(),n.props.onArrowKeyDown("top");break;case"Enter":m.a.isFunction(n.props.onEnterKeyDown)&&n.props.onEnterKeyDown()}},n.getErrorIconCoordinates=function(){switch(n.props.end.position){case"left":return{x:n.props.points[n.props.points.length-1].x-5-20-10,y:n.props.points[n.props.points.length-1].y-10};case"top":return{x:n.props.points[n.props.points.length-1].x-10,y:n.props.points[n.props.points.length-1].y-5-20-10};case"right":return{x:n.props.points[n.props.points.length-1].x+5+10,y:n.props.points[n.props.points.length-1].y-10};case"bottom":return{x:n.props.points[n.props.points.length-1].x-10,y:n.props.points[n.props.points.length-1].y+5+10};default:return null}},n.state={isAvailableDrop:!1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.buildPath();if(m.a.isNil(e))return null;var t="transition "+this.props.className+(this.props.selected?" selected":"")+(this.props.highlighted?" highlighted":"")+(this.props.disabled?" disabled":"")+(this.state.isAvailableDrop?" step-insert":"")+(this.props.intersected?" step-insert":"");return a.a.createElement("g",{className:t,ref:this.setTransition,role:"img","aria-label":this.getAriaLabel(),tabIndex:"0",onKeyDown:this.onKeyDown,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderTypes(),this.renderIcons(),a.a.createElement("path",{className:"visible-path",d:e}),this.renderArrow(),this.renderSelectionPath(e),this.renderValidationTooltips())}},{key:"componentDidMount",value:function(){this.props.selected&&this.transition.focus()}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.transition.focus()}}],[{key:"arrowPosition",value:function(e){switch(e){case"top":return{x1:-5,x2:5,y1:-10,y2:-10};case"bottom":return{x1:-5,x2:5,y1:10,y2:10};case"right":return{x1:10,x2:10,y1:5,y2:-5};case"left":return{x1:-10,x2:-10,y1:5,y2:-5};default:return"Error"}}}]),t}(o.Component);Ot.defaultProps={disabled:!1};var St=Ot,Et=Object(T.a)("CREATING_TRANSITION_BY_SHORTCUTS_TYPE_SET"),Tt=Object(T.a)("CREATING_TRANSITION_TYPE_SET"),kt=Object(T.a)("UPDATING_TRANSITION_END_POINT_TYPE_SET"),wt=Object(T.a)("UPDATING_TRANSITION_START_POINT_TYPE_SET"),Ct=Object(T.a)("CREATING_CONNECTION_TYPE_SET"),jt=Object(T.a)("UPDATING_CONNECTION_TYPE_SET"),Nt=Object(T.a)("ACTION_TYPE_RESET"),At=Object(T.b)({CREATING_TRANSITION_TYPE_SET:function(){return{actionType:"creating-transition"}},UPDATING_TRANSITION_END_POINT_TYPE_SET:function(){return{actionType:"updating-transition-end-point"}},UPDATING_TRANSITION_START_POINT_TYPE_SET:function(){return{actionType:"updating-transition-start-point"}},CREATING_CONNECTION_TYPE_SET:function(){return{actionType:"creating-connection"}},UPDATING_CONNECTION_TYPE_SET:function(){return{actionType:"updating-connection"}},ACTION_TYPE_RESET:function(){return{actionType:null}},CREATING_TRANSITION_BY_SHORTCUTS_TYPE_SET:function(){return{actionType:"updating-transition-by-shortcuts"}}},{actionType:null}),Lt=function(e){return e.transitionActionType.actionType},Rt=Object(k.createSelector)(Lt,(function(e){return"creating-connection"===e||"updating-connection"===e})),Dt=Object(k.createSelector)(Lt,(function(e){return"creating-transition"===e||"updating-transition-start-point"===e||"updating-transition-end-point"===e||"updating-transition-by-shortcuts"===e})),Mt=Object(k.createSelector)(Lt,(function(e){return"creating-transition"===e||"updating-transition-start-point"===e||"updating-transition-end-point"===e})),Gt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Remove transition"))).transitionId=e,n.transition=null,n.transitionsLayout=null,n.deletedtransitionProperties=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyRemoveTransition",value:function(e){var t=this;return this.transition=e[this.transitionId],m.a.omitBy(e,(function(e){return e.id===t.transitionId}))}},{key:"applyRemoveTransitionLayout",value:function(e){var t=this;return this.transitionsLayout=e[this.transitionId],m.a.omitBy(e,(function(e){return e===t.transitionsLayout}))}},{key:"applyRemoveTransitionProperty",value:function(e){var t=this;return this.deletedtransitionProperties=m.a.filter(e,(function(e){return e.transitionId===t.transitionId})),m.a.filter(e,(function(e){return e.transitionId!==t.transitionId}))}},{key:"revertRemoveTransition",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.transitionId,this.transition))}},{key:"revertRemoveTransitionLayout",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.transitionId,this.transitionsLayout))}},{key:"revertRemoveTransitionProperty",value:function(e){return m.a.concat(e,this.deletedtransitionProperties)}}]),t}(qe),zt=24,Vt=function(e,t,n){if(m.a.isNil(e))return null;var o,a=[],i=$(e,n.start.position),s=$(t,n.end.position);switch(a.push(i),n.start.position){case"right":switch(n.end.position){case"top":o=ee(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y-10,position:s.position};break;case"left":o=ne(e,t,i,s),a=m.a.concat(a,o),s={x:s.x-10,y:s.y,position:s.position};break;case"right":o=oe(e,t,i,s),a=m.a.concat(a,o),s={x:s.x+10,y:s.y,position:s.position};break;case"bottom":o=te(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y+10,position:s.position}}break;case"bottom":switch(n.end.position){case"top":o=ae(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y-10,position:s.position};break;case"bottom":o=re(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y+10,position:s.position};break;case"right":o=ie(e,t,i,s),a=m.a.concat(a,o),s={x:s.x+10,y:s.y,position:s.position};break;case"left":o=se(e,t,i,s),a=m.a.concat(a,o),s={x:s.x-10,y:s.y,position:s.position}}break;case"left":switch(n.end.position){case"top":o=ce(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y-10,position:s.position};break;case"bottom":o=le(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y+10,position:s.position};break;case"left":o=pe(e,t,i,s),a=m.a.concat(a,o),s={x:s.x-10,y:s.y,position:s.position};break;case"right":o=ue(e,t,i,s),a=m.a.concat(a,o),s={x:s.x+10,y:s.y,position:s.position}}break;case"top":switch(n.end.position){case"top":o=de(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y-10,position:s.position};break;case"left":o=he(e,t,i,s),a=m.a.concat(a,o),s={x:s.x-10,y:s.y,position:s.position};break;case"bottom":o=fe(e,t,i,s),a=m.a.concat(a,o),s={x:s.x,y:s.y+10,position:s.position};break;case"right":o=ye(e,t,i,s),a=m.a.concat(a,o),s={x:s.x+10,y:s.y,position:s.position}}}return a.push(s),a},Ut=function(e,t,n){var o,a,i=[],s=Math.max.apply(Math,Object(S.a)(m.a.map(t,(function(e){return e.length}))));if("left"===n||"right"===n)if(a="left"===n?-7.5*s:7.5,2===e.length||e[0].y<e[2].y)for(var r=0;r<t.length;r++)i.push({x:e[0].x+a,y:e[0].y-8.5-17*r});else for(var c=0;c<t.length;c++)i.push({x:e[0].x+a,y:e[0].y+17+17*c});else if("top"===n||"bottom"===n)if(o="top"===n?-1:1,2===e.length||e[0].x>e[2].x)for(var l=0;l<t.length;l++)i.push({x:e[0].x+7.5,y:e[0].y+17*o*(l+1)});else for(var p=0;p<t.length;p++)i.push({x:e[0].x-7.5*(s+.5),y:e[0].y+17*o*(p+1)});return i},Ft=function(e,t,n,o){var a,i,s,r,c,l=[],p=zt,u=0!==n.length?Math.max.apply(Math,Object(S.a)(m.a.map(n,(function(e){return e.length})))):0;if("right"===o||"left"===o)if("right"===o?(s=0,r=1,c=0):(s=1,r=-1,c=p),Math.abs(e[0].x-e[1].x)>(p+22)*t.length+5*(t.length+1))if(2===e.length||e.length>2&&e[2].y>e[0].y)for(var d=0;d<t.length;d++)a=t[d].name.startsWith("create_report")&&t[d].caption.length>6?11:0,l.push({x:e[0].x+r*(p+a+5)*(d+s)+5*r,y:e[0].y+5});else for(var h=0;h<t.length;h++)a=t[h].name.startsWith("create_report")&&t[h].caption.length>6?11:0,i=t[h].name.startsWith("create_report")&&t[h].caption.length>0?11:0,l.push({x:e[0].x+r*(p+5)*(h+s)+5+2*r*a,y:e[0].y-p-5-i});else if(2===e.length||e.length>2&&e[2].y>e[0].y)for(var f=0;f<t.length;f++)a=t[f].name.startsWith("create_report")&&t[f].caption.length>6?11:0,i=t[f].name.startsWith("create_report")&&t[f].caption.length>0?11:0,l.push({x:e[0].x+2*r*5+7.5*r*u+r*(c+a),y:e[0].y-(f+1)*(p+5+i)});else for(var y=0;y<t.length;y++)a=t[y].name.startsWith("create_report")&&t[y].caption.length>6?11:0,l.push({x:e[0].x+2*r*5+7.5*r*u+r*(c+a),y:e[0].y+y*(p+5)+5});else if("bottom"===o||"top"===o)if("bottom"===o?(r=1,c=0):(r=-1,c=p),Math.abs(e[0].y-e[1].y)>p+10)if(2===e.length||e.length>2&&e[0].x>e[2].x)for(var v=0;v<t.length;v++)a=t[v].name.startsWith("create_report")&&t[v].caption.length>6?11:0,i=t[v].name.startsWith("create_report")&&0===t[v].innerText.length&&"top"===o?11:0,l.push({x:e[0].x-(v+1)*(p+5)-a-5,y:e[0].y+5*r+r*(c+i)});else for(var b=0;b<t.length;b++)a=t[b].name.startsWith("create_report")&&t[b].caption.length>6?11:0,i=t[b].name.startsWith("create_report")&&0===t[b].innerText.length&&"top"===o?11:0,l.push({x:e[0].x+5+b*(p+5)+2*a,y:e[0].y+5*r+r*(c+i)});else if(2===e.length||e.length>2&&e[0].x>e[2].x)for(var g=0;g<t.length;g++)a=t[g].name.startsWith("create_report")&&t[g].caption.length>6?11:0,i=t[g].name.startsWith("create_report")&&0===t[g].innerText.length&&"top"===o?11:0,l.push({x:e[0].x+g*(p+5)+5+7.5*u+2*a,y:e[0].y+5*r+r*(c+i)});else for(var P=0;P<t.length;P++)a=t[P].name.startsWith("create_report")&&t[P].caption.length>6?11:0,i=t[P].name.startsWith("create_report")&&0===t[P].innerText.length&&"top"===o?11:0,l.push({x:e[0].x-(P+1)*(p+5)-7.5*u-10-a,y:e[0].y+5*r+r*(c+i)});return l},Bt=Object(c.b)((function(e,t){var n,o,a=t.id,i=t.types,s=t.icons,r=e.transitions[a],c=e.transitionsLayout[a],l=m.a.chain(i).filter((function(e){return"out"!==e})).map((function(e){return _e[e]})).value(),p=Vt(e.stepsLayout[r.startStepId],e.stepsLayout[r.endStepId],c),u=[],d=Object(v.c)(e.localize);return l.length&&(u=l.map((function(e){return d(X[e])}))),{points:p,className:(n=r.startStepId,o=r.endStepId,"start"===n||"end"===n||"start"===o||"end"===o?"transition-dotted ":" "),start:$(e.stepsLayout[r.startStepId],c.start.position),end:$(e.stepsLayout[r.endStepId],c.end.position),arrowType:c.end.position,selected:r.selected,intersected:r.intersected,focused:r.selected&&!m.a.isNil(ya(e))&&ya(e)===ia,scale:Un(e),svgPosition:Fn(e),highlighted:r.highlighted||Me(e,a),disabled:Ko(e,a),types:l,typesPoints:Ut(p,u,c.start.position),icons:s,iconsPoints:Ft(p,s,u,c.start.position),showTransitionInfo:Bn(e),translate:d}}),(function(e,t){var n=t.id;return{onTransitionSelect:function(){e(be(n)),e(Ta(null)),e(In(null))},onStartTransitionPointUpdate:function(t,o){e("start"===o?wt():kt()),e(ln(t,n,o))},onTransitionHighlight:function(){e(Pe(n,"transition"))},onTransitionHighlightReset:function(){e(Pe(null))},onRemoveTransition:function(){e(Be(new Gt(n))),e(be(null)),e(In(!0)),e(ca(ia))},onArrowKeyDown:function(t,n){e("right"===t||"left"===t?n?Rn(t):Ln(t):Dn(t))},onInsertStep:function(t,o){var a=G()(),i=G()();e(Ca(a,t,o,n,i)),e(In(!0)),e(Ta(a))}}}))(St),Ht=Object(T.a)("TRANSITION_COPY",(function(e){return e})),Kt=Object(T.b)({TRANSITION_COPY:function(e,t){return Object(E.a)({},t.payload)}},{}),Wt=function(e){return e.transitionCopy},Yt=function(e){function t(e,n,o){var a;return Object(g.a)(this,t),(a=Object(x.a)(this,Object(_.a)(t).call(this,"Change transition position"))).tempTransition=e,a.baseTransition=n,a.transitionLayout=o,a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyTransitionPositionChange",value:function(e){return m.a.isUndefined(this.tempTransition.start)||m.a.isUndefined(this.tempTransition.end)?e:Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,{id:this.tempTransition.id,startStepId:this.tempTransition.start.stepId,endStepId:this.tempTransition.end.stepId,selected:!1,highlighted:!1,intersected:!1}))}},{key:"revertTransitionPositionChange",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,Object(E.a)({},this.baseTransition)))}},{key:"applyTransitionLayoutPositionChange",value:function(e){return m.a.isNil(this.tempTransition)?e:m.a.isUndefined(this.tempTransition.start)||m.a.isUndefined(this.tempTransition.end)?e:Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,{start:{position:this.tempTransition.start.position},end:{position:this.tempTransition.end.position}}))}},{key:"revertTransitionLayoutPositionChange",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,Object(E.a)({},this.transitionLayout)))}}]),t}(qe),qt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Add transition"))).tempTransition=e,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyAddTransition",value:function(e){return this.transitions=e,Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,{id:this.tempTransition.id,startStepId:this.tempTransition.start.stepId,endStepId:this.tempTransition.end.stepId,selected:!1,highlighted:!1,intersected:!1}))}},{key:"revertAddTransition",value:function(e){return this.transitions=m.a.omit(e,[this.tempTransition.id]),this.transitions}},{key:"applyAddTransitionLayout",value:function(e){return m.a.isNil(this.tempTransition)?e:Object(E.a)({},e,Object(z.a)({},this.tempTransition.id,{start:{position:this.tempTransition.start.position},end:{position:this.tempTransition.end.position}}))}},{key:"revertAddTransitionLayout",value:function(e){return m.a.omit(e,[this.tempTransition.id])}},{key:"applyAddTransitionProperties",value:function(e){var t=this;if(m.a.isNil(this.tempTransition))return e;var n=Object(S.a)(e);if("start"===this.tempTransition.start.stepId)n.push({transitionId:this.tempTransition.id,name:"types",value:["out"]});else{var o=qo[this.tempTransition.start.type];m.a.forEach(this.transitions,(function(e){if(e.startStepId===t.tempTransition.start.stepId){var a=m.a.find(n,(function(t){return t.transitionId===e.id})).value;o=m.a.difference(o,a)}})),n.push({transitionId:this.tempTransition.id,name:"types",value:o})}return m.a.forEach(Qo[this.tempTransition.start.type],(function(e){switch(e){case"certify":n.push({transitionId:t.tempTransition.id,name:"certify",value:!1});break;case"create_report":n.push({transitionId:t.tempTransition.id,name:"create_report",value:{checked:!1,values:[]}})}})),n}},{key:"revertAddTransitionProperties",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.transitionId!==t.tempTransition.id}))}}]),t}(qe),Zt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Add connection"))).tempTransition=e,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyAddTransitionConnectionLayout",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.startStepId===t.tempTransition.start.stepId})).length?m.a.map(e,(function(e){return e.startStepId===t.tempTransition.start.stepId?Object(E.a)({},e,{endStepId:t.tempTransition.end.stepId,endPosition:t.tempTransition.end.position}):e})):m.a.concat(e,{startStepId:this.tempTransition.start.stepId,endStepId:this.tempTransition.end.stepId,endPosition:this.tempTransition.end.position})}},{key:"revertAddTransitionConnectionLayout",value:function(e){var t=this;return m.a.omitBy(e,(function(e){return e.startStepId===t.tempTransition.start.stepId}))}},{key:"applyAddConnectedStepProperty",value:function(e){var t=this;return this.properties=e,m.a.map(e,(function(e){return e.stepId===t.tempTransition.start.stepId&&"step_id"===e.name?Object(E.a)({},e,{value:t.tempTransition.end.stepId}):e}))}},{key:"revertAddConnectedStepProperty",value:function(e){return this.properties}}]),t}(qe),Xt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change connection position"))).tempTransition=e,n.connectedLayout=null,n.properties=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyConnectionLayoutPositionChange",value:function(e){var t=this;return this.connectedLayout=e,m.a.map(e,(function(e){return e.startStepId===t.tempTransition.start.stepId?Object(E.a)({},e,{endStepId:t.tempTransition.end.stepId,endPosition:t.tempTransition.end.position}):e}))}},{key:"revertConnectionLayoutPositionChange",value:function(e){return this.connectedLayout}},{key:"applyChangeConnectedStepProperty",value:function(e){var t=this;return this.properties=e,m.a.map(e,(function(e){return e.stepId===t.tempTransition.start.stepId&&"step_id"===e.name?Object(E.a)({},e,{value:t.tempTransition.end.stepId}):e}))}},{key:"revertChangeConnectedStepProperty",value:function(e){return this.properties}}]),t}(qe),Jt=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return m.a.chain(t.payload.stepProperties).filter((function(e){return"step_id"===e.name})).map((function(e){return{startStepId:e.stepId,endStepId:e.value}})).map((function(e){return Object(E.a)({},e,{endPosition:null})})).value()},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Remove step":return n.applyRemoveStepConnectionLayout(e);case"Add step":return n.applyAddStepConnectionLayout(e);case"Add connection":return n.applyAddTransitionConnectionLayout(e);case"Change connection position":return n.applyConnectionLayoutPositionChange(e);case"Remove connection":return n.applyRemoveConnection(e);case"Insert new step into transition":return n.applyInsertStepConnectionLayout(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForConnections(e);case"Change step property":return n.applyUpdateConnection(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Remove step":return n.revertRemoveStepConnectionLayout(e);case"Add step":return n.revertAddStepConnectionLayout(e);case"Add connection":return n.revertAddTransitionConnectionLayout(e);case"Change connection position":return n.revertConnectionLayoutPositionChange(e);case"Remove connection":return n.revertRemoveConnection(e);case"Insert new step into transition":return n.revertInsertStepConnectionLayout(e);case"Generate auto layout":return n.revertLayoutAutoGenerationForConnections(e);case"Change step property":return n.revertUpdateConnection(e);default:return e}}},{}),Qt=function(e){return e.connectionsLayout},$t=function(e,t){var n=function(e,t){return m.a.find(Qt(e),(function(e){return t.startStepId===e.startStepId&&t.endStepId===e.endStepId}))}(e,t);return m.a.isNil(n)?null:n.endPosition},en=function(e,t){return!m.a.isUndefined(m.a.find(Qt(e),(function(e){return e.endStepId===t})))},tn=Object(T.a)("TRANSITION_CREATION_START",(function(e,t,n,o,a){return{type:e,stepId:t,position:n,x:o,y:a}})),nn=Object(T.a)("TEMP_TRANSITION_END_POINT_UPDATE",(function(e,t,n){return{coordinates:e,scale:t,translate:n}})),on=Object(T.a)("TEMP_TRANSITION_START_POINT_UPDATE",(function(e,t,n){return{coordinates:e,scale:t,translate:n}})),an=Object(T.a)("TEMP_TRANSITION_END_POINT_POSITION_CHANGE",(function(e){return e})),sn=Object(T.a)("TEMP_TRANSITION_START_POINT_POSITION_CHANGE",(function(e){return e})),rn=Object(T.a)("TEMP_TRANSITION_REMOVE"),cn=Object(T.a)("TRANSITION_UPDATE_START",(function(e){return e})),ln=function(e,t,n){return function(o,a){var i=ke(a(),t),s=ve(a(),t),r={id:t,start:{x:e.start.x,y:e.start.y,position:"start"===n?null:s.start.position,stepId:i.startStepId},end:{x:e.end.x,y:e.end.y,position:"end"===n?null:s.end.position,stepId:i.endStepId}},c={start:{position:s.start.position,stepId:i.startStepId},end:{position:s.end.position,stepId:i.endStepId}};o(Ht(c)),o(cn(r))}},pn=function(e){return function(t,n){t(nn(e,n().drawingArea.scale,n().drawingArea.viewportPosition))}},un=function(e,t){return function(n,o){if(!bn(o()))return n(In(!0)),n(rn()),void n(Nt());var a=!1,i=!1,s=Lt(o()),r=Object(E.a)({},vn(o())),c=Object(E.a)({},Wt(o())),l=ke(o(),r.id),p=ve(o(),r.id);m.a.isUndefined(r.start)||(t?("updating-transition-start-point"===s?r.start=Object(E.a)({},r.start,{stepId:e}):r.end=Object(E.a)({},r.end,{stepId:e}),"updating-transition-start-point"===s?r.start=Object(E.a)({},r.start,{position:t}):r.end=Object(E.a)({},r.end,{position:t}),r.id=r.id||("start"===r.start.stepId?"out":G()()),"updating-transition-end-point"===s?(r.start.stepId!==e&&"start"!==e?n(Be(new Yt(r,l,p))):a=!0,"updating-connection"!==s&&n(be(r.id))):"updating-transition-start-point"===s?r.start.stepId===c.start.stepId?(n(Be(new Yt(r,l,p))),n(be(r.id))):a=!0:r.start.stepId!==e&&"start"!==e&&("creating-connection"===s&&n(Be(new Zt(r))),"creating-connection"!==s&&"updating-connection"!==s&&(n(Be(new qt(r))),n(be(r.id)))),"updating-connection"===s&&n(Be(new Xt(r)))):m.a.isNil(r)||(a="updating-transition-start-point"===s||"updating-transition-end-point"===s,i="updating-connection"===s),i&&(m.a.isNull(r.end.position)||(a=i)),a&&(r.end=Object(E.a)({},r.end,{},c.end),r.start=Object(E.a)({},r.start,{},c.start),n(Be(new Yt(r,l,p))),"creating-connection"!==s&&"updating-connection"!==s&&n(be(r.id)))),n(In(null)),n(Ta(null)),n(rn()),n(Nt())}},dn=function(e,t){return function(n,o){var a,i,s=(a=o(),i=e,m.a.find(tt(a),(function(e,t){return t===i})).position);("start"!==e||"start"===e&&m.a.isUndefined(m.a.find(Te(o()),(function(e){return"start"===e.startStepId}))))&&n(tn(za(o(),e),e,t,s.x,s.y))}},hn=function(e){return function(t,n){t("updating-transition-start-point"===Lt(n())?function(e){return function(t,n){return t(on(e,n().drawingArea.scale,n().drawingArea.viewportPosition))}}(e):pn(e))}},fn=function(e){return function(t,n){var o=Lt(n());"updating-transition-by-shortcuts"!==o&&t("updating-transition-start-point"===o?sn(e):an(e))}},yn=Object(T.b)({TRANSITION_CREATION_START:function(e,t){return{start:Object(E.a)({},t.payload)}},TEMP_TRANSITION_END_POINT_UPDATE:function(e,t){var n=t.payload,o=n.coordinates,a=n.scale,i=n.translate,s={x:o.x*a+i.x,y:o.y*a+i.y};return Object(E.a)({},e,{end:Object(E.a)({},e.end,{},s)})},TEMP_TRANSITION_START_POINT_UPDATE:function(e,t){var n=t.payload,o=n.coordinates,a=n.scale,i=n.translate,s={x:o.x*a+i.x,y:o.y*a+i.y};return Object(E.a)({},e,{start:Object(E.a)({},e.start,{},s)})},TEMP_TRANSITION_END_POINT_POSITION_CHANGE:function(e,t){return m.a.isNil(e.end)?e:Object(E.a)({},e,{end:Object(E.a)({},e.end,{position:t.payload})})},TEMP_TRANSITION_START_POINT_POSITION_CHANGE:function(e,t){return m.a.isNil(e.start)?e:Object(E.a)({},e,{start:Object(E.a)({},e.start,{position:t.payload})})},TEMP_TRANSITION_REMOVE:function(){return{}},TRANSITION_UPDATE_START:function(e,t){return t.payload}},{}),vn=function(e){return e.tempTransition},bn=Object(k.createSelector)(vn,(function(e){return!m.a.isNil(e.start)})),mn=Object(k.createSelector)(vn,(function(e){return!m.a.isNil(e.end)})),gn=Object(k.createSelector)(vn,(function(e){return e&&e.end&&e.end.position})),Pn=function(e,t,n,o){return o<=t+5&&o>=t-5?e>n?"right":"left":o<t-5?"bottom":o>t+5?"top":void 0},xn={left:"top",top:"right",right:"bottom",bottom:"left"},_n={left:"bottom",bottom:"right",right:"top",top:"left"},In=Object(T.a)("DRAWING_AREA_UPDATE_VISUALIZATION"),On=Object(T.a)("TRANSITION_INFO_TOGGLE"),Sn=Object(T.a)("DRAWING_AREA_VIEWPORT_SIZE_UPDATE",(function(e){return e})),En=Object(T.a)("DRAWING_AREA_VIEWPORT_POSITION_UPDATE",(function(e){return e})),Tn=Object(T.a)("DRAWING_AREA_ORIGINAL_VIEWPORT_SIZE_UPDATE",(function(e){return e})),kn=(Object(T.a)("DRAWING_AREA_ORIGINAL_VIEWPORT_POSITION_UPDATE",(function(e){return e})),Object(T.a)("DRAWING_AREA_ZOOM_SCALE_INCREMENT",(function(e){return e}))),wn=Object(T.a)("DRAWING_AREA_ORIGINAL_VIEWPORT_SIZE_RESET"),Cn=Object(T.a)("FIT_THE_VIEW",(function(e){return e})),jn=Object(T.a)("SNAP_TO_GRID_TOGGLE"),Nn=Object(T.a)("DRAWING_AREA_RESIZE_VIEWPORT_SIZE"),An=Object(T.a)("PROCESS_PLAN_VIEW_SETTINGS_LOAD",(function(){return D.loadSettings()})),Ln=(Object(T.a)("PROCESS_PLAN_VIEW_SETTINGS_SAVE",(function(e){return D.updateSettings(e)})),function(e){return function(t,n){var o=Ce(n());if(o){var a=m.a.map(Re(n(),o.startStepId),(function(e){return e.id})),i=m.a.findIndex(a,(function(e){return e===o.id}));t(be(a[(i+("left"===e?1:-1)+a.length)%a.length]))}}}),Rn=function(e){return function(t,n){var o=Ce(n());if(o){var a=m.a.map(De(n(),o.endStepId),(function(e){return e.id})),i=m.a.findIndex(a,(function(e){return e===o.id}));t(be(a[(i+("left"===e?1:-1)+a.length)%a.length]))}}},Dn=function(e){return function(t,n){var o=Ce(n()),a=Hn(n());if(m.a.isNil(o))if(m.a.isNil(a)){var i=m.a.filter(Da(n()),(function(e){return"end"!==e})),s=we(n());0!==i.length?(t(Ta(i[0])),t(In(null)),t(be(null))):0!==s.length&&(t(be(s[0])),t(In(null)),t(Ta(null)))}else{var r="bottom"===e?Re(n(),a):De(n(),a);0!==m.a.keys(r).length?t(be(r[m.a.keys(r)[0]].id)):t(ca(ia)),t(Ta(null))}else{var c="bottom"===e?o.endStepId:o.startStepId;t("end"!==c?Ta(c):ca(ia)),t(be(null))}}},Mn=function(){return function(e,t){var n=Hn(t()),o=Te(t()),a=m.a.filter(Da(t()),(function(e){return"end"!==e})),i=m.a.chain(a).map((function(e){return[e,[]]})).fromPairs().value();if(m.a.isNil(n))0!==a.length&&(e(Ta(a[0])),e(be(null)),e(In(null)));else{m.a.isNil(m.a.find(o,(function(e){return"start"===e.startStepId})))&&(i.start=[]);var s=m.a.chain(i).map((function(e,t){return[t,0]})).fromPairs().value();m.a.map(o,(function(e){"end"!==e.endStepId&&(i[e.startStepId].push(e.endStepId),i[e.endStepId].push(e.startStepId))}));var r=0;m.a.mapValues(i,(function(e,t){0===s[t]&&(r++,s=function e(t,n,o,a){return n[a]=o,m.a.map(t[a],(function(a){0===n[a]&&(n=e(t,n,o,a))})),n}(i,s,r,t))}));var c=s[n];if(1!==r){var l=c+1;l>r&&(l=1);var p=m.a.findKey(s,(function(e){return e===l}));e(Ta(p))}}}},Gn=Object(T.b)({DRAWING_AREA_VIEWPORT_SIZE_UPDATE:function(e,t){return Object(E.a)({},e,{viewportSize:t.payload,zoomToFit:!1})},DRAWING_AREA_VIEWPORT_POSITION_UPDATE:function(e,t){return Object(E.a)({},e,{viewportPosition:t.payload,zoomToFit:!1})},DRAWING_AREA_ORIGINAL_VIEWPORT_SIZE_UPDATE:function(e,t){return Object(E.a)({},e,{originalViewportSize:t.payload,zoomToFit:!1})},DRAWING_AREA_ORIGINAL_VIEWPORT_POSITION_UPDATE:function(e,t){return Object(E.a)({},e,{originalViewportPosition:t.payload,zoomToFit:!1})},DRAWING_AREA_ZOOM_SCALE_INCREMENT:function(e,t){var n=+(e.scale+.05*t.payload).toFixed(2),o=Math.round(e.originalViewportSize.width*n),a=Math.round(e.originalViewportSize.height*n);return 0!==o&&0!==a?Object(E.a)({},e,{scale:n,viewportSize:{width:o,height:a},zoomToFit:!1}):Object(E.a)({},e)},DRAWING_AREA_ORIGINAL_VIEWPORT_SIZE_RESET:function(e){return Object(E.a)({},e,{viewportSize:e.originalViewportSize,viewportPosition:{x:0,y:0},scale:1,zoomToFit:!1})},DRAWING_AREA_RESIZE_VIEWPORT_SIZE:function(e){return Object(E.a)({},e,{viewportSize:e.originalViewportSize,viewportPosition:e.viewportPosition,scale:1,zoomToFit:!1})},FIT_THE_VIEW:function(e,t){var n,o={x:it(t.payload),y:st(t.payload)},a={width:Math.round(ot(t.payload)-o.x),height:Math.round(at(t.payload)-o.y)},i=+(a.width/e.originalViewportSize.width).toFixed(2),s=+(a.height/e.originalViewportSize.height).toFixed(2);return i>s?(a.height=Math.round(e.originalViewportSize.height*i),n=i):(a.width=Math.round(e.originalViewportSize.width*s),n=s),Object(E.a)({},e,{viewportSize:a,viewportPosition:o,svgPosition:o,scale:n,zoomToFit:!0})},DRAWING_AREA_UPDATE_VISUALIZATION:function(e,t){return Object(E.a)({},e,{selected:!m.a.isNil(t.payload)})},TRANSITION_INFO_TOGGLE:function(e){return Object(E.a)({},e,{showTransitionInfo:!e.showTransitionInfo})},STEP_SELECT:function(e,t){return Object(E.a)({},e,{selectedStepId:t.payload})},SNAP_TO_GRID_TOGGLE:function(e){return Object(E.a)({},e,{snapToGrid:!e.snapToGrid})},PROCESS_PLAN_VIEW_SETTINGS_LOAD:function(e,t){var n=t.payload,o=n.fontSize,a=n.showTransitionInfo,i=n.snapToGrid,s=n.zoomFactor,r=n.zoomToFit,c=n.translations,l=Math.round(e.originalViewportSize.width*s),p=Math.round(e.originalViewportSize.height*s);return Object(E.a)({},e,{fontSize:o,showTransitionInfo:a,snapToGrid:i,scale:s,zoomToFit:r,viewportSize:{width:l,height:p},translations:c})}},{selected:!1,scale:1,viewportSize:{width:600,height:500},originalViewportSize:{width:600,height:500},originalViewportPosition:{x:0,y:0},viewportPosition:{x:0,y:0},showTransitionInfo:!1,selectedStepId:null,snapToGrid:!1,zoomToFit:!1,fontSize:14,settingsLoaded:!1,translations:{}}),zn=function(e){return e.drawingArea},Vn=Object(k.createSelector)(zn,(function(e){return{showTransitionInfo:e.showTransitionInfo,snapToGrid:e.snapToGrid,zoomToFit:e.zoomToFit,zoomFactor:e.scale,fontSize:e.fontSize,translations:e.translations}})),Un=Object(k.createSelector)(zn,(function(e){return e.scale})),Fn=Object(k.createSelector)(zn,(function(e){return e.viewportPosition})),Bn=Object(k.createSelector)(zn,(function(e){return e.showTransitionInfo})),Hn=Object(k.createSelector)(zn,(function(e){return e.selectedStepId})),Kn=Object(k.createSelector)(zn,(function(e){return e.snapToGrid})),Wn=Object(k.createSelector)(zn,(function(e){return e.zoomToFit})),Yn=Object(k.createSelector)(zn,(function(e){return e.settingsLoaded})),qn=Object(k.createSelector)(zn,(function(e){return e.translations})),Zn="variable",Xn="script",Jn="qcscript",Qn={processplan:"processplans",profile:"profiles",action:"actions",variable:"variables",fixup:"fixups",check:"checks",quickcheck:"variables",addfiles:"variables"},$n=Object(T.a)("AVAILABLE_OBJECTS_LOAD",(function(){return D.loadObjects()})),eo=Object(T.a)("AVAILABLE_OBJECTS_LOAD",(function(e){return e})),to=Object(T.a)("AVAILABLE_OBJECTS_CREATE",(function(e){return D.createExternalObject(e)}),(function(e,t){return{onSuccess:t}})),no=Object(T.a)("AVAILABLE_OBJECTS_DUPLICATE",(function(e,t){return D.duplicateExternalObject(e,t)}),(function(e,t,n){return{onSuccess:n}})),oo=Object(T.a)("AVAILABLE_OBJECTS_EDIT",(function(e,t){return D.updateExternalObject(e,t)}),(function(e,t,n){return{id:t,onSuccess:n}})),ao=Object(T.b)({AVAILABLE_OBJECTS_LOAD:function(e,t){return Object(E.a)({},t.payload,{loaded:!0})}},{processplans:[],profiles:[],actions:[],variables:[],fixups:[],checks:[],quickchecks:[],groups:[],reportTemplates:[],loaded:!1}),io=function(e){return e.availableObjects},so=function(e){return io(e).loaded},ro=function(e,t){var n=io(e)[Qn[t]];switch(t){case"variable":case"addfiles":return m.a.filter(n,(function(e){return e.type!==Jn}));case"quickcheck":return m.a.filter(n,(function(e){return e.type===Jn}));default:return n}},co=function(e,t){var n=m.a.find(e.stepProperties,(function(e){return"id"===e.name&&e.stepId===t})),o=za(e,t);return m.a.find(ro(e,o),(function(e){return e.id===n.value}))},lo=function(e,t){var n=Object(v.c)(e.localize),o=za(e,t),a=co(e,t);return m.a.isNil(a)?n(V[o]):go(o,a)},po=function(e,t){return m.a.map(ro(e,t),(function(e){return{value:e.id,label:go(t,e)}}))},uo=function(e,t){return m.a.chain(Ra(e)).omit(t).map((function(t,n){return{label:lo(e,n),value:n}})).value()},ho=function(e,t){var n=Object(v.c)(e.localize),o=za(e,t);return!m.a.isNil(o)&&m.a.includes(Zo[o],"id")&&m.a.isNil(co(e,t))?[n("NG_PPE_Broken_reference_to_available_object_long")]:[]},fo=Object(k.createSelector)(io,(function(e){return m.a.map(e.groups,(function(e){return{label:e.name,value:e.id}}))})),yo=Object(k.createSelector)(io,(function(e){return m.a.map(e.dialogs,(function(e){return{label:e.name,value:e.id}}))})),vo=Object(k.createSelector)(io,(function(e){return m.a.filter(e.variables,(function(e){return e.type!==Jn}))})),bo=function(e,t){return m.a.find(io(e).variables,["id",t])},mo=function(e){switch(e.type){case Zn:return"<".concat(e.key,":").concat(e.value,">");case Xn:return"{".concat(e.key,"}");case Jn:return"[".concat(e.key,"]");default:return console.warn("Unknown variable type ".concat(e.type)),e.key}},go=function(e,t){return m.a.includes(["variable","addfiles","quickcheck"],e)?mo(t):t.name},Po=Object(k.createSelector)(io,(function(e){return m.a.map(e.reportTemplates,(function(e){return{label:e.name,value:e.id}}))})),xo=Object(k.createSelector)(io,(function(e){return e.processplans})),_o=function(e){function t(e,n,o){var a;return Object(g.a)(this,t),(a=Object(x.a)(this,Object(_.a)(t).call(this,"Change transition property"))).transitionId=e,a.name=n,a.value=o,a.currentValue=null,a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyTransitionPropertyChange",value:function(e){var t=this;return m.a.map(e,(function(e){if(e.name===t.name&&e.transitionId===t.transitionId)return t.currentValue=e.value,Object(E.a)({},e,{value:t.value});if("pdf_overview_details"===t.name&&"create_report"===e.name&&e.transitionId===t.transitionId){t.currentValue=e.value;var n=m.a.map(Object(E.a)({},e.value.values),(function(e){return"overview_report"===e.type?Object(E.a)({},t.value):e}));return Object(E.a)({},e,{value:{values:n,checked:e.value.checked}})}return Object(E.a)({},e)}))}},{key:"revertTransitionPropertyChange",value:function(e){var t=this;return m.a.map(e,(function(e){return e.name===t.name&&e.transitionId===t.transitionId?Object(E.a)({},e,{value:t.currentValue}):"pdf_overview_details"===t.name&&"create_report"===e.name&&e.transitionId===t.transitionId?Object(E.a)({},e,{value:t.currentValue}):Object(E.a)({},e)}))}}]),t}(qe),Io={checkbox:1,input:1,select:1,"variable-input":1},Oo={omit_fixups:function(){return{type:"variable-checkbox",label:"Do not apply Fixups"}},id:function(e,t){return{type:"external-object-select",label:"Name",options:po(e,t.type)}},step_id:function(e,t){return{type:"select",label:"Pick up PDF from",options:uo(e,t.id)}},suffix:function(){return{type:"variable-input",label:"Suffix"}},prefix:function(){return{type:"variable-input",label:"Prefix"}},folder:function(){return{type:"variable-input",label:"Folder"}},overwrite_existing_file:function(){return{type:"variable-checkbox",label:"Overwrite existing file"}},replace_file_name:function(){return{type:"variable-checkbox",label:"Replace file name with prefix and suffix"}},enable_step:function(){return{type:"variable-checkbox",label:"Enable step"}}},So=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.stepProperties},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Add step":return n.applyAddStepProperty(e);case"Change step property":return n.applyStepPropertyChange(e);case"Change transition position":return e;case"Remove step":return n.applyRemoveStepProperty(e);case"Add connection":return n.applyAddConnectedStepProperty(e);case"Change connection position":return n.applyChangeConnectedStepProperty(e);case"Remove connection":return n.applyRemoveConnectionProperty(e);case"Insert new step into transition":return n.applyInsertStepProperty(e);case"Generate auto layout":return n.applyProcessPlanLayoutAutoGenerationStepProperties(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Add step":return n.revertAddStepProperty(e);case"Change step property":return n.revertStepPropertyChange(e);case"Change transition position":return e;case"Remove step":return n.revertRemoveStepProperty(e);case"Add connection":return n.revertAddConnectedStepProperty(e);case"Change connection position":return n.revertChangeConnectedStepProperty(e);case"Remove connection":return n.revertRemoveConnectionProperty(e);case"Insert new step into transition":return n.revertInsertStepProperty(e);case"Generate auto layout":return n.revertProcessPlanLayoutAutoGenerationStepProperties(e);default:return e}}},[]),Eo=function(e,t){return m.a.chain(function(e){return e.stepProperties}(e)).filter((function(e){return e.stepId===t})).map((function(e){return{stepId:t,name:e.name,value:e.value}})).value()},To=function(e,t,n){return m.a.find(Eo(e,t),(function(e){return e.name===n}))},ko=function(e,t){var n=To(e,t,"enable_step");return!!m.a.isNil(n)||n.value},wo={checkbox:1,"checkable-multiselect":2},Co={types:function(e,t){return{type:"checkbox-group",label:"Transition types",options:Le(e,t.id),selectedOptions:Ho(e,t)}},certify:function(){return{group:"Post processing",type:"checkbox",label:"Certify PDF"}},create_report:function(e,t){return{group:"Post processing",type:"checkable-multiselect",label:"Create report",options:[{label:"Base Types",options:Ae(e,t.id)}]}}},jo=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.transitionProperties},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Remove transition":return n.applyRemoveTransitionProperty(e);case"Add transition":return n.applyAddTransitionProperties(e);case"Change transition property":return n.applyTransitionPropertyChange(e);case"Remove step":return n.applyRemoveTransitionConnectedProperties(e);case"Insert new step into transition":case"Create transitions for insert step":return n.applyAddTransitionPropertiesForInsertStep(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForTransitionProperties(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Remove transition":return n.revertRemoveTransitionProperty(e);case"Add transition":return n.revertAddTransitionProperties(e);case"Change transition property":return n.revertTransitionPropertyChange(e);case"Remove step":return n.revertRemoveTransitionConnectedProperties(e);case"Generate auto layout":return n.revertLayoutAutoGenerationForTransitionProperties(e);case"Insert new step into transition":case"Create transitions for insert step":return n.revertAddTransitionPropertiesForInsertStep(e);default:return e}}},[]),No=function(e){return e.transitionProperties},Ao=function(e,t){return"out"===t?"":m.a.chain(No(e)).filter((function(e){return e.transitionId===t})).map((function(e){return{transitionId:t,name:e.name,value:e.value}})).value()},Lo=Object(k.createSelector)((function(e){return e}),Ce,(function(e,t){return m.a.isNil(t)?[]:Ao(e,t.id)})),Ro=Object(k.createSelector)((function(e){return e}),Ce,Lo,(function(e,t,n){return m.a.chain(n).map((function(n){return{objectId:n.transitionId,name:n.name,value:n.value,disabled:"Post processing"===Co[n.name](e,t).group&&Wo(e,t.id),controlDescriptor:Co[n.name](e,t)}})).groupBy((function(e){return e.controlDescriptor.group})).map((function(e,t){return{name:"undefined"===t?void 0:t,properties:e}})).value()})),Do=function(e,t,n){return m.a.find(Ao(e,n),(function(e){return e.name===t}))},Mo=function(e,t,n){var o=m.a.map(Re(e,n),(function(e){return e.id}));return m.a.filter(No(e),(function(e){return m.a.includes(o,e.transitionId)&&e.name===t}))},Go=function(e,t){var n=Object.keys(Re(e,t));return m.a.chain(e.transitionProperties).filter((function(e){return m.a.includes(n,e.transitionId)&&"types"===e.name})).map((function(e){return e.value})).flatten().value()},zo=Object(k.createSelector)(No,(function(e){return m.a.chain(e).filter((function(e){return"types"===e.name})).map((function(e){return[e.transitionId,e.value]})).fromPairs().value()})),Vo=function(e,t){return m.a.chain(Ao(e,t)).filter((function(e){return"create_report"===e.name&&e.value.checked&&0!==e.value.values.length||"certify"===e.name&&e.value})).map((function(e){var t={};if("create_report"===e.name){if(t.name="create_report".concat(1!==e.value.values.length?"s":""),t.innerText=""+(1!==e.value.values.length?e.value.values.length:""),t.caption="",1===e.value.values.length){var n=e.value.values[0].type;t.caption=m.a.isString(n)?xe[n]:mo(n)}}else t.name=e.name,t.innerText="",t.caption="";return t})).value()},Uo=Object(k.createSelector)((function(e){return e}),we,(function(e,t){return m.a.chain(t).map((function(t){return[t,Vo(e,t)]})).fromPairs().value()})),Fo=function(e,t){var n=Object(v.c)(e.localize),o=[],a=Ao(e,t),i=m.a.find(a,(function(e){return"create_report"===e.name}));!m.a.isNil(i)&&i.value.checked&&0===i.value.values.length&&o.push(n("NG_PPE_No_reports_chosen_for_checked_reports_option_long"));var s=m.a.find(a,(function(e){return"types"===e.name}));return m.a.isNil(s)||0!==s.value.length||o.push(n("NG_PPE_No_type_chosen_long")),o},Bo=Object(k.createSelector)((function(e){return e}),we,(function(e,t){return m.a.chain(t).map((function(t){return[t,Fo(e,t)]})).fromPairs().value()})),Ho=function(e,t){return m.a.chain(Re(e,t.startStepId)).filter((function(e){return e.id!==t.id})).map((function(e){return e.id})).map((function(t){return Do(e,"types",t).value})).flatten().value()},Ko=function(e,t){var n=ke(e,t),o=ko(e,n.startStepId),a=Do(e,"types",t);return!m.a.isNil(a)&&(!0===o?0===m.a.without(a.value,"if_disabled").length:!1===o&&!m.a.includes(a.value,"if_disabled"))},Wo=function(e,t){var n=Do(e,"types",t);return!m.a.isNil(n)&&0===m.a.without(n.value,"if_disabled").length},Yo={PROCESS_PLAN:"processplan",PROFILE:"profile",VARIABLE:"variable",CHECK:"check",ACTION:"action",FIXUP:"fixup",PDF_COPY:"pdfcopy",QUICKCHECK:"quickcheck",ADDFILES:"addfiles",FILE_PICK_UP:"filepickup",RENAME:"rename"},qo={processplan:["on_error","else","if_disabled"],profile:["on_error","on_warning","on_info","on_success","if_disabled"],check:["on_hit","on_success","if_disabled"],fixup:["on_success","on_failure","if_disabled"],action:["on_success","on_failure","if_disabled"],variable:["on_success","on_failure","if_disabled"],filepickup:["on_success","on_failure","if_disabled"],pdfcopy:["on_success","on_failure","if_disabled"],start:["out"],quickcheck:["on_success","on_failure","if_disabled"],addfiles:["on_success","on_failure","if_disabled"],rename:["on_success","on_failure","if_disabled"]},Zo={processplan:["id","enable_step"],profile:["id","omit_fixups","enable_step"],action:["id","enable_step"],variable:["id","enable_step"],fixup:["id","enable_step"],check:["id","enable_step"],filepickup:["index","enable_step"],pdfcopy:["prefix","suffix","folder","overwrite_existing_file","replace_file_name","enable_step"],quickcheck:["id","enable_step"],addfiles:["id","enable_step"],rename:["prefix","suffix","overwrite_existing_file","replace_file_name","enable_step"]},Xo={enable_step:!0},Jo=["omit_fixups","overwrite_existing_file","replace_file_name","enable_step"],Qo={processplan:[],profile:["certify","create_report"],action:["create_report"],variable:["create_report"],fixup:["create_report"],check:["create_report"],filepickup:[],pdfcopy:[],quickcheck:[],addfiles:[],rename:[]},$o={processplan:[],profile:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],check:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],fixup:["txt_report","xml_report","overview_report","mask_report","comment_report","layer_report","compare_report","inventory_report"],action:["compare_report","inventory_report"],variable:["compare_report","inventory_report"],filepickup:[],pdfcopy:[],quickcheck:[],addfiles:[],rename:[]},ea={startPosition:{x:10,y:10},startSize:{width:120,height:40},offsets:{x:250,y:100},size:{width:200,height:40},columns:4};function ta(e,t){var n={},o=t.startPosition,a=t.startSize;n.start={position:o,size:a};for(var i=t.offsets,s=t.size,r=t.columns,c=n.start.position,l=e.sequence.length,p=1,u=0;u<=l-1;u++){var d={x:c.x+p*i.x,y:c.y+i.y};(u+1)%(r-1)===0&&(p=-p),n[u]={position:d,size:s},c=n[u].position}var h={x:c.x+p*i.x,y:c.y+i.y};return n.end={position:h,size:a},n}var na=function(e){e.layout||(e.layout={stepsLayout:ta(e,ea)});var t={},n={},o={},a={},i=[],s=[],r=[],c={id:e.id,name:e.name,author:e.author,comment:e.comment,email:e.email,locked:e.locked,hasPassword:e.hasPassword,group:e.group,dialog:e.dialog,addFilesStep:e.addFilesStep};return e.sequence.forEach((function(e){var n=G()();t[n]={id:n,type:e.type,selected:!1,highlighted:!1,intersectedAnchors:[]},r.push(n),Zo[e.type].forEach((function(t){switch(t){case"index":i.push({stepId:n,name:"step_id",value:r[e[t]]});break;default:i.push({stepId:n,name:t,value:e[t]})}}))})),m.a.forOwn(e.layout.stepsLayout,(function(e,t){var n="end"===t||"start"===t?t:r[t];o[n]=e})),n.out={id:"out",startStepId:"start",endStepId:r.length>0?r[0]:"end",selected:!1,highlighted:!1,intersected:!1},s.push({transitionId:"out",name:"types",value:["out"]}),e.sequence.forEach((function(t,o){if(m.a.isUndefined(e.layout.transitionsLayout)){var a=[];qo[t.type].forEach((function(e){var i=t[e];if(i){"if_disabled"===e&&(i=m.a.pick(i,"next_step"));var c=i.next_step,l=m.a.chain(a).find((function(t){return"if_disabled"===e?t.sourceTransition.next_step===c:m.a.isEqual(t.sourceTransition,i)})).get("transitionId").value();if(m.a.isNil(l)){var p;switch(c){case-1:p=r[o+1]||"end";break;case-2:p="end";break;default:p=r[c]}if(l=G()(),n[l]={id:l,startStepId:r[o],endStepId:p,selected:!1,highlighted:!1,intersected:!1},a.push({transitionId:l,sourceTransition:i}),s.push({transitionId:l,name:"types",value:[e]}),"if_disabled"!==e){var u=m.a.map(i.post_process,(function(e){return e.type}));m.a.forEach(Qo[t.type],(function(e){var n;switch(e){case"create_report":(n={values:m.a.filter(i.post_process,(function(e){return!m.a.isString(e.type)||m.a.includes($o[t.type],e.type)}))}).checked=!m.a.isEmpty(n.values);break;case"certify":n=m.a.includes(u,e);break;default:n=null}s.push({transitionId:l,name:e,value:n})}))}}else{m.a.find(s,(function(e){return"types"===e.name&&e.transitionId===l})).value.push(e)}}}))}else{var i=[];qo[t.type].forEach((function(a){var c=m.a.find(e.layout.transitionsLayout[o],(function(e){return m.a.includes(e.types,a)}));if(c){var l=null,p=c.types;i.forEach((function(e){m.a.includes(p,e.transitionType)&&(l=e.transitionId)}));var u=t[a];if(u){"if_disabled"===a&&(u=m.a.pick(u,"next_step"));var d=u.next_step;if(m.a.isNil(l)){var h;switch(d){case-1:h=r[o+1]||"end";break;case-2:h="end";break;default:h=r[d]}if(l=G()(),n[l]={id:l,startStepId:r[o],endStepId:h,selected:!1,highlighted:!1,intersected:!1},i.push({transitionId:l,sourceTransition:u,transitionType:a}),s.push({transitionId:l,name:"types",value:[a]}),"if_disabled"!==a){var f=m.a.map(u.post_process,(function(e){return e.type}));m.a.forEach(Qo[t.type],(function(e){var n;switch(e){case"create_report":(n={values:m.a.filter(u.post_process,(function(e){return!m.a.isString(e.type)||m.a.includes($o[t.type],e.type)}))}).checked=!m.a.isEmpty(n.values);break;case"certify":n=m.a.includes(f,e);break;default:n=null}s.push({transitionId:l,name:e,value:n})}))}}else{m.a.find(s,(function(e){return"types"===e.name&&e.transitionId===l})).value.push(a)}}}}))}})),m.a.isNil(e.layout.transitionsLayout)?a=function(e){return m.a.chain(e).groupBy("startStepId").map((function(e){return m.a.map(e,(function(e,t){var n={start:{},end:{}};switch(t%3){case 0:n.start.position="bottom",n.end.position="top";break;case 1:n.start.position="right",n.end.position="right";break;case 2:n.start.position="left",n.end.position="left"}return{transitionId:e.id,transitionLayout:n}}))})).flatten().keyBy((function(e){return e.transitionId})).mapValues((function(e){return e.transitionLayout})).value()}(n):m.a.forOwn(e.layout.transitionsLayout,(function(e,t){e.forEach((function(e){var o,i="end"===t||"start"===t?t:r[t];if("start"===t)o="out";else{var c=m.a.chain(n).filter((function(e){return e.startStepId===i})).map((function(e){return e.id})).value();o=m.a.chain(s).filter((function(e){return m.a.includes(c,e.transitionId)})).filter((function(e){return"types"===e.name})).filter((function(t){return 0===m.a.xor(t.value,e.types).length})).first().get("transitionId").value()}a[o]={start:e.start,end:e.end}}))})),{baseInfo:c,steps:t,transitions:n,stepsLayout:o,transitionsLayout:a,stepProperties:i,transitionProperties:s}},oa=function(e){var t=m.a.map(Fa(e),(function(e){return e})),n=m.a.map(Bo(e),(function(e){return e})),o=Pa(e)?""===e.processPlan.name.value?e.localize.translations.NG_PPE_NameEmptyWarning_long:e.localize.translations.NG_PPE_NameExistWarning_long:[];return m.a.chain(m.a.concat(t,n,o)).flatten().uniq().value()},aa=function(e){if(function(e){var t=!0,n=m.a.map(e.steps,(function(e){return e.id})),o=[].concat(Object(S.a)(n),["start"]),a=[].concat(Object(S.a)(n),["end"]);m.a.map(e.transitions,(function(e){m.a.remove(o,(function(t){return t===e.startStepId})),m.a.remove(a,(function(t){return t===e.endStepId}))})),0===a.length&&0===o.length||(t=!1),m.a.includes(m.a.map(Fa(e),(function(e){return m.a.isEmpty(e)})),!1)&&(t=!1);var i=m.a.filter(e.transitionProperties,(function(e){return"create_report"===e.name}));m.a.map(i,(function(e){e.value.checked&&0===e.value.values.length&&(t=!1)}));var s=m.a.filter(e.stepProperties,(function(e){return"id"===e.name}));return m.a.map(s,(function(e){m.a.isNil(e.value)&&(t=!1)})),Pa(e)&&(t=!1),t}(e)){var t={};t.id=e.processPlan.id,t.name=e.processPlan.name,t.author=e.processPlan.author,t.comment=e.processPlan.comment,t.email=e.processPlan.email,t.locked=e.processPlan.locked,t.hasPassword=e.processPlan.hasPassword,t.group=e.processPlan.group,t.dialog=e.processPlan.dialog,t.addFilesStep=e.processPlan.addFilesStep,t.layout={},t.layout.stepsLayout={},t.layout.transitionsLayout={},t.sequence=[];var n=[e.transitions.out.endStepId];return m.a.map(e.steps,(function(e){"start"===e.id||"end"===e.id||m.a.includes(n,e.id)||n.push(e.id)})),m.a.map(n,(function(o,a){var i=za(e,o),s=Object(E.a)({type:i},m.a.chain(Zo[i]).keyBy(m.a.identity).mapValues((function(t){var a=m.a.find(e.stepProperties,(function(e){return e.name===t&&e.stepId===o})),i=m.a.isNil(a)?null:a.value;if(m.a.includes(Jo,t)&&m.a.isNil(i)&&(i=!1),"index"===t){var s=m.a.find(e.stepProperties,(function(e){return"step_id"===e.name&&e.stepId===o}));if(s){var r=s.value;m.a.isNil(r)||(i=m.a.indexOf(n,r))}}return i})).omitBy(m.a.isNil).value());m.a.map(qo[i],(function(t){var r,c=m.a.chain(e.transitions).filter((function(e){return e.startStepId===o})).map((function(e){return e.id})).value(),l=m.a.chain(e.transitionProperties).filter((function(e){return"types"===e.name&&m.a.includes(e.value,t)})).map((function(e){return e.transitionId})).value(),p=e.transitions[m.a.intersection(c,l)[0]];p&&(s[t]={},r="end"===p.endStepId&&a!==n.length-1?-2:(r=m.a.indexOf(n,p.endStepId))===a+1?-1:r,s[t].next_step=r,"if_disabled"!==t&&m.a.map(Qo[i],(function(n){switch(n){case"create_report":var o=m.a.find(e.transitionProperties,(function(e){return e.transitionId===p.id&&e.name===n}));o.value.checked&&(s[t].post_process=[].concat(Object(S.a)(s[t].post_process||[]),Object(S.a)(m.a.map(o.value.values,(function(e){return e})))));break;case"certify":m.a.find(e.transitionProperties,(function(e){return e.transitionId===p.id&&e.name===n})).value&&(s[t].post_process=[].concat(Object(S.a)(s[t].post_process||[]),[{type:n}]))}})))})),m.a.isNil(s.type)||(t.sequence[a]=s);var r=m.a.chain(e.transitions).filter((function(e){return e.startStepId===o})).map((function(e){return e.id})).value();t.layout.transitionsLayout[a]=Object(S.a)(m.a.map(r,(function(t){return Object(E.a)({},e.transitionsLayout[t],{types:m.a.find(e.transitionProperties,(function(e){return e.transitionId===t&&"types"===e.name})).value})})))})),t.layout.transitionsLayout.start=[Object(E.a)({},e.transitionsLayout.out,{types:["out"]})],m.a.mapValues(e.stepsLayout,(function(e,o){var a;a="start"===o||"end"===o?o:m.a.indexOf(n,o),t.layout.stepsLayout[a]=e})),JSON.stringify(t,null,"\t")}return JSON.stringify({name:e.processPlan.name,errors:!0,errorMessages:oa(e)},null,"\t")},ia="drawing-area",sa=Object(T.a)("PROCESS_PLAN_LOAD",(function(e){return D.loadProcessPlan(e).then(na)})),ra=Object(T.a)("SHOW_PROCESS_PLAN_INFO",(function(e){return e})),ca=Object(T.a)("FOCUS_ON_GLOBAL_AREA_SET",(function(e){return e})),la=Object(T.a)("PROCESS_PLAN_JSON_SET",(function(e){return e})),pa=(Object(T.a)("PROCESS_PLAN_LOAD",(function(e){return e})),Object(T.a)("CHANGE_PASSWORD",(function(e){return e}))),ua=Object(T.a)("CHANGE_PLAN_LOCK",(function(e){return e}));D.subscribe("saveProcessPlan",(function(){var e=window.store.getState();D.updateSettings(Vn(e)).finally((function(){return D.saveProcessPlan(aa(e))}))}));var da=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return Object(E.a)({},e,{},t.payload.baseInfo,{loaded:!0})},CHANGE_PASSWORD:function(e,t){return Object(E.a)({},e,{hasPassword:t.payload})},CHANGE_PLAN_LOCK:function(e,t){return Object(E.a)({},e,{locked:t.payload})},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Change process plan name":return n.applyProcessPlanNameChange(e);case"Change process plan author":return n.applyProcessPlanAuthorChange(e);case"Change process plan email":return n.applyProcessPlanEmailChange(e);case"Change process plan comment":return n.applyProcessPlanCommentChange(e);case"Change process plan group":return n.applyProcessPlanGroupChange(e);case"Change process plan dialog":return n.applyProcessPlanDialogChange(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Change process plan name":return n.revertProcessPlanNameChange(e);case"Change process plan author":return n.revertProcessPlanAuthorChange(e);case"Change process plan email":return n.revertProcessPlanEmailChange(e);case"Change process plan comment":return n.revertProcessPlanCommentChange(e);case"Change process plan group":return n.revertProcessPlanGroupChange(e);case"Change process plan dialog":return n.revertProcessPlanDialogChange(e);default:return e}},SHOW_PROCESS_PLAN_INFO:function(e,t){return Object(E.a)({},e,{isHidden:t.payload})},FOCUS_ON_GLOBAL_AREA_SET:function(e,t){return Object(E.a)({},e,{focusedArea:t.payload})},PROCESS_PLAN_JSON_SET:function(e,t){return Object(E.a)({},e,{processPlanJson:t.payload})}},{id:null,name:null,author:null,comment:null,email:null,locked:null,hasPassword:null,group:null,dialog:null,loaded:!1,isHidden:!0,focusedArea:null,validationSucceed:!0,addFilesStep:!1,processPlanJson:""}),ha=function(e){return e.processPlan},fa=function(e){return ha(e).loaded},ya=function(e){return ha(e).focusedArea},va=function(e){return ha(e).processPlanJson},ba=function(e){return ha(e).locked},ma=function(e){return ha(e).addFilesStep},ga=function(e){return ha(e).name},Pa=function(e){var t=m.a.isNull(ga(e))?null:ga(e).value;return!m.a.isNull(t)&&(!m.a.isUndefined(m.a.find(xo(e),(function(e){return e.name===t})))||0===t.length)},xa={width:200,height:40},_a={x:0,y:0},Ia=function(e){function t(e,n,o,a,i,s){var r;return Object(g.a)(this,t),(r=Object(x.a)(this,Object(_.a)(t).call(this,"Add step"))).stepId=e,r.type=n,r.position=o,r.scale=a,r.translate=i,r.snapToGrid=s,r.step=null,r.stepLayout=null,r}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyAddStep",value:function(e){return this.step={id:this.stepId,type:this.type,selected:!1,highlighted:!1,intersectedAnchors:[]},Object(E.a)({},e,Object(z.a)({},this.stepId,this.step))}},{key:"applyAddStepLayout",value:function(e){var t;return this.position&&(t=this.snapToGrid?{x:20*Math.round((this.position.x*this.scale+this.translate.x)/20),y:20*Math.round((this.position.y*this.scale+this.translate.y)/20)}:{x:this.position.x*this.scale+this.translate.x,y:this.position.y*this.scale+this.translate.y}),this.stepLayout={position:t||_a,size:this.size||xa},Object(E.a)({},e,Object(z.a)({},this.stepId,this.stepLayout))}},{key:"applyAddStepProperty",value:function(e){var t=this,n=m.a.map(Zo[this.type],(function(e){return{stepId:t.stepId,name:"index"===e?"step_id":e,value:m.a.has(Xo,e)?Xo[e]:null}}));return[].concat(Object(S.a)(e),Object(S.a)(n))}},{key:"applyAddStepConnectionLayout",value:function(e){return"filepickup"!==this.type?e:[].concat(Object(S.a)(e),[{startStepId:this.stepId,endStepId:null,endPosition:null}])}},{key:"revertAddStep",value:function(e){var t=this;return this.step=e[this.stepId],m.a.omitBy(e,(function(e){return e.id===t.stepId}))}},{key:"revertAddStepLayout",value:function(e){var t=this;return this.stepLayout=e[this.stepId],m.a.omitBy(e,(function(e){return e===t.stepLayout}))}},{key:"revertAddStepProperty",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.stepId!==t.stepId}))}},{key:"revertAddStepConnectionLayout",value:function(e){var t=this;return"filepickup"!==this.type?e:m.a.filter(e,(function(e){return e.startStepId!==t.stepId}))}}]),t}(qe),Oa=function(e){function t(e,n,o,a,i,s,r,c){var l;return Object(g.a)(this,t),(l=Object(x.a)(this,Object(_.a)(t).call(this,"Insert new step into transition"))).stepId=e,l.stepType=n,l.position=o,l.id=a,l.newTransitionId=i,l.scale=s,l.translate=r,l.snapToGrid=c,l.step=null,l.stepLayout=null,l}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyInsertStep",value:function(e){return this.step={id:this.stepId,type:this.stepType,selected:!1,highlighted:!1,intersected:!1,intersectedAnchors:[]},Object(E.a)({},e,Object(z.a)({},this.stepId,this.step))}},{key:"revertInsertStep",value:function(e){var t=this;return this.step=e[this.stepId],m.a.omitBy(e,(function(e){return e.id===t.stepId}))}},{key:"applyInsertStepLayout",value:function(e){var t;return this.position&&(t=this.snapToGrid?{x:20*Math.round((this.position.x*this.scale+this.translate.x)/20),y:20*Math.round((this.position.y*this.scale+this.translate.y)/20)}:{x:this.position.x*this.scale+this.translate.x,y:this.position.y*this.scale+this.translate.y}),this.stepLayout={position:t||_a,size:xa},Object(E.a)({},e,Object(z.a)({},this.stepId,this.stepLayout))}},{key:"revertInsertStepLayout",value:function(e){var t=this;return this.stepLayout=e[this.stepId],m.a.omitBy(e,(function(e){return e===t.stepLayout}))}},{key:"applyInsertStepProperty",value:function(e){var t=this,n=m.a.map(Zo[this.stepType],(function(e){return{stepId:t.stepId,name:"index"===e?"step_id":e,value:m.a.has(Xo,e)?Xo[e]:null}}));return[].concat(Object(S.a)(e),Object(S.a)(n))}},{key:"revertInsertStepProperty",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.stepId!==t.stepId}))}},{key:"applyInsertStepConnectionLayout",value:function(e){return"filepickup"!==this.stepType?e:[].concat(Object(S.a)(e),[{startStepId:this.stepId,endStepId:null,endPosition:null}])}},{key:"revertInsertStepConnectionLayout",value:function(e){var t=this;return"filepickup"!==this.stepType?e:m.a.filter(e,(function(e){return e.startStepId!==t.stepId}))}},{key:"applyAddTransitionForInsertStep",value:function(e){var t,n=this;return this.prevTransition=m.a.find(e,(function(e){return e.id===n.id})),Object(E.a)({},e,(t={},Object(z.a)(t,this.id,{id:this.id,startStepId:this.prevTransition.startStepId,endStepId:this.stepId,selected:!1,highlighted:!1,intersected:!1}),Object(z.a)(t,this.newTransitionId,{id:this.newTransitionId,startStepId:this.stepId,endStepId:this.prevTransition.endStepId,selected:!1,highlighted:!1,intersected:!1}),t))}},{key:"revertAddTransitionForInsertStep",value:function(e){return e=m.a.omit(e,[this.newTransitionId]),Object(E.a)({},e,Object(z.a)({},this.id,{id:this.id,startStepId:this.prevTransition.startStepId,endStepId:this.prevTransition.endStepId,selected:!1,highlighted:!1,intersected:!1}))}},{key:"applyAddTransitionLayoutForInsertStep",value:function(e){var t=this,n=m.a.find(e,(function(e,n){return n===t.id}));return Object(E.a)({},e,Object(z.a)({},this.newTransitionId,{start:{position:n.start.position},end:{position:n.end.position}}))}},{key:"revertAddTransitionLayoutForInsertStep",value:function(e){return m.a.omit(e,[this.newTransitionId])}},{key:"applyAddTransitionPropertiesForInsertStep",value:function(e){var t=this,n=Object(S.a)(e);return n.push({transitionId:this.newTransitionId,name:"types",value:qo[this.stepType]}),m.a.forEach(Qo[this.stepType],(function(e){switch(e){case"certify":n.push({transitionId:t.newTransitionId,name:"certify",value:!1});break;case"create_report":n.push({transitionId:t.newTransitionId,name:"create_report",value:{checked:!1,values:[]}})}})),n}},{key:"revertAddTransitionPropertiesForInsertStep",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.transitionId!==t.newTransitionId}))}}]),t}(qe),Sa=function(e){function t(e,n,o,a){var i;return Object(g.a)(this,t),(i=Object(x.a)(this,Object(_.a)(t).call(this,"Create transitions for insert step"))).stepId=e,i.stepType=n,i.baseTransitionId=o,i.newTransitionId=a,i}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyAddTransitionForInsertStep",value:function(e){var t,n=this;return this.prevTransition=m.a.find(e,(function(e){return e.id===n.baseTransitionId})),Object(E.a)({},e,(t={},Object(z.a)(t,this.baseTransitionId,{id:this.baseTransitionId,startStepId:this.prevTransition.startStepId,endStepId:this.stepId,selected:!1,highlighted:!1,intersected:!1}),Object(z.a)(t,this.newTransitionId,{id:this.newTransitionId,startStepId:this.stepId,endStepId:this.prevTransition.endStepId,selected:!1,highlighted:!1,intersected:!1}),t))}},{key:"revertAddTransitionForInsertStep",value:function(e){return e=m.a.omit(e,[this.newTransitionId]),Object(E.a)({},e,Object(z.a)({},this.baseTransitionId,{id:this.baseTransitionId,startStepId:this.prevTransition.startStepId,endStepId:this.prevTransition.endStepId,selected:!1,highlighted:!1,intersected:!1}))}},{key:"applyAddTransitionLayoutForInsertStep",value:function(e){var t=this,n=m.a.find(e,(function(e,n){return n===t.baseTransitionId}));return Object(E.a)({},e,Object(z.a)({},this.newTransitionId,{start:{position:n.start.position},end:{position:n.end.position}}))}},{key:"revertAddTransitionLayoutForInsertStep",value:function(e){return m.a.omit(e,[this.newTransitionId])}},{key:"applyAddTransitionPropertiesForInsertStep",value:function(e){var t=this,n=Object(S.a)(e);return n.push({transitionId:this.newTransitionId,name:"types",value:qo[this.stepType]}),m.a.forEach(Qo[this.stepType],(function(e){switch(e){case"certify":n.push({transitionId:t.newTransitionId,name:"certify",value:!1});break;case"create_report":n.push({transitionId:t.newTransitionId,name:"create_report",value:{checked:!1,values:[]}})}})),n}},{key:"revertAddTransitionPropertiesForInsertStep",value:function(e){var t=this;return m.a.filter(e,(function(e){return e.transitionId!==t.newTransitionId}))}},{key:"applyInsertStepForAnchors",value:function(e){return m.a.mapValues(e,(function(e){return Object(E.a)({},e,{intersectedAnchors:[]})}))}},{key:"revertInsertStepForAnchors",value:function(e){return e}}]),t}(qe),Ea=function(e){function t(e,n,o,a){var i;return Object(g.a)(this,t),(i=Object(x.a)(this,Object(_.a)(t).call(this,"Remove step"))).stepId=e,i.step=null,i.stepLayout=null,i.deletedTransition=null,i.tempConectedLayout=null,i.transitionConnectedLayout=null,i.transitionProperties=null,i.transitionConnectedProperties=null,i.allTransitionProperties=n,i.originProperties=n,i.allTransitionLayout=o,i.allSteps=a,i.newTransitions=[],i.newTransitionsLayout=[],i.newTransitionsProperties=[],i.outgoingTransitionsProperties=[],i.incomingTransitionsProperties=[],i.outgoingTransitions=[],i.incomingTransitions=[],i}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyRemoveStep",value:function(e){var t=this;return this.step=e[this.stepId],m.a.omitBy(e,(function(e){return e.id===t.stepId}))}},{key:"revertRemoveStep",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.stepId,this.step))}},{key:"applyRemoveStepLayout",value:function(e){var t=this;return this.stepLayout=e[this.stepId],m.a.omitBy(e,(function(e){return e===t.stepLayout}))}},{key:"revertRemoveStepLayout",value:function(e){return Object(E.a)({},e,Object(z.a)({},this.stepId,this.stepLayout))}},{key:"applyRemoveStepConnectionLayout",value:function(e){var t=this;return m.a.isEmpty(e)?e:(this.tempConectedLayout=m.a.filter(e,(function(e){return e.startStepId===t.stepId})),m.a.filter(e,(function(e){return e.startStepId!==t.stepId})))}},{key:"revertRemoveStepConnectionLayout",value:function(e){return m.a.isEmpty(e)?e:[].concat(Object(S.a)(e),[this.tempConectedLayout])}},{key:"applyRemoveStepProperty",value:function(e){var t=this;return this.stepProperties=m.a.filter(e,(function(e){return e.value!==t.stepId})),m.a.filter(this.stepProperties,(function(e){return e.stepId!==t.stepId}))}},{key:"revertRemoveStepProperty",value:function(e){return this.stepProperties}},{key:"applyRemoveTransitionConnected",value:function(e){var t=this;this.newTransitionsProperties=[],this.outgoingTransitionsProperties=[],this.incomingTransitionsProperties=[];var n=[];m.a.mapValues(e,(function(e){if(e.startStepId===t.stepId){var o,a;t.outgoingTransitions.push(e);var i=m.a.filter(t.allTransitionProperties,(function(t){return t.transitionId===e.id}));(o=t.outgoingTransitionsProperties).push.apply(o,Object(S.a)(i)),(a=n).push.apply(a,Object(S.a)(m.a.find(t.allTransitionProperties,(function(t){return t.transitionId===e.id&&"types"===t.name})).value)),t.deletedTransition=m.a.assign(t.deletedTransition,Object(z.a)({},e.id,e))}else if(e.endStepId===t.stepId){var s;t.incomingTransitions.push(e);var r=m.a.filter(t.allTransitionProperties,(function(t){return t.transitionId===e.id}));(s=t.incomingTransitionsProperties).push.apply(s,Object(S.a)(r)),t.deletedTransition=m.a.assign(t.deletedTransition,Object(z.a)({},e.id,e))}})),m.a.map(this.incomingTransitionsProperties,(function(o){var a=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"types"===e.name})).value;m.a.map(t.outgoingTransitionsProperties,(function(i){var s=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===i.transitionId&&"types"===e.name})).value,r=m.a.intersection(a,s),c=m.a.find(e,(function(e){return e.id===o.transitionId})),l=m.a.find(e,(function(e){return e.id===i.transitionId})),p=m.a.filter(e,(function(e){return e.startStepId===c.startStepId&&e.endStepId===l.endStepId})),u=!1;if(p.length>0&&m.a.forEach(p,(function(e){var n,o=!1,i=m.a.find(t.allTransitionProperties,(function(t){return t.transitionId===e.id&&"certify"===t.name})),s=m.a.find(t.allTransitionProperties,(function(t){return t.transitionId===e.id&&"create_report"===t.name})),l=m.a.find(t.allTransitionProperties,(function(t){return t.transitionId===e.id&&"types"===t.name})).value,p=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===c.id&&"certify"===e.name})),d=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===c.id&&"create_report"===e.name}));if(n=!!m.a.isUndefined(i)||i.value===p.value,m.a.isUndefined(s)?o=!0:s.value.checked===d.value.checked&&(o=!1===s.value.checked||0===m.a.difference(s.value.values,d.value.values).length),u=!0===n&&!0===o){var h=t.allSteps[t.stepId].type,f=m.a.difference(a,qo[h]);t.allTransitionProperties=m.a.map(t.allTransitionProperties,(function(t){if(t.transitionId===e.id&&"types"===t.name&&!m.a.includes.apply(m.a,[Object(S.a)(l)].concat(Object(S.a)(r)))&&!m.a.includes.apply(m.a,[Object(S.a)(l)].concat(Object(S.a)(f)))){var n=f.length>0?[].concat(Object(S.a)(l),Object(S.a)(r),Object(S.a)(f)):[].concat(Object(S.a)(l),Object(S.a)(r));return Object(E.a)({},t,{value:n})}return t})),a=m.a.difference(a,f)}})),!u){var d,h,f=m.a.find(e,(function(e){return e.id===o.transitionId})).startStepId,y=m.a.find(e,(function(e){return e.id===i.transitionId})).endStepId,v=m.a.find(t.newTransitions,(function(e){return e.startStepId===f&&e.endStepId===y}));if(m.a.isUndefined(v))d=!1,h=!1;else{var b=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"certify"===e.name})),g=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"create_report"===e.name})),P=m.a.find(t.newTransitionsProperties,(function(e){return e.transitionId===v.id&&"certify"===e.name})),x=m.a.find(t.newTransitionsProperties,(function(e){return e.transitionId===v.id&&"create_report"===e.name}));d=m.a.isUndefined(b)&&m.a.isUndefined(P)||!m.a.isUndefined(b)&&!m.a.isUndefined(P)&&b.value===P.value,h=m.a.isUndefined(g)&&m.a.isUndefined(x)||!m.a.isUndefined(g)&&!m.a.isUndefined(x)&&g.value.checked===x.value.checked&&m.a.isEqual(g.value.values,x.value.values)}if(m.a.size(t.newTransitions)>0&&!m.a.isUndefined(v)&&d&&h)t.allTransitionLayout[o.transitionId].start.position===t.allTransitionLayout[i.transitionId].start.position&&t.allTransitionLayout[o.transitionId].end.position===t.allTransitionLayout[i.transitionId].end.position&&(t.newTransitionsLayout=Object(E.a)({},t.newTransitionsLayout,Object(z.a)({},v.id,{start:t.allTransitionLayout[o.transitionId].start,end:t.allTransitionLayout[i.transitionId].end}))),o.name===i.name&&"types"===i.name&&(t.newTransitionsProperties=m.a.map(t.newTransitionsProperties,(function(e){return e.transitionId===v.id&&"types"===e.name&&m.a.difference(r,e.value).length>0?{transitionId:e.transitionId,name:"types",value:m.a.concat(e.value,m.a.difference(r,e.value))}:e})));else if("start"===f){t.newTransitions=Object(E.a)({},t.newTransitions,Object(z.a)({},"out",{id:"out",startStepId:"start",endStepId:y,selected:!1,highlighted:!1,intersected:!1})),t.newTransitionsLayout=Object(E.a)({},t.newTransitionsLayout,Object(z.a)({},"out",{start:t.allTransitionLayout[o.transitionId].start,end:t.allTransitionLayout[i.transitionId].end})),t.newTransitionsProperties.push({transitionId:"out",name:"types",value:r})}else{if(t.allSteps[f].type!==t.allSteps[t.stepId].type&&n.length>0){var _=m.a.difference(a,n);_.length>0&&(r.push.apply(r,Object(S.a)(_)),n=[])}if(r.length>0&&f!==y){var I,O=m.a.find(t.newTransitions,(function(e){return e.startStepId===f&&e.endStepId===y}));if(!m.a.isUndefined(O)&&d&&h?I=O.id:(I=G()(),t.newTransitions=Object(E.a)({},t.newTransitions,Object(z.a)({},I,{id:I,startStepId:f,endStepId:y,selected:!1,highlighted:!1,intersected:!1})),t.newTransitionsLayout=Object(E.a)({},t.newTransitionsLayout,Object(z.a)({},I,{start:t.allTransitionLayout[o.transitionId].start,end:t.allTransitionLayout[i.transitionId].end}))),t.newTransitionsProperties.push({transitionId:I,name:"types",value:r}),m.a.isUndefined(m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"certify"===e.name})))||t.newTransitionsProperties.push({transitionId:I,name:"certify",value:m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"certify"===e.name})).value}),!m.a.isUndefined(m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"create_report"===e.name})))){var T=m.a.find(t.allTransitionProperties,(function(e){return e.transitionId===o.transitionId&&"create_report"===e.name})),k=T.value.checked?T.value.values:[];t.newTransitionsProperties.push({transitionId:I,name:"create_report",value:{checked:T.value.checked,values:k}})}}}}}))}));var o=m.a.omitBy(e,(function(e){return e.startStepId===t.stepId||e.endStepId===t.stepId}));return Object(E.a)({},o,{},this.newTransitions)}},{key:"revertRemoveTransitionConected",value:function(e){var t=this;return e=m.a.pickBy(e,(function(e,n){return m.a.isUndefined(t.newTransitions[n])})),m.a.assign(e,this.deletedTransition),Object(E.a)({},e)}},{key:"applyRemoveTransitionConnectedProperties",value:function(e){var t=this,n=this.allTransitionProperties;return m.a.mapValues(this.allTransitionProperties,(function(e){m.a.mapValues(t.deletedTransition,(function(o,a){a===e.transitionId&&(t.transitionConnectedProperties=m.a.isNull(t.transitionConnectedProperties)?Object(E.a)({},e):m.a.concat(t.transitionConnectedProperties,Object(E.a)({},e)),n=m.a.filter(n,(function(e){return a!==e.transitionId})))}))})),[].concat(Object(S.a)(n),Object(S.a)(this.newTransitionsProperties))}},{key:"revertRemoveTransitionConnectedProperties",value:function(e){return this.originProperties}},{key:"applyRemoveTransitionConnectionLayout",value:function(e){var t=this,n=e;return m.a.mapValues(n,(function(e,o){var a=o,i=e;m.a.mapValues(t.deletedTransition,(function(e,o){o===a&&(t.transitionConnectedLayout=m.a.assign(t.transitionConnectedLayout,Object(z.a)({},o,Object(E.a)({},i))),n=m.a.omitBy(n,(function(e,t){return t===a})))}))})),m.a.merge(n,this.newTransitionsLayout)}},{key:"revertRemoveTransitionConnectionLayout",value:function(e){var t=this,n=this.transitionConnectedLayout;return e=m.a.pickBy(e,(function(e,n){return m.a.isUndefined(t.newTransitionsLayout[n])})),m.a.assign(e,Object(E.a)({},n))}}]),t}(qe),Ta=Object(T.a)("STEP_SELECT",(function(e){return e})),ka=Object(T.a)("STEP_HIGHLIGHT",(function(e){return e})),wa=function(e,t,n){return function(o,a){o(Be(new Ia(e,t,n,a().drawingArea.scale,a().drawingArea.viewportPosition,a().drawingArea.snapToGrid)))}},Ca=function(e,t,n,o,a){return function(i,s){i(Be(new Oa(e,t,n,o,a,Un(s()),Fn(s()),Kn(s()))))}},ja=function(e,t){return function(n,o){n(Be(new Sa(e,za(o(),e),function(e){var t=m.a.find(Te(e),(function(e){return!0===e.intersected}));if(!m.a.isUndefined(t))return t.id}(o()),t)))}},Na=function(e){return function(t,n){t(Be(new Ea(e,n().transitionProperties,n().transitionsLayout,n().steps)))}},Aa=Object(T.a)("ANCHORS_INTERSECT",(function(e,t,n){return{id:e,transitions:t,transitionsLayout:n}})),La=Object(T.b)({PROCESS_PLAN_LOAD:function(e,t){return t.payload.steps},STEP_SELECT:function(e,t){return m.a.isNil(t.payload)||"start"===t.payload?m.a.mapValues(e,(function(e){return Object(E.a)({},e,{selected:!1})})):e[t.payload].selected?e:m.a.mapValues(e,(function(e,n){return n===t.payload?Object(E.a)({},e,{selected:!0}):e.selected?Object(E.a)({},e,{selected:!1}):e}))},STEP_HIGHLIGHT:function(e,t){return m.a.isNil(t.payload)?m.a.mapValues(e,(function(e){return Object(E.a)({},e,{highlighted:!1})})):m.a.mapValues(e,(function(e){return e.id===t.payload?Object(E.a)({},e,{highlighted:!0}):e}))},CHANGE_APPLY:function(e,t){var n=t.payload;switch(n.description){case"Remove step":return n.applyRemoveStep(e);case"Add step":return n.applyAddStep(e);case"Generate auto layout":return n.applyLayoutAutoGenerationForSteps(e);case"Insert new step into transition":return n.applyInsertStep(e);case"Create transitions for insert step":return n.applyInsertStepForAnchors(e);default:return e}},CHANGE_REVERT:function(e,t){var n=t.payload;switch(n.description){case"Remove step":return n.revertRemoveStep(e);case"Add step":return n.revertAddStep(e);case"Generate auto layout":return n.revertLayoutAutoGenerationForSteps(e);case"Insert new step into transition":return n.revertInsertStep(e);case"Create transitions for insert step":return n.revertInsertStepForAnchors(e);default:return e}},ANCHORS_INTERSECT:function(e,t){var n=m.a.find(t.payload.transitions,(function(e){return e.intersected})),o=!!n&&m.a.find(t.payload.transitionsLayout,(function(e,t){return t===n.id}));return m.a.mapValues(e,(function(e){return e.id===t.payload.id?o?Object(E.a)({},e,{intersectedAnchors:[o.start.position,o.end.position]}):Object(E.a)({},e,{intersectedAnchors:[]}):e}))}},{}),Ra=function(e){return e.steps},Da=Object(k.createSelector)(fa,Ra,(function(e,t){return e?["start"].concat(Object(S.a)(Object.keys(t)),["end"]):[]})),Ma=Object(k.createSelector)(fa,Ra,(function(e,t){return e?m.a.chain(t).filter((function(e){return"filepickup"===e.type})).map((function(e){return e.id})).value():[]})),Ga=Object(k.createSelector)(Ra,(function(e){return m.a.find(e,(function(e){return!0===e.selected}))})),za=function(e,t){var n=function(e,t){return m.a.find(Ra(e),(function(e){return e.id===t}))}(e,t);return m.a.isNil(n)?null:n.type},Va=function(e,t){var n=Ce(e);return!m.a.isNil(n)&&(n.startStepId===t||n.endStepId===t)},Ua=function(e,t){var n=Object(v.c)(e.localize);switch(t){case"start":return m.a.isEmpty(Re(e,t))?[n("NG_PPE_No_transition_from_start_long")]:[];case"end":return m.a.isEmpty(De(e,t))?[n("NG_PPE_No_transition_to_end_long")]:[];default:var o=[];m.a.isEmpty(De(e,t))&&o.push(n("NG_PPE_No_incoming_transition_long"));var a=function(e,t){var n=ko(e,t);return!0===n?m.a.without(qo[za(e,t)],"if_disabled"):!1===n?["if_disabled"]:qo[za(e,t)]}(e,t),i=Go(e,t);if(0!==m.a.difference(a,i).length){var s=m.a.chain(a).map((function(e){return n(J[e])})).join(", ").value();o.push(n("NG_PPE_NOT_ALL_POSSIBLE_OUTGOING_TRANSITIONS_TYPES_long",{events:s}))}return o}},Fa=Object(k.createSelector)((function(e){return e}),Da,(function(e,t){return m.a.chain(t).map((function(t){return[t,[].concat(Object(S.a)(Ua(e,t)),Object(S.a)(ho(e,t)))]})).fromPairs().value()})),Ba=function(e,t){switch(e){case"top":return{x:t.position.x+t.size.width/2+10,y:t.position.y+5};case"right":return{x:t.position.x+t.size.width+5,y:t.position.y+t.size.height/2+5};case"bottom":return{x:t.position.x+t.size.width/2+10,y:t.position.y+t.size.height+5};case"left":return{x:t.position.x+5,y:t.position.y+t.size.height/2+5};default:return null}},Ha=n(45),Ka=function(e){function t(e,n,o){var a;return Object(g.a)(this,t),(a=Object(x.a)(this,Object(_.a)(t).call(this,"Move step"))).stepId=e,a.newPosition=o,a.oldPosition=n,a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyStepsLayout",value:function(e){var t=this;return m.a.mapValues(e,(function(e,n){return n===t.stepId?Object(E.a)({},e,{position:t.newPosition}):e}))}},{key:"revertStepsLayout",value:function(e){var t=this;return m.a.mapValues(e,(function(e,n){return n===t.stepId?Object(E.a)({},e,{position:t.oldPosition}):e}))}}]),t}(qe),Wa=Object(c.b)((function(e,t){var n=t.id,o=e.steps[n],a=e.stepsLayout[n],i="start"===n||"end"===n?n:o.type,s=qo[i],r=Go(e,n),c=To(e,n,"step_id"),l=Kn(e),p=ko(e,n);return{className:"start"===n||"end"===n?"start-end":o.type,text:"start"===n||"end"===n?n:lo(e,n),position:a.position,size:a.size,selected:Hn(e)===n,focused:Hn(e)===n&&ya(e)===ia,intersectedAnchors:"start"===n||"end"===n?[]:o.intersectedAnchors,highlighted:"start"!==n&&"end"!==n&&(o.highlighted||Va(e,n)),selectable:!("start"===n||"end"===n),transitionCanStart:!(0===m.a.difference(s,r).length),connectionCanStart:!m.a.isNil(c)&&m.a.isNil(c.value),connectionAnchorIsVisible:en(e,n),modifyingTransition:Dt(e),modifyingConnection:Rt(e),pickUpFile:"filepickup"===i,zoomScale:Un(e),svgPosition:Fn(e),snapToGrid:l,stepAvailability:p?" enableStep":" disableStep",anchorStartEndAvailability:"end"!==n,isExistDependentTransition:Ge(e,n),isIntersected:ze(e)}}),(function(e,t){var n=t.id;return{onStepPositionChangeEnd:function(t,o){e(Be(new Ka(n,t,o)))},onStepPositionChange:function(t){e(Xe(n,t))},onStepSelect:function(){e(Ta(n)),e(be(null)),e(In(null))},onStepHighlight:function(){e(Pe(n,"step"))},onStepHighlightReset:function(){e(Pe(null))},onTransitionCreationStart:function(t){e("left-top-angle"===t?Ct():Tt()),e(dn(n,t))},onTransitionCreationEnd:function(t){e(un(n,t))},onAnchorMouseOver:function(t){e(fn("left-top-angle"===t?"left":t))},onAnchorMouseOut:function(){e(fn(null))},onMoveStep:function(t){e(Qe(n,t))},onRemoveStep:function(){"start"!==n&&"end"!==n&&(e(Na(n)),e(Ta(null)),e(In(!0)),e(ca(ia)))},onTransitionCreationStartByShortcut:function(t){e(function(e,t){return function(n,o){if(t){var a=m.a.chain(tt(o())).pickBy((function(e,n){return"start"!==n&&n!==t})).mapValues((function(e,t){return Object(E.a)({},e,{stepId:t})})).values().value();0!==a.length&&(n(dn(t,e)),n(Et()),n(hn(Object(E.a)({position:"top"},Ba("top",a[0])))),n(Ht({start:{stepId:t},end:{stepId:a[0].stepId,position:"top"}})))}}}(t,n))},onAnotherElementSelect:function(t){e(Dn(t))},onCreateTempTransitionByTouch:function(t){e(pn(t))},onDeleteTempTransition:function(){e(rn()),e(In(null)),e(Ta(null))},onAddTransition:function(t,n){e(un(t,n))},onTransitionOver:function(t){e(function(e){return function(t,n){t(ge(e,n().stepsLayout,n().transitionsLayout,n()))}}(t)),e(function(e){return function(t,n){t(Aa(e,n().transitions,n().transitionsLayout))}}(n))},onDropStep:function(){var t=G()();e(In(!0)),e(Ta(n)),e(ja(n,t))},onSizeChange:function(t){e(Je(n,t))}}}))(vt),Ya=Object(c.b)((function(e){var t=e.tempTransition,n=Lt(e);if(t){var o=t.end.position||Pn(t.start.x,t.start.y,t.end.x,t.end.y),a=t.start.position||Pn(t.end.x,t.end.y,t.start.x,t.start.y),i="updating-transition-start-point"!==n?nt(e,t.start.stepId):{position:{x:t.start.x-10,y:t.start.y-5},size:{width:0,height:0}},s={position:{x:t.end.x-10,y:t.end.y-5},size:{width:0,height:0}};return{points:Vt(i,s,{start:{position:a},end:{position:o}}),className:"",start:$(i,a),end:$(s,o),arrowType:o,selected:!0,selectable:!0,focused:!0,scale:Un(e),svgPosition:Fn(e),highlighted:!1,showTransitionInfo:!1,translate:Object(v.c)(e.localize)}}return{}}),(function(e){return{onArrowKeyDown:function(t){e("right"===t||"left"===t?function(e){return function(t,n){var o=Wt(n()),a=m.a.chain(tt(n())).pickBy((function(e,t){return"start"!==t&&t!==o.start.stepId})).mapValues((function(e,t){return Object(E.a)({},e,{stepId:t})})).values().value(),i="left"===e?1:-1,s=m.a.findIndex(a,(function(e){return e.stepId===o.end.stepId}));s=(s+i+a.length)%a.length,t(hn(Object(E.a)({position:o.end.position},Ba(o.end.position,a[s])))),t(Ht({start:{stepId:o.start.stepId},end:{stepId:a[s].stepId,position:o.end.position}}))}}(t):function(e){return function(t,n){var o=gn(n());if(o){var a="bottom"===e?xn[o]:_n[o],i=Wt(n()).end.stepId,s=Ba(a,nt(n(),i));t(hn(Object(E.a)({position:a},s)));var r=Wt(n());t(Ht({start:{stepId:r.start.stepId},end:{stepId:r.end.stepId,position:a}}))}}}(t))},onRemoveTransition:function(){e(un(null))},onEnterKeyDown:function(){e((function(e,t){var n=Wt(t());e(un(n.end.stepId,n.end.position))}))}}}))(St),qa=Object(c.b)((function(e){var t=e.tempTransition;if(t){var n={position:{x:t.start.x-5,y:t.start.y},size:{width:0,height:0}},o={position:{x:t.end.x-10,y:t.end.y-5},size:{width:0,height:0}},a=t.end.position||Pn(n.position.x,n.position.y,o.position.x,o.position.y),i=n.position.x>=o.position.x+o.size.width/2+5?"left":"top";return{points:Vt(n,o,{start:{position:i},end:{position:a}}),className:"connection ",start:$(n,i),end:$(o,a),arrowType:null,selected:!1,selectable:!1,focused:!1,scale:Un(e),svgPosition:Fn(e),highlighted:!1,showTransitionInfo:!1,translate:Object(v.c)(e.localize)}}return{}}))(St),Za=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Remove connection"))).startStepId=e,n.connectedLayout=null,n.connectedProperties=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyRemoveConnection",value:function(e){var t=this;return this.connectedLayout=m.a.filter(e,(function(e){return e.startStepId===t.startStepId})),m.a.filter(e,(function(e){return e.startStepId!==t.startStepId}))}},{key:"revertRemoveConnection",value:function(e){return m.a.concat(e,this.connectedLayout)}},{key:"applyRemoveConnectionProperty",value:function(e){var t=this;return m.a.map(e,(function(e){return e.stepId===t.startStepId&&"step_id"===e.name&&(t.connectedProperties=e.value,e.value=null),e}))}},{key:"revertRemoveConnectionProperty",value:function(e){var t=this;return m.a.map(e,(function(e){return e.stepId===t.startStepId&&"step_id"===e.name&&(e.value=t.connectedProperties),e}))}}]),t}(qe),Xa=Object(c.b)((function(e,t){var n=t.connection,o={position:{x:nt(e,n.startStepId).position.x-5,y:nt(e,n.startStepId).position.y},size:{height:0,width:0}},a={position:{x:nt(e,n.endStepId).position.x-5,y:nt(e,n.endStepId).position.y},size:{height:0,width:0}},i=o.position.x>=a.position.x+a.size.width/2+5?"left":"top";return{points:Vt(o,a,{start:{position:i},end:{position:"left"}}),className:"connection ",start:$(o,i),end:$(a,"left"),arrowType:null,selected:!1,focused:!1,highlighted:!1,scale:Un(e),svgPosition:Fn(e),showTransitionInfo:!1,translate:Object(v.c)(e.localize)}}),(function(e,t){var n=t.connection;return{onStartTransitionPointUpdate:function(t,o){"end"===o&&(e(jt()),e(function(e,t){return function(n,o){var a=t.startStepId,i=t.endStepId,s=nt(o(),i).size,r={start:{stepId:a,x:e.start.x,y:e.start.y,position:e.start.x>=e.end.x+s.width/2+5?"left":"top"},end:{stepId:i,x:e.end.x,y:e.end.y,position:null}},c={start:{stepId:a,position:null},end:{stepId:i,position:$t(o(),t)||Pn(e.start.x,e.start.y,e.end.x,e.end.y)}};n(Ht(c)),n(cn(r))}}(t,n)))},onTransitionSelect:function(){e(be(null)),e(Ta(null))},onRemoveTransition:function(){e(Be(new Za(n.startStepId))),e(In(!0)),e(ca(ia))}}}))(St),Ja=(n(150),n(109)),Qa=n.n(Ja),$a=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setDrawingArea=function(e){n.drawingArea=e},n.handleTempTransitionUpdate=function(e){n.props.transitionCreationStarted&&n.props.onUpdateTempTransition({x:e.pageX,y:e.pageY-ds})},n.handleTouchStart=function(e){n.haveChangedPosition=!1,n.computedPosition={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},document.addEventListener("touchmove",n.handleTouchMove),document.addEventListener("touchend",n.handleTouchEnd)},n.handleTouchMove=function(e){var t=n.computedPosition.x-e.targetTouches[0].pageX,o=n.computedPosition.y-e.targetTouches[0].pageY;0===t&&0===o||(n.haveChangedPosition=!0),n.computedPosition.x=e.targetTouches[0].pageX,n.computedPosition.y=e.targetTouches[0].pageY;var a={x:n.props.viewportPosition.x+t*n.props.scale,y:n.props.viewportPosition.y+o*n.props.scale};n.props.onMoveViewport(a)},n.handleTouchEnd=function(){document.removeEventListener("touchmove",n.handleTouchMove),document.removeEventListener("touchend",n.handleTouchStart),n.computedPosition={}},n.handleMouseDown=function(e){n.haveChangedPosition=!1,n.computedPosition={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseMove=function(e){var t=n.computedPosition.x-e.pageX,o=n.computedPosition.y-e.pageY;0===t&&0===o||(n.haveChangedPosition=!0),n.computedPosition.x=e.pageX,n.computedPosition.y=e.pageY;var a={x:n.props.viewportPosition.x+t*n.props.scale,y:n.props.viewportPosition.y+o*n.props.scale};n.props.onMoveViewport(a)},n.handleMouseUp=function(){document.removeEventListener("mousemove",n.handleMouseMove),document.removeEventListener("mouseup",n.handleMouseUp),n.computedPosition={}},n.browserResize=function(){var e=document.getElementById("mainSvgField"),t={width:e.offsetWidth,height:e.offsetHeight};n.props.onBrowserChangeViewport(t),n.drawingArea.focus()},n.handleDrawingAreaSelect=function(){n.drawingArea.focus(),n.props.onDrawingAreaSelect()},n.handleKeyDown=function(e){switch(e.preventDefault(),e.key){case"ArrowUp":case"ArrowDown":n.props.onArrowKeyDown();break;case"Escape":n.props.onResetSelection();break;case"Tab":n.props.onMoveToAnotherGroup()}},n.renderSteps=n.renderSteps.bind(Object(Ha.a)(n)),n.renderTransitions=n.renderTransitions.bind(Object(Ha.a)(n)),n.renderFilePickupConnection=n.renderFilePickupConnection.bind(Object(Ha.a)(n)),n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){if(this.props.fetching)return a.a.createElement("div",{className:"loading"},a.a.createElement("img",{src:Qa.a,alt:"Loading"}));window.onresize=this.browserResize;var e=this.props.viewportPosition.x+" "+this.props.viewportPosition.y+" "+this.props.viewportSize.width+" "+this.props.viewportSize.height;return a.a.createElement("div",{ref:this.setDrawingArea,tabIndex:"0",className:"svgContainer",onMouseMove:this.handleTempTransitionUpdate,onMouseDown:this.handleDrawingAreaSelect,onKeyDown:this.handleKeyDown},a.a.createElement("svg",{role:"figure","aria-label":"canvas",viewBox:e,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},this.renderTransitions(),this.renderFilePickupConnection(),this.props.modifyingTransition&&this.props.transitionCreationInProgress?a.a.createElement(Ya,null):null,this.props.modifyingConnection&&this.props.transitionCreationInProgress?a.a.createElement(qa,null):null,this.renderSteps()))}},{key:"renderSteps",value:function(){var e=this;return this.props.steps.map((function(t){return a.a.createElement(Wa,{id:t,key:t,isLockedProcessPlan:e.props.isLockedProcessPlan,validationTooltips:e.props.stepsValidationTooltips[t]})}))}},{key:"renderTransitions",value:function(){var e=this;return this.props.transitions.map((function(t){return a.a.createElement(Bt,{id:t,types:e.props.transitionsTypes[t],icons:e.props.transitionsIcons[t],isLockedProcessPlan:e.props.isLockedProcessPlan,validationTooltips:e.props.transitionsValidationTooltips[t],key:t})}))}},{key:"renderFilePickupConnection",value:function(){return this.props.filePickupConnections.map((function(e){return a.a.createElement(Xa,{connection:e,key:"connection".concat(e.startStepId)})}))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.drawingArea.focus()}}]),t}(o.Component),ei=function(e){return m.a.chain(Ma(e)).map((function(t){return Eo(e,t)})).flatten().filter((function(e){return"step_id"===e.name})).map((function(e){return{startStepId:e.stepId,endStepId:e.value}})).filter((function(e){return!m.a.isNil(e.endStepId)})).value()},ti=Object(k.createSelector)((function(e){return e}),Ga,(function(e,t){return m.a.isNil(t)?[]:Eo(e,t.id)})),ni=Object(k.createSelector)((function(e){return e}),Ga,ti,(function(e,t,n){return[{properties:m.a.map(n,(function(n){return{objectId:n.stepId,name:n.name,value:n.value,type:t.type,controlDescriptor:Oo[n.name](e,t)}}))}]})),oi=Object(c.b)((function(e){var t=e.drawingArea;return{steps:Da(e),transitions:we(e),transitionsTypes:zo(e),transitionsIcons:Uo(e),filePickupConnections:ei(e),fetching:!(fa(e)&&so(e)),modifyingTransition:Dt(e),modifyingConnection:Rt(e),modifyingTransitionByMouse:Mt(e),transitionCreationInProgress:mn(e),transitionCreationStarted:bn(e),scale:t.scale,viewportSize:t.viewportSize,viewportPosition:t.viewportPosition,selected:t.selected,focused:ya(e)===ia&&m.a.isNil(Hn(e))&&m.a.isNil(je(e)),transitionsValidationTooltips:Bo(e),stepsValidationTooltips:Fa(e)}}),(function(e){return{onUpdateTempTransition:function(t){e(hn(t))},onDrawingAreaSelect:function(){e(In(!0)),e(Ta(null)),e(be(null))},onMoveViewport:function(t){e(En(t))},onBrowserChangeViewport:function(t){e(Sn(t)),e(Tn(t))},onMoveToAnotherGroup:function(){e(Mn())},onResetSelection:function(){e(be(null)),e(Ta(null)),e(In(!0))},onArrowKeyDown:function(){e(Ta("start"))}}}))($a),ai=(n(151),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).onZoomIn=function(){n.mouseDownTimeout=setInterval((function(){return n.props.onChangeZoom(-1)}),300)},n.onStopZooming=function(){clearInterval(n.mouseDownTimeout)},n.onStopZoomIn=function(){n.props.onChangeZoom(-1),clearInterval(n.mouseDownTimeout)},n.onZoomOut=function(){n.mouseDownTimeout=setInterval((function(){return n.props.onChangeZoom(1)}),300)},n.onStopZoomOut=function(){n.props.onChangeZoom(1),clearInterval(n.mouseDownTimeout)},n.onFitTheScreen=function(){n.props.onFitTheScreen()},n.onReset=function(){n.props.onReset()},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"zoomPanel"},a.a.createElement("div",{className:"zoomIcon",title:this.props.translate("NG_PPE_Zoom_out_long"),role:"button","aria-label":this.props.translate("NG_PPE_Zoom_out_long"),onMouseDown:this.onZoomOut,onMouseUp:this.onStopZoomOut,onMouseOut:this.onStopZooming,onTouchStart:this.onZoomOut,onTouchEnd:this.onStopZoomOut},a.a.createElement("i",{className:"material-icons"},"zoom_out")),a.a.createElement("div",{className:"zoomIcon",title:this.props.translate("NG_PPE_Reset_zoom_long"),role:"button","aria-label":this.props.translate("NG_PPE_Reset_zoom_long"),onClick:this.onReset},a.a.createElement("span",null,this.props.translate("NG_PPE_Reset_zoom_long"))),a.a.createElement("div",{className:"zoomIcon",title:this.props.translate("NG_PPE_Zoom_in_long"),role:"button","aria-label":this.props.translate("NG_PPE_Zoom_in_long"),onMouseDown:this.onZoomIn,onMouseUp:this.onStopZoomIn,onMouseOut:this.onStopZooming,onTouchStart:this.onZoomIn,onTouchEnd:this.onStopZoomIn},a.a.createElement("i",{className:"material-icons"},"zoom_in")),a.a.createElement("div",{className:"zoomIcon",title:this.props.translate("NG_PPE_Fit_to_size_long"),role:"button","aria-label":this.props.translate("NG_PPE_Fit_to_size_long"),onClick:this.onFitTheScreen},a.a.createElement("i",{className:"material-icons"},"zoom_out_map")))}}]),t}(o.Component)),ii=Object(c.b)((function(e){return{translate:Object(v.c)(e.localize)}}),(function(e){return{onChangeZoom:function(t){return e(kn(t))},onFitTheScreen:function(){return e((function(e,t){return e(Cn(t().stepsLayout))}))},onReset:function(){return e(wn())}}}))(ai),si=(n(152),function(e){function t(){return Object(g.a)(this,t),Object(x.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"side-panel"},a.a.createElement("div",{className:"side-panel-content"},a.a.createElement("div",null,this.props.children)))}}]),t}(o.Component)),ri=(n(153),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).setStepButton=function(e){n.stepButton=e},n.onDragStart=function(e){e.dataTransfer.setData("text",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY,stepType:n.props.type}))},n.onDragTouchStart=function(e){var t=e.target.getBoundingClientRect();n.offset={x:e.targetTouches[0].pageX-t.left,y:e.targetTouches[0].pageY-t.top},document.addEventListener("touchmove",n.onDragTouchMove)},n.onDragTouchMove=function(e){n.touchPosition={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}},n.onDragEnd=function(){if(!m.a.isUndefined(n.touchPosition)&&n.touchPosition.x<n.props.originalViewportSize.width&&n.touchPosition.x>0&&n.touchPosition.y-ds<n.props.originalViewportSize.height&&n.touchPosition.y-ds>0){var e={x:n.touchPosition.x-n.offset.x-5,y:n.touchPosition.y-n.offset.y-5-ds};n.props.onMobileDrop(n.props.type,e)}document.removeEventListener("touchmove",n.onDragTouchMove)},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="step-button "+this.props.type+(this.props.focused?" selected":" ")+(this.props.isLockedProcessPlan?" step-button-disabled ":"");return a.a.createElement("div",{ref:this.setStepButton,role:"button",tabIndex:"0",className:e,draggable:!this.props.isLockedProcessPlan,onDragStart:this.onDragStart,onTouchStart:this.onDragTouchStart,onTouchEnd:this.onDragEnd},a.a.createElement("svg",{x:"0",y:"0",width:"30",height:"30",viewBox:"0 0 30 30"},ft(this.props.type)),a.a.createElement("div",{className:"step-button-name"},this.props.translate(V[this.props.type])))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.stepButton.focus()}}]),t}(o.Component)),ci=Object(c.b)((function(e){return{originalViewportSize:e.drawingArea.originalViewportSize,originalViewportPosition:e.drawingArea.originalViewportPosition,translate:Object(v.c)(e.localize)}}),(function(e){return{onMobileDrop:function(t,n){var o=G()();e(wa(o,t,n)),e(In("clicked")),e(Ta(o))}}}))(ri),li=(n(154),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setStepPanel=function(e){n.stepPanel=e},n.renderStepButtons=function(){return m.a.chain(Object.values(Yo)).filter((function(e){return"addfiles"!==e||"addfiles"===e&&n.props.addFilesAvailability})).map((function(e){return a.a.createElement(ci,{focused:Object.values(Yo)[n.state.selectedStepButtonIndex]===e&&n.props.focused,type:e,key:e,isLockedProcessPlan:n.props.isLockedProcessPlan})})).value()},n.handleKeyDown=function(e){switch(e.key){case"ArrowUp":n.state.selectedStepButtonIndex>0&&n.setState(Object(E.a)({},n.state,{selectedStepButtonIndex:n.state.selectedStepButtonIndex-1}));break;case"ArrowDown":n.state.selectedStepButtonIndex<Object.values(Yo).length-1&&n.setState(Object(E.a)({},n.state,{selectedStepButtonIndex:n.state.selectedStepButtonIndex+1}));break;case"Enter":n.props.isLockedProcessPlan||n.props.onStepAdd(n.state.selectedStepButtonIndex)}},n.state={selectedStepButtonIndex:0},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"step-panel",ref:this.setStepPanel,tabIndex:"0",onKeyDown:this.handleKeyDown},a.a.createElement(si,null,this.renderStepButtons()))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.setState(Object(E.a)({},this.state,{selectedStepButtonIndex:0}))}}]),t}(o.Component)),pi=Object(c.b)((function(e){return{focused:"side-panel"===ya(e),addFilesAvailability:ma(e)}}),(function(e){return{onStepAdd:function(t){var n=Object.values(Yo)[t];if(n){var o=G()();e(Be(new Ia(o,n))),e(Ta(o)),e(ca(ia))}}}}))(li),ui=n(120),di=(n(155),n(110)),hi=n.n(di),fi=function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).setSelect=function(e){n.select=e},n.getComponents=function(){return{Option:function(e){var t=e.innerProps,n=t.innerRef,o=Object(ui.a)(t,["innerRef"]);return a.a.createElement("div",Object.assign({className:"singe-option ".concat(e.isFocused?"focused-option":""," ").concat(e.isSelected?"selected-option":"")},o,{ref:n,title:e.label}),e.label)}}},n.handleChange=function(e){e?n.props.onChange(e.value):n.props.onChange(null)},n.handleKeyDown=function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||!n.openedSelect||e.stopPropagation()},n.handleSelectOpen=function(){n.openedSelect=!0},n.handleSelectClose=function(){n.openedSelect=!1},n.handleClick=function(){m.a.isUndefined(n.props.id)||n.props.onSetSelection()},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="select-container "+(this.props.className||" "),t=m.a.find(this.props.options,["value",this.props.value]);return a.a.createElement("div",{className:e,tabIndex:"0",onKeyDown:this.handleKeyDown,onClick:this.handleClick},a.a.createElement("label",null,this.props.translate(H[this.props.label])," "),a.a.createElement(hi.a,{value:t,options:this.props.options,clearable:!1,isDisabled:this.props.disabled,onChange:this.handleChange,onOpen:this.handleSelectOpen,onClose:this.handleSelectClose,ref:this.setSelect,components:this.getComponents()}))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.select.focus(),!e.selected&&this.props.selected&&this.variableInput.focus(),e.selected&&!this.props.selected&&(this.variableInput.blur(),this.setState(Object(E.a)({},this.state,{isActiveVariable:!1})))}}]),t}(o.Component),yi=Object(c.b)(null,(function(e,t){var n=t.onSelect,o=t.id;return{onSetSelection:function(){return n(o)}}}))(fi),vi=(n(159),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).setCheckBox=function(e){n.checkBox=e},n.handleClick=function(){n.props.disabled||(n.props.onChange(!n.props.value),n.checkBox.focus(),m.a.isUndefined(n.props.id)||n.props.onSelect())},n.handleKeyDown=function(e){n.props.disabled||13!==e.which&&13!==e.keyCode||n.props.onChange(!n.props.value)},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e,t="check-box-container"+(this.props.className?" "+this.props.className:"")+(this.props.focused?" focused ":" ")+(this.props.selectedOnOtherTransitions?" selected-on-other-transition":" ")+(this.props.disabled?" check-box-container-disabled":""),n=this.props.disabled?" label-for-check-box-container-disabled":" label-for-check-box-container";return e=this.props.selectedOnOtherTransitions?this.props.selectedOnOtherTransitions?"indeterminate_check_box":"check_box_outline_blank":this.props.value?"check_box":"check_box_outline_blank",a.a.createElement("div",{ref:this.setCheckBox,className:t,"aria-labelledby":"".concat(this.props.groupLabelId||""," checkbox-label-").concat(this.props.label.replace(" ","-")),role:"checkbox","aria-checked":this.props.value,tabIndex:"0",onKeyDown:this.handleKeyDown,onClick:this.handleClick},a.a.createElement("i",{key:e,className:"material-icons"},e),a.a.createElement("label",{id:"checkbox-label-".concat(this.props.label.replace(" ","-")),className:n},this.props.translate(q[this.props.label])))}},{key:"componentDidMount",value:function(){this.props.focused&&this.checkBox.focus()}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.checkBox.focus(),e.disabled!==this.props.disabled&&this.props.disabled&&this.props.onChange(!1)}}]),t}(a.a.Component)),bi=Object(c.b)(null,(function(e,t){var n=t.onSelect,o=t.id;return{onSelect:function(){return n(o)}}}))(vi),mi=(n(160),n(161),function(e){function t(){return Object(g.a)(this,t),Object(x.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props.disabled?"icon-disabled":"icon-active",t=this.props.disabled?null:this.props.onClick,n=this.props.focused?" icon-focused ":"";return a.a.createElement("div",{title:this.props.title,role:"button","aria-label":this.props.title,className:e+n,onClick:t},a.a.createElement("i",{className:"material-icons"},this.props.icon))}}]),t}(o.Component)),gi=["select","duplicate","edit"],Pi=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setVariableItem=function(e){n.variableItem=e},n.handleClick=function(){n.props.onSetVariable(n.props.variable,n.props.position,n.props.inputValue,n.props.inputType)},n.handleMenuKeyDown=function(e){switch(e.key){case"ArrowRight":n.state.selectedElementIndexIcon<gi.length-1&&n.setState(Object(E.a)({},n.state,{selectedElementIndexIcon:n.state.selectedElementIndexIcon+1}));break;case"ArrowLeft":n.state.selectedElementIndexIcon>0&&n.setState(Object(E.a)({},n.state,{selectedElementIndexIcon:n.state.selectedElementIndexIcon-1}));break;case"Enter":switch(gi[n.state.selectedElementIndexIcon]){case"duplicate":n.props.onDuplicate();break;case"edit":n.props.onEdit();break;case"select":n.props.onSetVariable(n.props.variable,n.props.position,n.props.inputValue,n.props.inputType)}n.setState(Object(E.a)({},n.state,{selectedElementIndexIcon:0}))}},n.state={selectedElementIndexIcon:0},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="variable-item  ".concat(this.props.focused?"selected-variable-item":""),t=mo(this.props.variable);return a.a.createElement("li",{ref:this.setVariableItem,key:this.props.variable.id,className:e,tabIndex:"0",onKeyDown:this.handleMenuKeyDown},a.a.createElement("div",{className:"variable-value",title:t,onClick:this.handleClick},t),a.a.createElement("div",{className:"variable-menu"},a.a.createElement(mi,{icon:"insert_drive_file",title:this.props.translate("NG_PPE_VariableDuplicate_long"),disabled:!1,focused:"duplicate"===gi[this.state.selectedElementIndexIcon]&&this.props.focused,onClick:this.props.onDuplicate}),a.a.createElement(mi,{icon:"create",title:this.props.translate("NG_PPE_VariableEdit_long"),disabled:!1,focused:"edit"===gi[this.state.selectedElementIndexIcon]&&this.props.focused,onClick:this.props.onEdit})))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.variableItem.focus()}}]),t}(o.Component),xi=Object(c.b)(null,(function(e,t){var n=t.variable,o=t.onSelect,a=t.onVariableDuplicated,i=t.onVariableUpdated;return{onSetVariable:function(){return o(n)},onDuplicate:function(){return e(no("variable",n.id,a))},onEdit:function(){return e(oo("variable",n.id,i))}}}))(Pi),_i=n(80),Ii=n(112),Oi=(n(162),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setVariablesList=function(e){n.variablesList=e},n.setFixedVariablesList=function(e){n.fixedSizeList=e},n.handleKeyDown=function(e){switch(e.stopPropagation(),e.key){case"ArrowUp":e.preventDefault(),n.state.selectedVariableItemIndex>=0?(n.setState(Object(E.a)({},n.state,{selectedVariableItemIndex:n.state.selectedVariableItemIndex-1})),n.fixedSizeList.scrollToItem(n.state.selectedVariableItemIndex-1)):n.props.onExitVariable(e);break;case"ArrowDown":e.preventDefault(),n.state.selectedVariableItemIndex<n.props.variables.length-1&&(n.setState(Object(E.a)({},n.state,{selectedVariableItemIndex:n.state.selectedVariableItemIndex+1})),n.fixedSizeList.scrollToItem(n.state.selectedVariableItemIndex+1));break;case"Enter":e.preventDefault(),-1===n.state.selectedVariableItemIndex?n.props.onCreate():n.props.onSelect(n.props.variables[n.state.selectedVariableItemIndex]),n.props.onExitVariable(e);break;case"Escape":n.props.onExitVariable(e)}},n.state={selectedVariableItemIndex:-1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.isActive)return null;var t=function(t){var n=t.index,o=t.style;return a.a.createElement("div",{style:o},a.a.createElement(xi,{key:"".concat(e.props.variables[n].id,"-Item"),style:o,variable:e.props.variables[n],position:e.props.position,inputValue:e.props.inputValue,inputType:e.props.inputType,focused:e.props.variables[e.state.selectedVariableItemIndex]===e.props.variables[n]&&e.props.focused,translate:e.props.translate,onSelect:e.props.onSelect,onVariableUpdated:e.props.onSelect,onVariableDuplicated:e.props.onSelect}))};return a.a.createElement("ul",{ref:this.setVariablesList,className:"variables",tabIndex:"0",onKeyDown:this.handleKeyDown},a.a.createElement("li",{className:"variable-item  ".concat(-1===this.state.selectedVariableItemIndex?"selected-variable-item":""),onClick:this.props.onCreate},a.a.createElement("div",{className:"variable-value"},this.props.translate("NG_PPE_VariableCreate_long"))),a.a.createElement(Ii.a,null,(function(n){var o=n.height,i=n.width;return a.a.createElement(_i.FixedSizeList,{height:o-30,width:i,itemSize:30,itemCount:e.props.variables.length,ref:e.setFixedVariablesList},t)})))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&(this.setState(Object(E.a)({},this.state,{selectedVariableItemIndex:-1})),this.variablesList.focus())}}]),t}(o.Component)),Si=n(113),Ei=Object(c.b)((function(e){return{variables:vo(e),translate:Object(Si.getTranslate)(e.localize)}}),(function(e,t){var n=t.onVariableCreated;return{onCreate:function(){return e(to("variable",n))}}}))(Oi),Ti=(n(165),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setCheckBox=function(e){n.checkBox=e},n.handleClick=function(){n.props.disabled||(n.props.onChange(!n.props.value),n.checkBox.focus(),n.props.onSetSelection())},n.handleKeyDown=function(e){switch(n.props.disabled||13!==e.which&&13!==e.keyCode||n.props.onChange(!n.props.value),e.which){case 32:n.handleClickCheckboxVariable(e)}},n.handleClickCheckboxVariable=function(e){e.stopPropagation(),n.props.disabled||(n.setState({isActiveCheckBoxVariable:!n.state.isActiveCheckBoxVariable}),n.props.onSetSelection())},n.handleVariableSelect=function(e){n.props.onChange(e.id)},n.handleExitVariable=function(){n.setState({isActiveCheckBoxVariable:!1}),n.checkBox.focus()},n.state={isActiveCheckBoxVariable:!1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e,t,n,o="check-box-container"+(this.props.className?" "+this.props.className:"")+(this.props.focused?" focused ":" ")+(this.props.selectedOnOtherTransitions?" selected-on-other-transition":" ")+(this.props.disabled?" check-box-container-disabled":""),i=this.props.disabled?" label-for-check-box-container-disabled":" label-for-check-box-container",s=m.a.isPlainObject(this.props.value);return e=this.props.selectedOnOtherTransitions?this.props.selectedOnOtherTransitions?"indeterminate_check_box":"check_box_outline_blank":s?"indeterminate_check_box":this.props.value?"check_box":"check_box_outline_blank",s&&(t="tooltip-toggle",n=mo(this.props.value)),a.a.createElement("div",{ref:this.setCheckBox,className:o,"aria-labelledby":"".concat(this.props.groupLabelId||""," checkbox-label-").concat(this.props.label.replace(" ","-")),role:"checkbox","aria-checked":this.props.value,tabIndex:"0",onKeyDown:this.handleKeyDown,onClick:this.handleClick},a.a.createElement("span",{className:t,"data-tooltip":n,role:"tooltip",tabIndex:"0","aria-label":s?n:this.props.value},a.a.createElement("i",{key:e,className:"material-icons"},e)),a.a.createElement("span",{onClick:this.handleClickCheckboxVariable},a.a.createElement("i",{className:"material-icons arrow_drop_down"},"arrow_drop_down"),a.a.createElement(Ei,{className:"".concat(this.props.label,"-variables-group"),id:"".concat(this.props.label,"-variables-group"),isActive:this.state.isActiveCheckBoxVariable,focused:this.state.isActiveCheckBoxVariable,onSelect:this.handleVariableSelect,onExitVariable:this.handleExitVariable,onVariableCreated:this.handleVariableSelect})),a.a.createElement("label",{id:"checkbox-label-".concat(this.props.label.replace(" ","-")),className:i},this.props.translate(K[this.props.label])))}},{key:"componentDidMount",value:function(){this.props.focused&&this.checkBox.focus()}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.checkBox.focus(),!e.selected&&this.props.selected&&this.checkBox.focus(),e.selected&&!this.props.selected&&(this.checkBox.blur(),this.setState(Object(E.a)({},this.state,{isActiveCheckBoxVariable:!1})))}}]),t}(a.a.Component)),ki=Object(c.b)((function(e,t){var n=t.value,o=t.onSelect,a=t.id;return{value:m.a.isString(n)?bo(e,n):n,onSetSelection:function(){return o(a)}}}))(Ti),wi=(n(166),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).setInput=function(e){n.input=e},n.handleChange=function(e){n.props.disabled||n.props.onChange(e.target.value)},n.handleClick=function(){n.input.focus(),n.props.onSetSelection()},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="input "+(this.props.className||" ");return a.a.createElement("div",{className:e,tabIndex:"0",onClick:this.handleClick},a.a.createElement("label",{id:"input-label-".concat(this.props.label)},this.props.label),a.a.createElement("input",{ref:this.setInput,"aria-live":"polite","aria-labelledby":"input-label-".concat(this.props.label),value:this.props.value,disabled:this.props.disabled?"disabled":"",onChange:this.handleChange}))}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.input.focus()}}]),t}(o.Component)),Ci=Object(c.b)(null,(function(e,t){var n=t.onSelect,o=t.id;return{onSetSelection:function(){return n(o)}}}))(wi),ji=(n(167),"textarea"),Ni=[ji,"button"],Ai="right",Li="left",Ri="up",Di="down",Mi=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setVariableInput=function(e){n.variableInput=e},n.setVariablesContainer=function(e){n.variablesContainer=e},n.setAddButton=function(e){n.addButton=e},n.getVariablesContainerChildren=function(){var e=[];return m.a.map(n.state.vars,(function(t,o){0===o?e.push(n.state.value.slice(0,t.offset)):e.push(n.state.value.slice(n.state.vars[o-1].offset+n.state.vars[o-1].length,t.offset));var i=n.state.value.slice(t.offset,t.offset+t.length).split("\u25bc"),s=n.state.activeVariableIndex===o||m.a.includes(n.state.activeVariableRange,o)?"active-variable":"";e.push(a.a.createElement("span",{key:"variable_element_"+o,title:t.title,onClick:n.handleVariableClick,className:"variable-element "+s+(n.props.isLockedProcessPlan?" variable-element-disabled ":"")},i[0],a.a.createElement("span",{className:"variable-element-arrow",onClick:n.handleArrowDownClick},"\u25bc"),i[1])),o===n.state.vars.length-1&&e.push(n.state.value.slice(t.offset+t.length))})),0===n.state.vars.length&&e.push(n.state.value),e},n.convertToState=function(e){var t,o,a,i="",s=[];e.value&&(m.a.map(e.value.vars,(function(n,r){var c=m.a.find(e.variables,(function(e){return e.id===n.id}));0===r?(i+=e.value.value.slice(0,n.offset),t=n.offset+1):(i+=e.value.value.slice(e.value.vars[r-1].offset+e.value.vars[r-1].length,n.offset),t=i.length+1),a=mo(c),o="".concat("\xa0").concat(a.length>22?a.slice(0,21)+"\xa0\u2026":a).concat("\xa0").concat("\u25bc").concat("\xa0"),i+=" "+o+" ",r===e.value.vars.length-1&&(i+=e.value.value.slice(n.offset+n.length)),s.push({id:n.id,offset:t,length:o.length,title:a})})),m.a.isNil(e.value.vars)||0!==e.value.vars.length||(i=e.value.value)),n.setState({value:i,vars:s})},n.updateVariableContainerView=function(){n.variablesContainer.style.height=n.variableInput.offsetHeight+"px",n.variablesContainer.style.width=n.variableInput.offsetWidth+"px",n.variablesContainer.style.top=n.variableInput.offsetTop+"px",n.variablesContainer.style.left=n.variableInput.offsetLeft+"px",n.setState({textAreaHeight:n.variableInput.offsetHeight,variableInputWidth:n.variableInput.offsetWidth})},n.convertToProps=function(e,t){var o,a="",i=[];return m.a.map(t,(function(s,r){var c=m.a.find(n.props.variables,(function(e){return e.id===s.id})),l=c.type===Zn?c.value:"0";0===r?(a+=e.slice(0,s.offset-1),o=s.offset-1):(a+=e.slice(t[r-1].offset+t[r-1].length+1,s.offset-1),o=a.length),a+=l,r===t.length-1&&(a+=e.slice(s.offset+s.length+1)),i.push({id:s.id,offset:o,length:l.length})})),0===t.length&&(a=e),{value:a,vars:i}},n.handleInputChange=function(e){var t=e.target.value.length-n.state.value.length,o=Object(S.a)(n.state.vars),a=e.target.value;if(m.a.isNull(n.state.activeVariableIndex))o=m.a.map(o,(function(n){return n.offset>=e.target.selectionStart-t?Object(E.a)({},n,{offset:n.offset+t}):n})),n.setState({value:a,vars:o,cursorPosition:e.target.selectionStart});else{var i=n.state.vars[n.state.activeVariableIndex];i&&(m.a.remove(o,i),o=m.a.map(o,(function(e){return e.offset>i.offset?Object(E.a)({},e,{offset:e.offset-i.length+1}):e})),n.setState({value:a,vars:o,cursorPosition:i.offset-1,activeVariableIndex:null}))}n.props.onChange(n.convertToProps(a,o))},n.handleVariableSelect=function(e){var t=n.state.value,o=mo(e),a="".concat("\xa0").concat(o.length>22?o.slice(0,21)+"\xa0\u2026":o).concat("\xa0").concat("\u25bc").concat("\xa0"),i=n.state.vars,s=n.state.cursorPosition;if(n.state.changingActiveVariable&&n.state.vars[n.state.activeVariableIndex]){t=n.state.value.slice(0,n.state.vars[n.state.activeVariableIndex].offset)+a+n.state.value.slice(n.state.vars[n.state.activeVariableIndex].offset+n.state.vars[n.state.activeVariableIndex].length);var r=a.length-n.state.vars[n.state.activeVariableIndex].length;i=m.a.map(i,(function(t,o){return o===n.state.activeVariableIndex?Object(E.a)({},t,{id:e.id,length:a.length}):o>n.state.activeVariableIndex?Object(E.a)({},t,{offset:t.offset+r}):t})),s=n.state.vars[n.state.activeVariableIndex].offset+a.length+1,n.setState({changingActiveVariable:!1,activeVariableIndex:null})}else if(!m.a.isNull(n.state.activeVariableIndex)&&n.state.vars[n.state.activeVariableIndex]){var c=n.state.vars[n.state.activeVariableIndex];c&&(t=t.slice(0,c.offset-1)+t.slice(c.offset+c.length+1),m.a.remove(i,c),i=m.a.map(i,(function(e){return e.offset>c.offset?Object(E.a)({},e,{offset:e.offset-c.length-2}):e})),s=c.offset-1),t=t.slice(0,s)+" "+a+" "+t.slice(s);var l=0;(i=m.a.map(i,(function(e,t){return e.offset<s&&(t===i.length-1||i[t+1].offset-1>=s)&&(l=t+1),e.offset-1>=s?Object(E.a)({},e,{offset:e.offset+a.length+2}):e}))).splice(l,0,{id:e.id,offset:s+1,length:a.length,title:o}),s=s+a.length+2}else if(m.a.isNull(n.state.cursorPosition))i.push({id:e.id,offset:n.state.value.length+1,length:a.length,title:o}),t=n.state.value+" "+a+" ",s=n.state.value.length+a.length+2;else{if(0!==n.state.activeVariableRange.length){var p=n.state.selectionRangePosition.start,u=n.state.selectionRangePosition.end,d=u-p;t=t.slice(0,p)+t.slice(u,t.length),i=m.a.chain(i).filter((function(e,t){return!m.a.includes(n.state.activeVariableRange,t)})).map((function(e,t){return m.a.includes(n.state.activeVariableRange,t)||t>m.a.last(n.state.activeVariableRange)||e.offset>u?Object(E.a)({},e,{offset:e.offset-d}):Object(E.a)({},e)})).value(),s=p}t=t.slice(0,s)+" "+a+" "+t.slice(s);var h=0;(i=m.a.map(i,(function(e,t){return e.offset<s&&(t===i.length-1||i[t+1].offset-1>=s)&&(h=t+1),e.offset-1>=s?Object(E.a)({},e,{offset:e.offset+a.length+2}):e}))).splice(h,0,{id:e.id,offset:s+1,length:a.length,title:o}),s=s+a.length+2}n.setState({value:t,vars:i,cursorPosition:s,selectionRangePosition:{start:s,end:s},activeVariableRange:[],activeVariableIndex:null,focusedElementIndex:m.a.findIndex(Ni,(function(e){return e===ji})),isActiveVariable:!1,isModifiedVariable:!1}),n.variableInput.focus(),n.props.onChange(n.convertToProps(t,i))},n.handleExitVariable=function(){switch(n.setState({isActiveVariable:!1,isModifiedVariable:!1}),Ni[n.state.focusedElementIndex]){case ji:var e=n.state.vars[n.state.activeVariableIndex];n.setState({isActiveVariable:!1,activeVariableIndex:null,cursorPosition:m.a.isNil(e)?void 0:e.offset+e.length+1,changingActiveVariable:!1}),n.variableInput.focus();break;case"button":n.addButton.focus(),n.setState({isActiveVariable:!1})}},n.addNewVariable=function(){n.props.isLockedProcessPlan||n.state.isModifiedVariable||(n.setState({isActiveVariable:!n.state.isActiveVariable}),m.a.map(n.variablesContainer.children,(function(e){e.classList.remove("active-variable")})))},n.handleMouseDown=function(e){e.stopPropagation(),document.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(e){e.stopPropagation();var t=[],o=null;if(e.target.selectionStart===n.state.selectionRangePosition.start&&e.target.selectionEnd===n.state.selectionRangePosition.end)n.setState({activeVariableIndex:o,isActiveVariable:!1,activeVariableRange:t,focusedElementIndex:m.a.findIndex(Ni,(function(e){return e===ji}))});else if(n.variableInput.selectionStart===n.variableInput.selectionEnd?m.a.forEach(n.state.vars,(function(e,t){n.variableInput.selectionStart!==e.offset+e.length&&n.variableInput.selectionStart!==e.offset||(o=t)})):m.a.forEach(n.state.vars,(function(e,o){switch(n.variableInput.selectionDirection){case"forward":(e.offset>=n.variableInput.selectionStart&&e.offset<=n.variableInput.selectionEnd||e.offset+e.length===n.variableInput.selectionStart||e.offset===n.variableInput.selectionEnd)&&t.push(o);break;case"backward":e.offset+e.length<=n.variableInput.selectionEnd&&e.offset+e.length>=n.variableInput.selectionStart&&t.push(o)}})),t.length){var a=n.state.vars[m.a.head(t)],i=n.state.vars[m.a.last(t)],s=n.variableInput.selectionStart<a.offset?n.variableInput.selectionStart:a.offset,r=n.variableInput.selectionEnd<i.offset+i.length?i.offset+i.length:n.variableInput.selectionEnd;n.variableInput.setSelectionRange(s,r),n.setState({activeVariableIndex:o,isActiveVariable:!1,activeVariableRange:t,focusedElementIndex:m.a.findIndex(Ni,(function(e){return e===ji})),cursorPosition:"forward"===n.variableInput.selectionDirection?n.variableInput.selectionEnd:n.variableInput.selectionStart,selectionRangePosition:{start:s,end:r}})}else n.setState({activeVariableIndex:o,isActiveVariable:!1,activeVariableRange:t,focusedElementIndex:m.a.findIndex(Ni,(function(e){return e===ji})),cursorPosition:"forward"===n.variableInput.selectionDirection?n.variableInput.selectionEnd:n.variableInput.selectionStart,selectionRangePosition:{start:n.variableInput.selectionStart,end:n.variableInput.selectionEnd}});document.removeEventListener("mouseup",n.handleMouseUp)},n.handleVariableClick=function(e){if(!n.props.isLockedProcessPlan){var t=m.a.includes(e.target.className.split(/\s+/),"variable-element")?e.target:e.target.parentElement,o=m.a.findIndex(n.variablesContainer.children,t);-1!==o&&(n.setState({activeVariableIndex:o,cursorPosition:n.state.vars[o].offset+1,focusedElementIndex:m.a.findIndex(Ni,(function(e){return e===ji})),activeVariableRange:[],selectionRangePosition:{start:n.state.vars[o].offset,end:n.state.vars[o].offset+n.state.vars[o].length}}),n.variableInput.focus())}},n.handleArrowDownClick=function(){n.addNewVariable(),n.variableInput.selectionStart=n.state.cursorPosition+1,n.setState({changingActiveVariable:!0,isActiveVariable:!n.state.isActiveVariable,isModifiedVariable:!n.state.isModifiedVariable,cursorPosition:n.state.cursorPosition+1,activeVariableIndex:null})},n.selectRangeByKeyboard=function(e,t){var o=e.target.selectionStart,a=e.target.selectionEnd,i=[];m.a.forEach(n.state.vars,(function(e,n){e.offset>o&&e.offset+e.length<a?i.push(n):t===Ai?a>=e.offset&&a<=e.offset+e.length?(i.push(n),a=e.offset+e.length+1):o>=e.offset&&o<=e.offset+e.length&&(o=e.offset+e.length+1):t===Li&&(o>=e.offset&&o<=e.offset+e.length?(i.push(n),o=e.offset-1):a>=e.offset&&a<=e.offset+e.length&&(a=e.offset-1))})),n.setState({cursorPosition:o,activeVariableRange:i,selectionRangePosition:{start:o,end:a}})},n.removeVariableByIndex=function(e){var t=n.state.vars[e];if(t){var o=n.state.value.slice(0,t.offset-1)+n.state.value.slice(t.offset+t.length+1),a=Object(S.a)(n.state.vars);m.a.remove(a,t),a=m.a.map(a,(function(e){return e.offset>t.offset?Object(E.a)({},e,{offset:e.offset-t.length-2}):e})),n.setState({value:o,vars:a,cursorPosition:t.offset-1,activeVariableIndex:null}),n.props.onChange(n.convertToProps(o,a))}},n.handleScroll=function(){n.variableInput.scrollLeft=Math.round(n.variableInput.scrollLeft),n.variablesContainer.scrollLeft=n.variableInput.scrollLeft},n.handleScrollContainer=function(){n.variablesContainer.scrollLeft=Math.round(n.variablesContainer.scrollLeft),n.variableInput.scrollLeft=n.variablesContainer.scrollLeft},n.deleteRange=function(){var e=n.state.selectionRangePosition.start,t=n.state.selectionRangePosition.end,o=t-e,a=n.state.value.slice(0,e)+n.state.value.slice(t,n.state.value.length),i=Object(S.a)(n.state.vars);i=m.a.chain(i).filter((function(e,t){return!m.a.includes(n.state.activeVariableRange,t)})).map((function(e,a){return m.a.includes(n.state.activeVariableRange,a)||a>m.a.last(n.state.activeVariableRange)||e.offset>t?Object(E.a)({},e,{offset:e.offset-o}):Object(E.a)({},e)})).value(),n.setState({value:a,vars:i,cursorPosition:e,activeVariableRange:[],selectionRangePosition:{start:e,end:e}}),n.props.onChange(n.convertToProps(a,i))},n.deleteFullWord=function(e){if(m.a.isNull(n.state.activeVariableIndex))if(n.state.selectionRangePosition.start===n.state.selectionRangePosition.end){var t=e.target.selectionStart,o=n.state.value.slice(t).match(/\s+/),a=m.a.isNull(o)?n.state.value.length+1:t+o.index,i=[];if(t===a){var s=m.a.findIndex(n.state.vars,(function(e){return e.offset+1===a+o[0].length}));-1!==s?n.state.vars[s].offset-1===a?(a=n.state.vars[s].offset+n.state.vars[s].length+1,i.push(s)):a=n.state.vars[s].offset-1:a+=o[0].length}n.setState({cursorPosition:t,selectionRangePosition:{start:t,end:a},activeVariableRange:i},n.deleteRange)}else n.deleteRange();else n.removeVariableByIndex(n.state.activeVariableIndex)},n.deleteFullWordByBackspace=function(e){if(m.a.isNull(n.state.activeVariableIndex))if(n.state.selectionRangePosition.start===n.state.selectionRangePosition.end){var t=e.target.selectionStart,o=n.state.value.slice(0,t).match(/[^\s]*\s*$/),a=m.a.isNull(o)?0:o.index,i=[],s=m.a.findIndex(n.state.vars,(function(e){return e.offset+e.length-2===a}));-1!==s&&(a=n.state.vars[s].offset-1,i.push(s)),n.setState({cursorPosition:a,selectionRangePosition:{start:a,end:t},activeVariableRange:i},n.deleteRange)}else n.deleteRange();else n.removeVariableByIndex(n.state.activeVariableIndex)},n.handleCursorPositionChanged=function(e,t){var o=e.target.selectionStart;e.target.selectionEnd!==n.state.selectionRangePosition.end+1&&"right"===t?o=e.target.selectionEnd+1:e.target.selectionEnd!==n.state.selectionRangePosition.end+1&&"down"===t?o=n.state.value.length:e.target.selectionStart!==n.state.selectionRangePosition.start+1&&"up"===t&&(o=0);var a=null;m.a.forEach(n.state.vars,(function(e,n){o===e.offset&&t===Li?o=e.offset-1:o===e.offset+2&&t===Ai?o=e.offset+e.length+1:e.offset<=o&&e.offset+e.length>=o&&(a=n,o=e.offset+1)})),n.setState({activeVariableIndex:a,activeVariableRange:[],cursorPosition:o,selectionRangePosition:{start:o,end:o}})},n.handleKeyDown=function(e){var t;if(!n.state.isActiveVariable)if(e.ctrlKey)65===e.which?(e.preventDefault(),e.target.selectionStart=0,e.target.selectionEnd=n.state.value.length,n.selectRangeByKeyboard(e)):8===e.which?(e.preventDefault(),n.deleteFullWordByBackspace(e)):46===e.which&&(e.preventDefault(),n.deleteFullWord(e));else if(e.altKey)switch(e.key){case"ArrowLeft":e.preventDefault(),n.state.focusedElementIndex>0&&(e.stopPropagation(),n.setState({focusedElementIndex:n.state.focusedElementIndex-1}));break;case"ArrowRight":e.preventDefault(),n.state.focusedElementIndex<Ni.length-1&&(e.stopPropagation(),n.setState({focusedElementIndex:n.state.focusedElementIndex+1}))}else if(!e.shiftKey)switch(e.key){case"ArrowDown":n.state.selectionRangePosition.end!==n.state.selectionRangePosition.start&&(e.preventDefault(),e.target.selectionStart=n.state.selectionRangePosition.end,e.target.selectionEnd=n.state.selectionRangePosition.end);break;case"ArrowUp":n.state.selectionRangePosition.end!==n.state.selectionRangePosition.start&&(e.preventDefault(),e.target.selectionStart=n.state.selectionRangePosition.start,e.target.selectionEnd=n.state.selectionRangePosition.start);break;case"Enter":case"Return":"button"!==Ni[n.state.focusedElementIndex]||n.state.isActiveVariable?Ni[n.state.focusedElementIndex]!==ji||m.a.isNull(n.state.activeVariableIndex)?n.props.multiLine||e.preventDefault():(e.preventDefault(),n.setState({changingActiveVariable:!0}),n.addNewVariable()):(e.preventDefault(),n.addNewVariable());break;case"PageUp":n.setState({cursorPosition:0}),n.variableInput.scrollLeft=0,n.variablesContainer.scrollLeft=0;break;case"PageDown":n.setState({cursorPosition:n.variableInput.value.length+1});var o=n.variableInput.scrollWidth-n.variableInput.clientWidth;n.variableInput.scrollLeft=o,n.variablesContainer.scrollLeft=o;break;case"Delete":Ni[n.state.focusedElementIndex]===ji&&(0!==n.state.activeVariableRange.length?(e.preventDefault(),n.deleteRange()):(t=n.state.activeVariableIndex,m.a.isNull(t)&&m.a.map(n.state.vars,(function(n,o){e.target.selectionStart===n.offset-1&&(t=o)})),m.a.isNull(t)||(e.preventDefault(),n.removeVariableByIndex(t))));break;case"Backspace":Ni[n.state.focusedElementIndex]===ji&&(0!==n.state.activeVariableRange.length?(e.preventDefault(),n.deleteRange()):(t=n.state.activeVariableIndex,m.a.isNull(t)&&m.a.map(n.state.vars,(function(n,o){e.target.selectionStart===n.offset+n.length+1&&(t=o)})),m.a.isNull(t)||(e.preventDefault(),n.removeVariableByIndex(t))));break;default:"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&0!==n.state.activeVariableRange.length&&n.deleteRange()}},n.handleKeyUp=function(e){if(!n.state.isActiveVariable)if(e.ctrlKey){if(e.shiftKey)switch(e.key){case"End":n.variableInput.scrollLeft=n.variableInput.scrollWidth-n.variableInput.clientWidth,n.variablesContainer.scrollLeft=n.variableInput.scrollWidth-n.variableInput.clientWidth,e.target.selectionEnd=n.state.value.length,n.selectRangeByKeyboard(e,Ai);break;case"PageDown":case"ArrowDown":0===e.target.selectionStart&&e.target.selectionEnd!==e.target.selectionStart?e.target.selectionStart=e.target.selectionEnd:(n.variableInput.scrollLeft=n.variableInput.scrollWidth-n.variableInput.clientWidth,n.variablesContainer.scrollLeft=n.variableInput.scrollWidth-n.variableInput.clientWidth,e.target.selectionEnd=n.state.value.length),n.selectRangeByKeyboard(e,Ai);break;case"Home":n.variableInput.scrollLeft=0,n.variablesContainer.scrollLeft=0,e.target.selectionStart=0,n.selectRangeByKeyboard(e,Li);break;case"PageUp":case"ArrowUp":e.target.selectionEnd===n.state.value.length&&e.target.selectionStart!==e.target.selectionEnd?e.target.selectionEnd=e.target.selectionStart:(n.variableInput.scrollLeft=0,n.variablesContainer.scrollLeft=0,e.target.selectionStart=0),n.selectRangeByKeyboard(e,Li);break;case"ArrowLeft":n.selectRangeByKeyboard(e,Li);break;case"ArrowRight":m.a.forEach(n.state.vars,(function(t){t.offset+1===e.target.selectionEnd?e.target.selectionEnd=t.offset-1:t.offset+1===e.target.selectionStart&&(e.target.selectionStart=t.offset-1)})),n.selectRangeByKeyboard(e,Ai)}}else if(e.shiftKey)switch(e.key){case"Home":case"ArrowUp":case"ArrowLeft":n.selectRangeByKeyboard(e,Li);break;case"End":case"ArrowDown":case"ArrowRight":n.selectRangeByKeyboard(e,Ai);break;case"PageDown":0===e.target.selectionStart&&e.target.selectionEnd!==e.target.selectionStart?e.target.selectionStart=e.target.selectionEnd:e.target.selectionEnd=n.state.value.length,n.selectRangeByKeyboard(e,Ai);break;case"PageUp":e.target.selectionEnd===n.state.value.length&&e.target.selectionStart!==e.target.selectionEnd?e.target.selectionEnd=e.target.selectionStart:e.target.selectionStart=0,n.selectRangeByKeyboard(e,Li)}else switch(e.key){case"ArrowRight":n.handleCursorPositionChanged(e,Ai);break;case"ArrowLeft":n.handleCursorPositionChanged(e,Li);break;case"ArrowDown":n.handleCursorPositionChanged(e,Di);break;case"ArrowUp":n.handleCursorPositionChanged(e,Ri)}},n.handleClick=function(){m.a.isUndefined(n.props.id)||n.props.onSetSelection()},n.state={isActiveVariable:!1,isModifiedVariable:!1,activeVariableIndex:null,value:"",vars:[],cursorPosition:null,textAreaHeight:0,focusedElementIndex:0,changingActiveVariable:!1,variableInputWidth:0,activeVariableRange:[],selectionRangePosition:{start:null,end:null},keyCombinationPressed:!1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="input "+(this.props.className||" "),t="input-".concat(this.props.label);return a.a.createElement("div",{className:e,tabIndex:"0",onClick:this.handleClick},a.a.createElement("label",{id:"input-label-".concat(this.props.label)},this.props.label),a.a.createElement("div",{className:"variable-input-container",onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp},a.a.createElement("div",{id:t,className:"variable-input"},a.a.createElement("textarea",{id:"variable_input_textarea",className:"variable-input-textarea textarea-".concat(this.props.label),ref:this.setVariableInput,value:this.state.value,disabled:this.props.isLockedProcessPlan?"disabled":"",onChange:this.handleInputChange,onDrop:function(e){return e.preventDefault()},onMouseDown:this.handleMouseDown,onScroll:this.handleScroll}),a.a.createElement(Ei,{className:"".concat(this.props.label,"-variables-group"),id:"".concat(this.props.label,"-variables-group"),isActive:this.state.isActiveVariable,inputValue:this.state.inputValue,inputType:this.props.label,focused:this.state.isActiveVariable,translate:this.props.translate,onSelect:this.handleVariableSelect,onExitVariable:this.handleExitVariable,onVariableCreated:this.handleVariableSelect})),a.a.createElement("span",{title:this.props.translate("NG_PPE_Add_variable_long"),id:"btn_add_variable_"+m.a.snakeCase(this.props.label),ref:this.setAddButton,role:"button","aria-label":this.props.translate("NG_PPE_Add_variable_long"),className:"btn-add-variable"+(this.props.isLockedProcessPlan||this.state.isModifiedVariable?" btn-add-variable-disabled":""),onClick:this.addNewVariable,tabIndex:0},a.a.createElement("i",{className:"material-icons"},"add_box"))),a.a.createElement("div",{className:"variables-container",ref:this.setVariablesContainer,onScroll:this.handleScrollContainer},this.getVariablesContainerChildren()))}},{key:"componentDidMount",value:function(){this.convertToState(this.props),this.updateVariableContainerView(),window.addEventListener("resize",this.updateVariableContainerView)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateVariableContainerView)}},{key:"componentDidUpdate",value:function(e,t){if(m.a.isNil(e.value)&&!m.a.isNil(this.props.value)&&this.convertToState(this.props),e.value!==this.props.value&&this.convertToState(this.props),this.state.textAreaHeight!==this.variableInput.offsetHeight&&this.updateVariableContainerView(),this.state.value.length>t.value.length&&(this.variableInput.style.height=this.variableInput.scrollHeight+"px",this.updateVariableContainerView()),this.state.cursorPosition!==this.variableInput.selectionStart&&this.state.selectionRangePosition.start===this.state.selectionRangePosition.end&&(this.variableInput.selectionStart=this.state.cursorPosition,this.variableInput.selectionEnd=this.state.cursorPosition),!e.focused&&this.props.focused&&(Ni[this.state.focusedElementIndex]===ji?(this.variableInput.focus(),this.setState({cursorPosition:this.state.value.length})):this.addButton.focus()),this.state.focusedElementIndex!==t.focusedElementIndex&&(Ni[this.state.focusedElementIndex]===ji?this.variableInput.focus():this.addButton.focus()),this.variableInput.offsetWidth===t.variableInputWidth&&this.variableInput.offsetTop===m.a.parseInt(this.variablesContainer.style.top)||this.updateVariableContainerView(),this.state.selectionRangePosition.start===t.selectionRangePosition.start&&this.state.selectionRangePosition.end===t.selectionRangePosition.end||(this.variableInput.selectionStart=this.state.selectionRangePosition.start,this.variableInput.selectionEnd=this.state.selectionRangePosition.end),this.state.cursorPosition!==t.cursorPosition){var n=this.variableInput.scrollWidth-this.variableInput.clientWidth,o=n/this.variableInput.textLength,a=(this.state.cursorPosition-t.cursorPosition)*o;this.state.cursorPosition===this.variableInput.textLength||this.state.cursorPosition===this.variableInput.textLength-1?(this.variableInput.scrollLeft=n,this.variablesContainer.scrollLeft=n):(this.state.cursorPosition,t.cursorPosition,this.variableInput.scrollLeft=this.variableInput.scrollLeft+a,this.variablesContainer.scrollLeft=this.variablesContainer.scrollLeft+a)}this.state.isModifiedVariable!==t.isModifiedVariable&&(this.variableInput.selectionStart=this.state.selectionRangePosition.start,this.variableInput.selectionEnd=this.state.selectionRangePosition.end),!e.selected&&this.props.selected&&this.variableInput.focus(),e.selected&&!this.props.selected&&(this.variableInput.blur(),this.setState(Object(E.a)({},this.state,{isActiveVariable:!1})))}}]),t}(o.Component),Gi=Object(c.b)((function(e){return{variables:vo(e),translate:Object(v.c)(e.localize)}}),(function(e,t){var n=t.onSelect,o=t.id;return{onSetSelection:function(){return n(o)}}}))(Mi),zi=(n(168),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setCheckBoxGroup=function(e){n.checkBoxGroup=e},n.renderOption=function(e){return n.checkboxes.push(e.value),a.a.createElement(vi,{key:e.value,id:n.props.id,label:e.label,groupLabelId:"checkbox-group-label-".concat(n.props.label),focused:n.checkboxes[n.state.selectedCheckBoxIndex]===e.value&&n.props.focused,value:m.a.includes(n.props.values,e.value),selectedOnOtherTransitions:m.a.includes(n.props.selectedOptions,e.value),disabled:n.props.disabled,translate:n.props.translate,onChange:n.handleChangeOption(e.value),onSelect:n.props.onSetSelection})},n.handleChangeOption=function(e){return function(t){t?n.props.onChange([].concat(Object(S.a)(n.props.values),[e])):n.props.onChange(m.a.filter(n.props.values,(function(t){return t!==e})))}},n.handleKeyDown=function(e){switch(e.key){case"ArrowDown":n.state.selectedCheckBoxIndex<n.checkboxes.length-1&&(e.stopPropagation(),n.setState(Object(E.a)({},n.state,{selectedCheckBoxIndex:n.state.selectedCheckBoxIndex+1})));break;case"ArrowUp":n.state.selectedCheckBoxIndex>0&&(e.stopPropagation(),n.setState(Object(E.a)({},n.state,{selectedCheckBoxIndex:n.state.selectedCheckBoxIndex-1})))}},n.checkboxes=[],n.state={selectedCheckBoxIndex:0},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="checkbox-group "+(this.props.className||" ");return 0!==this.checkboxes.length&&(this.checkboxes=[]),a.a.createElement("div",{className:e,ref:this.setCheckBoxGroup,tabIndex:"0",onKeyDown:this.handleKeyDown},a.a.createElement("label",{id:"checkbox-group-label-".concat(this.props.label)},this.props.translate(q[this.props.label])),a.a.createElement("div",null,m.a.map(this.props.options,this.renderOption)))}}]),t}(o.Component)),Vi=Object(c.b)(null,(function(e,t){var n=t.onSelect,o=t.id;return{onSetSelection:function(){return n(o)}}}))(zi),Ui=n(38),Fi=(n(177),n(178),n(179),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).setRadioButton=function(e){n.radioButton=e},n.handleClick=function(){n.props.disabled||n.props.onChange(!n.props.value),n.radioButton.focus()},n.handleKeyDown=function(e){n.props.disabled||13!==e.which&&13!==e.keyCode||n.props.onChange(!n.props.value)},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e="radio-button-container"+(this.props.className?" "+this.props.className:"")+(this.props.focused?" focused ":" ")+(this.props.selectedOnOtherTransitions?" selected-on-other-transition":" ")+(this.props.disabled?" radio-button-container-disabled":""),t=this.props.disabled?" label-for-radio-button-container-disabled":" label-for-radio-button-container",n=this.props.value?"radio_button_checked":"radio_button_unchecked";return a.a.createElement("div",{ref:this.setRadioButton,className:e,"aria-labelledby":"".concat(this.props.groupLabelId||""," radioButton-label-").concat(this.props.label.replace(" ","-")),role:"checkbox","aria-checked":this.props.value,tabIndex:"0",onKeyDown:this.handleKeyDown,onClick:this.handleClick},a.a.createElement("i",{key:n,className:"material-icons"},n),a.a.createElement("label",{id:"radioButton-label-".concat(this.props.label.replace(" ","-")),className:t},this.props.translate(Z[this.props.label])))}},{key:"componentDidMount",value:function(){this.props.focused&&this.radioButton.focus()}},{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.radioButton.focus(),e.disabled!==this.props.disabled&&this.props.disabled&&this.props.onChange(!1)}}]),t}(a.a.Component)),Bi=n(19),Hi=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).handleTemplateOptionsChange=function(e){n.props.onPropertyChange(n.props.transitionId,{type:"overview_report",details:n.props.details,template:m.a.isUndefined(e)?m.a.find(n.props.templateOptions,(function(e){return m.a.isEqual(e.value,"")})).value:e.value}),n.props.onSetModalCount()},n.highlightingCheckedChange=function(){n.state.highlightingProblems?n.props.onPropertyChange(n.props.transitionId,{type:"overview_report",details:"",template:n.props.template}):n.props.onPropertyChange(n.props.transitionId,{type:"overview_report",details:"mask_report",template:n.props.template}),n.props.onSetModalCount(),n.setState({highlightingProblems:!n.state.highlightingProblems})},n.maskCheckedChange=function(){n.state.highlightingProblems&&"mask_report"!==n.props.details&&(n.props.onSetModalCount(),n.props.onPropertyChange(n.props.transitionId,{type:"overview_report",details:"mask_report",template:n.props.template}))},n.layerCheckedChange=function(){n.state.highlightingProblems&&"layer_report"!==n.props.details&&(n.props.onSetModalCount(),n.props.onPropertyChange(n.props.transitionId,{type:"overview_report",details:"layer_report",template:n.props.template}))},n.toggleModal=function(){n.props.onSetModal(!n.props.modalIsOpen)},n.handleSelect=function(e){n.setState(Object(E.a)({},n.state,{selectedPropertyIndex:m.a.findIndex(n.properties,(function(t){return t===e}))}))},n.state={highlightingProblems:"mask_report"===n.props.details||"layer_report"===n.props.details},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(Bi.f,{className:"process-plan-json-modal",isOpen:this.props.modalIsOpen,toggle:this.toggleModal,fade:0===this.props.modalIsOpenCount,role:"dialog"},a.a.createElement(Bi.i,{toggle:this.toggleModal}),a.a.createElement(Bi.g,{className:"modal-pdf-overview"},a.a.createElement(Ui.c,{id:"modal-select",options:this.props.templateOptions,value:m.a.isUndefined(this.props.template)?m.a.find(this.props.templateOptions,(function(e){return m.a.isEqual(e.value,"")})):m.a.find(this.props.templateOptions,(function(t){return m.a.isEqual(t.value,e.props.template)})),ref:this.setSelect,isDisabled:!1,onChange:this.handleTemplateOptionsChange,onSelect:this.handleSelect}),a.a.createElement(vi,{id:"modal-CheckBox",value:this.state.highlightingProblems,label:"Problems highlighting",groupLabelId:"Modal",focused:!1,disabled:!1,translate:this.props.translate,onChange:this.highlightingCheckedChange,onSelect:this.handleSelect}),a.a.createElement("div",{className:"details"},a.a.createElement(Fi,{value:"mask_report"===this.props.details&&this.state.highlightingProblems||""===this.props.details,label:"Transparent masks",groupLabelId:"Modal",focused:!1,disabled:!this.state.highlightingProblems,translate:this.props.translate,onChange:this.maskCheckedChange}),a.a.createElement(Fi,{value:"layer_report"===this.props.details&&this.state.highlightingProblems,label:"Layers",groupLabelId:"Modal",focused:!1,disabled:!this.state.highlightingProblems,translate:this.props.translate,onChange:this.layerCheckedChange}))),a.a.createElement(Bi.h,null))}}]),t}(o.Component),Ki=Object(c.b)((function(e){return{}}),(function(e,t){var n=t.onSelectModal,o=t.onCount,a=t.onSelect,i=t.id;return{onPropertyChange:function(t,n){e(Be(new _o(t,"pdf_overview_details",n)))},onSetModal:function(e){return n(e)},onSetModalCount:function(){return o()},onSetSelection:function(){return a(i)}}}))(Hi),Wi=["checkbox","select"],Yi=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setSelect=function(e){n.select=e},n.handleCheckedChange=function(e){n.props.onChange(Object(E.a)({},n.props.value,{checked:e}))},n.handleSelectedOptionsChange=function(e){n.props.onChange(Object(E.a)({},n.props.value,{values:m.a.map(e,(function(e){return"overview_report"===e.value?{type:e.value,details:"",template:m.a.find(n.props.templateOptions,(function(e){return m.a.isEqual(e.value,"")})).value}:{type:e.value}}))}))},n.handleKeyDown=function(e){switch(e.key){case"ArrowDown":n.state.openedSelect?e.stopPropagation():n.state.selectedElementIndex<Wi.length-1&&n.props.value.checked&&(e.stopPropagation(),n.setState(Object(E.a)({},n.state,{selectedElementIndex:n.state.selectedElementIndex+1})));break;case"ArrowUp":n.state.openedSelect?e.stopPropagation():n.state.selectedElementIndex>0&&(e.stopPropagation(),n.setState(Object(E.a)({},n.state,{selectedElementIndex:n.state.selectedElementIndex-1})))}38!==e.which&&40!==e.which||!n.openedSelect||e.stopPropagation()},n.handleSelectOpen=function(){n.props.value.values.length!==n.props.options.length&&n.setState(Object(E.a)({},n.state,{openedSelect:!0}))},n.handleSelectClose=function(){n.setState(Object(E.a)({},n.state,{openedSelect:!1}))},n.handleMultiValueClick=function(e,t){e.stopPropagation(),e.preventDefault(),n.setState(Object(E.a)({},n.state,{modalIsOpen:!0,modalOpenCount:0}))},n.handleSetModal=function(e){n.setState(Object(E.a)({},n.state,{modalIsOpen:e}))},n.handleSetModalCount=function(){n.setState(Object(E.a)({},n.state,{modalOpenCount:n.state.modalOpenCount+1}))},n.state={selectedElementIndex:0,openedSelect:!1,modalIsOpen:!1,modalOpenCount:0},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this,t="checkable-multi-select "+(this.props.className||" "),n=m.a.chain(this.props.options).map("options").flatten().value(),o=this.props.value.values.map((function(e){return m.a.find(n,(function(t){return m.a.isEqual(t.value,e.type)}))}));return a.a.createElement("div",{className:t,tabIndex:"0",onKeyDown:this.handleKeyDown},a.a.createElement(vi,{id:this.props.id,value:this.props.value.checked,label:this.props.label,groupLabelId:this.props.groupLabelId,focused:"checkbox"===Wi[this.state.selectedElementIndex]&&this.props.focused,disabled:this.props.disabled,translate:this.props.translate,onChange:this.handleCheckedChange,onSelect:this.props.onSetSelection}),a.a.createElement(Ui.c,{id:this.props.id,components:{MultiValueContainer:function(t){var n=m.a.find(e.props.value.values,(function(e){return"overview_report"===e.type}));return a.a.createElement("div",null,a.a.createElement(Ui.b.MultiValueContainer,t,t.children[0],"overview_report"===t.children[0]._owner.key?a.a.createElement("div",{className:"report-edit-icon",onMouseDown:function(n){return e.handleMultiValueClick(n,t)}},a.a.createElement("i",{className:"material-icons"},"edit")):a.a.createElement("i",null),t.children[1]),e.state.modalIsOpen&&"overview_report"===t.children[0]._owner.key?a.a.createElement(Ki,{translate:e.props.translate,transitionId:e.props.parentId,details:n.details,template:n.template,templateOptions:e.props.templateOptions,modalIsOpen:e.state.modalIsOpen,modalIsOpenCount:e.state.modalOpenCount,onCount:e.handleSetModalCount,onSelectModal:e.handleSetModal}):a.a.createElement(a.a.Fragment,null))}},options:this.props.options,value:o,ref:this.setSelect,isDisabled:!!this.props.disabled||!this.props.value.checked,onChange:this.handleSelectedOptionsChange,onClose:this.handleSelectClose,onOpen:this.handleSelectOpen,onSelect:this.props.onSetSelection,isMulti:!0}))}},{key:"componentDidUpdate",value:function(e,t){"select"!==Wi[t.selectedElementIndex]&&"select"===Wi[this.state.selectedElementIndex]&&this.select.focus(),e.disabled!==this.props.disabled&&this.props.disabled&&(this.handleSelectedOptionsChange([]),this.props.onChange(Object(E.a)({},this.props.value,{values:[],checked:!1})))}}]),t}(o.Component),qi=Object(c.b)((function(e){return{templateOptions:Po(e)}}),(function(e,t){var n=t.onSelect,o=t.id;return{onSetSelection:function(){return n(o)}}}))(Yi),Zi=(n(185),function(e){function t(){var e,n;Object(g.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){n.props.onSetSelection()},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=m.a.isNil(this.props.value)||this.props.disabled;return a.a.createElement("div",{onClick:this.handleClick},a.a.createElement("div",{className:"external-object-editor"},a.a.createElement(mi,{icon:"add",title:this.props.translate(U[this.props.type]),disabled:this.props.disabled,onClick:this.props.onCreate}),a.a.createElement(mi,{icon:"insert_drive_file",title:this.props.translate(B[this.props.type]),disabled:e,onClick:this.props.onDuplicate}),a.a.createElement(mi,{icon:"create",title:this.props.translate(F[this.props.type]),disabled:e,onClick:this.props.onEdit})),a.a.createElement(fi,{id:this.props.id,className:"property",label:this.props.label,value:this.props.value,options:this.props.options,disabled:this.props.disabled,translate:this.props.translate,onChange:this.props.onChange,onSetSelection:this.props.onSetSelection}))}}]),t}(o.Component)),Xi=Object(c.b)(null,(function(e,t){var n=t.type,o=t.value,a=t.onSelect,i=t.id;return{onCreate:function(){return e(to(n))},onDuplicate:function(){return e(no(n,o))},onEdit:function(){return e(oo(n,o))},onSetSelection:function(){return a(i)}}}))(Zi),Ji=(n(186),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setPropPanel=function(e){n.propPanel=e},n.renderPropertyGroups=function(){return m.a.isNil(n.props.propertyGroups)?null:(0!==n.properties.length&&(n.properties=[]),m.a.map(n.props.propertyGroups,(function(e){var t=m.a.isNil(e.name)?null:a.a.createElement("label",null,n.props.translate(q[e.name]));return a.a.createElement("div",{className:"property-group",key:t},t,m.a.map(e.properties,n.renderProperty))})))},n.renderProperty=function(e){var t="".concat(e.name,"-").concat(n.props.objectId);n.properties.push(t);var o=n.handlePropertyChange(e.objectId,e.name),i=m.a.isNil(e.controlDescriptor.group)?" ":"group-label-".concat(e.controlDescriptor.group.replace(" ","-"));switch(e.controlDescriptor.type){case"external-object-select":return a.a.createElement(Xi,{key:t,className:"property",id:t,type:e.type,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,value:e.value,options:e.controlDescriptor.options,disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"select":return a.a.createElement(yi,{key:t,className:"property",id:t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,value:e.value,options:e.controlDescriptor.options,disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"checkbox":return a.a.createElement(bi,{key:t,className:"property"+(e.disabled?" disabledProperty ":""),id:t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,groupLabelId:i,label:e.controlDescriptor.label,value:e.value||!1,disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"variable-checkbox":return a.a.createElement(ki,{key:t,className:"property",id:t,selected:n.properties[n.state.selectedPropertyIndex]===t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,groupLabelId:i,label:e.controlDescriptor.label,value:e.value||!1,disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"input":return a.a.createElement(Ci,{key:t,className:"property",id:t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,value:e.value||"",disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"variable-input":return a.a.createElement(Gi,{key:t,className:"property",id:t,selected:n.properties[n.state.selectedPropertyIndex]===t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,value:e.value||"",isLockedProcessPlan:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect,multiLine:!0});case"checkbox-group":return a.a.createElement(Vi,{key:t,className:"property",id:t,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,values:e.value,options:e.controlDescriptor.options,selectedOptions:e.controlDescriptor.selectedOptions,disabled:e.disabled||n.props.isLockedProcessPlan,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});case"checkable-multiselect":return a.a.createElement(qi,{key:t,className:"property"+(e.disabled?" disabledProperty ":""),id:t,value:e.value,focused:n.properties[n.state.selectedPropertyIndex]===t&&n.props.selected,label:e.controlDescriptor.label,groupLabelId:i,options:e.controlDescriptor.options,disabled:e.disabled||n.props.isLockedProcessPlan,parentId:n.props.objectId,translate:n.props.translate,onChange:o,onSelect:n.handleSelect});default:return null}},n.handlePropertyChange=function(e,t){return function(o){n.props.onPropertyChange(e,t,o)}},n.handleKeyDown=function(e){switch(e.key){case"ArrowDown":n.state.selectedPropertyIndex<n.properties.length-1&&n.setState(Object(E.a)({},n.state,{selectedPropertyIndex:n.state.selectedPropertyIndex+1}));break;case"ArrowUp":n.state.selectedPropertyIndex>0&&n.setState(Object(E.a)({},n.state,{selectedPropertyIndex:n.state.selectedPropertyIndex-1}))}},n.handleSelect=function(e){n.setState(Object(E.a)({},n.state,{selectedPropertyIndex:m.a.findIndex(n.properties,(function(t){return t===e}))}))},n.properties=[],n.state={selectedPropertyIndex:0},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"properties-panel",ref:this.setPropPanel,onKeyDown:this.handleKeyDown,id:"properties-panel",tabIndex:"0"},a.a.createElement(si,{children:this.renderPropertyGroups(),isLockedProcessPlan:this.props.isLockedProcessPlan}))}},{key:"componentDidUpdate",value:function(e){this.props.objectId!==e.objectId&&this.setState(Object(E.a)({},this.state,{selectedPropertiesIndex:0}))}}]),t}(o.Component)),Qi=Object(c.b)((function(e){var t=Ro(e),n=m.a.chain(t).map((function(e){return e.properties})).flatten().map((function(e){return"checkbox-group"===e.controlDescriptor.type?e.controlDescriptor.options.length:wo[e.controlDescriptor.type]})).sum().value();return{objectId:je(e),propertyGroups:Ro(e),selectablePropertiesNumber:n,selected:"side-panel"===ya(e),translate:Object(v.c)(e.localize)}}),(function(e){return{onPropertyChange:function(t,n,o){e("types"===n?function(e,t){return function(n,o){var a=Ne(Te(o()),e),i=Mo(o(),"types",a);m.a.forEach(i,(function(o){if(o.transitionId!==e){var a=m.a.difference(o.value,t);m.a.isEqual(a,o.value)||n(Be(new _o(o.transitionId,"types",a)))}})),n(Be(new _o(e,"types",t)))}}(t,o):Be(new _o(t,n,o)))}}}))(Ji),$i=Object(c.b)((function(e){var t=ni(e),n=m.a.chain(t).map((function(e){return e.properties})).flatten().map((function(e){return Io[e.controlDescriptor.type]})).sum().value();return{objectId:Hn(e),propertyGroups:ni(e),selectablePropertiesNumber:n,selected:"side-panel"===ya(e),translate:Object(v.c)(e.localize)}}),(function(e){return{onPropertyChange:function(t,n,o){e(Be(new Ze(t,n,o)))}}}))(Ji),es=(n(187),function(e){function t(e){var n;Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).handleClick=function(e){e.stopPropagation()},n.handleAuthorChange=function(e){n.props.onChangeAuthor(e.target.value)},n.handleEmailChange=function(e){n.props.onChangeEmail(e.target.value)},n.handleCommentChange=function(e){n.props.onChangeComment(e)},n.handleGroupChange=function(e,t){switch(t.action){case"select-option":n.setState({selectedGroupOption:e});break;case"create-option":var o=n.state.groupOptions;o.push(e),n.setState({selectedGroupOption:e,groupOptions:o})}n.props.onChangeGroup(e.value)},n.handleDialogChange=function(e,t){switch(t.action){case"select-option":n.setState({selectedDialogOption:e});break;case"create-option":var o=n.state.dialogOptions;o.push(e),n.setState({selectedDialogOption:e,dialogOptions:o})}n.props.onChangeDialog(e.value)},n.isValidNewGroupOption=function(e,t,n){return!(0===e.trim().length||n.find((function(t){return t.name===e})))},n.isValidNewDialogOption=function(e,t,n){return!(0===e.trim().length||n.find((function(t){return t.name===e})))};var o=void 0,a=e.groups;e.group&&((o=e.groups.find((function(t){return t.value===e.group})))||(o={label:e.group,value:m.a.snakeCase(e.group)},a.push(o)));var i=void 0,s=e.dialogs;return e.dialog&&((i=e.dialogs.find((function(t){return t.value===e.dialog})))||(i={label:e.dialog,value:m.a.snakeCase(e.dialog)},s.push(i))),n.state={selectedGroupOption:o,groupOptions:a,selectedDialogOption:i,dialogOptions:s},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"process-plan-details",id:"process-plan-details",onClick:this.handleClick},a.a.createElement("div",null,a.a.createElement("label",{id:"process-plan-details-group-label"},a.a.createElement(v.b,{id:"NG_PPE_Group_long"})),a.a.createElement(Ui.a,{className:this.props.isLockedProcessPlan?"disabled-process-plan-details":"",value:this.state.selectedGroupOption,onChange:this.handleGroupChange,options:this.state.groupOptions,isValidNewOption:this.isValidNewGroupOption,isDisabled:this.props.isLockedProcessPlan?"isDisabled":"",styles:{menu:function(e){return Object(E.a)({},e,{zIndex:100})}}})),a.a.createElement("div",null,a.a.createElement("label",{id:"process-plan-details-dialog-label"},a.a.createElement(v.b,{id:"NG_PPE_Dialog_template_long"})),a.a.createElement(Ui.a,{className:this.props.isLockedProcessPlan?"disabled-process-plan-details":"",value:this.state.selectedDialogOption,onChange:this.handleDialogChange,options:this.state.dialogOptions,isValidNewOption:this.isValidNewDialogOption,isDisabled:this.props.isLockedProcessPlan?"isDisabled":"",styles:{menu:function(e){return Object(E.a)({},e,{zIndex:100})}}})),a.a.createElement("div",null,a.a.createElement("label",{id:"process-plan-details-author-label",htmlFor:"process-plan-details-author"},a.a.createElement(v.b,{id:"NG_PPE_Author_long"})),a.a.createElement("input",{id:"process-plan-details-author",className:this.props.isLockedProcessPlan?"disabled-process-plan-details":"","aria-labelledby":"process-plan-details-author-label",type:"text",value:this.props.author,onDrop:function(e){return e.preventDefault()},onChange:this.handleAuthorChange,disabled:this.props.isLockedProcessPlan?"disabled":""})),a.a.createElement("div",null,a.a.createElement("label",{id:"process-plan-details-email-label",htmlFor:"process-plan-details-email"},a.a.createElement(v.b,{id:"NG_PPE_Email_long"})),a.a.createElement("input",{id:"process-plan-details-email",className:this.props.isLockedProcessPlan?"disabled-process-plan-details":"","aria-labelledby":"process-plan-details-email-label",type:"text",value:this.props.email,disabled:this.props.isLockedProcessPlan?"disabled":"",onDrop:function(e){return e.preventDefault()},onChange:this.handleEmailChange})),a.a.createElement("div",null,a.a.createElement(Gi,{className:"variable-comment"+(this.props.isLockedProcessPlan?" disabled-process-plan-details":""),"aria-labelledby":"process-plan-details-comment",label:this.props.translate("NG_PPE_Comment_long"),value:this.props.comment,isLockedProcessPlan:this.props.isLockedProcessPlan,onDrop:function(e){return e.preventDefault()},onChange:this.handleCommentChange,multiLine:!0})))}}]),t}(o.Component)),ts=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan author"))).author=e,n.prevAuthor=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanAuthorChange",value:function(e){return this.prevAuthor=e.author,Object(E.a)({},e,{author:this.author})}},{key:"revertProcessPlanAuthorChange",value:function(e){return Object(E.a)({},e,{author:this.prevAuthor})}}]),t}(qe),ns=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan comment"))).comment=e,n.prevComment=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanCommentChange",value:function(e){return this.prevComment=e.comment,Object(E.a)({},e,{comment:this.comment})}},{key:"revertProcessPlanCommentChange",value:function(e){return Object(E.a)({},e,{comment:this.prevComment})}}]),t}(qe),os=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan email"))).email=e,n.prevEmail=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanEmailChange",value:function(e){return this.prevEmail=e.email,Object(E.a)({},e,{email:this.email})}},{key:"revertProcessPlanEmailChange",value:function(e){return Object(E.a)({},e,{email:this.prevEmail})}}]),t}(qe),as=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan group"))).group=e,n.prevGroup=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanGroupChange",value:function(e){return this.prevGroup=e.group,Object(E.a)({},e,{group:this.group})}},{key:"revertProcessPlanGroupChange",value:function(e){return Object(E.a)({},e,{group:this.prevGroup})}}]),t}(qe),is=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan dialog"))).dialog=e,n.prevDialog=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanDialogChange",value:function(e){return this.prevDialog=e.dialog,Object(E.a)({},e,{dialog:this.dialog})}},{key:"revertProcessPlanDialogChange",value:function(e){return Object(E.a)({},e,{dialog:this.prevDialog})}}]),t}(qe),ss=Object(c.b)((function(e){var t=e.processPlan;return{group:t.group,groups:fo(e),dialog:t.dialog,dialogs:yo(e),author:t.author,email:t.email,comment:t.comment,translate:Object(v.c)(e.localize)}}),(function(e){return{onChangeAuthor:function(t){e(Be(new ts(t)))},onChangeEmail:function(t){e(Be(new os(t)))},onChangeComment:function(t){e(Be(new ns(t)))},onChangeGroup:function(t){e(Be(new as(t)))},onChangeDialog:function(t){e(Be(new is(t)))}}}))(es),rs=(n(188),n(118)),cs=n.n(rs),ls=(n(194),n(195),n(196),n(197),n(199),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setPassword=function(e){n.password=e},n.setPasswordLock=function(e){n.passwordLock=e},n.setPasswordConfirmation=function(e){n.passwordConfirmation=e},n.renderValidationTooltip=function(){if(n.props.validationTooltip){var e=""===n.props.name.value?n.props.translate("NG_PPE_NameEmptyWarning_long"):n.props.translate("NG_PPE_NameExistWarning_long");return a.a.createElement("span",{className:"header-tooltip-toggle","data-tooltip":e,role:"tooltip",tabIndex:"0","aria-label":e},a.a.createElement("img",{src:pt.a,width:25,className:"header-error-icon",alt:e}))}},n.renderExportButton=function(){return n.props.isExportAvailable?a.a.createElement("span",{role:"button","aria-label":"Export process plan","aria-controls":"process-plan-export",onClick:n.handleExportButtonClick},a.a.createElement("i",{className:"material-icons save"},"vertical_align_bottom")):null},n.renderLockMenu=function(){var e,t=n.props.locked?"lock":"lock_open";return e=n.props.locked?n.props.hasPassword?n.props.translate("NG_PPE_PasswordProtected_long"):n.props.translate("NG_PPE_Locked_long"):n.props.translate("NG_PPE_Unlocked_long"),a.a.createElement(Bi.b,{isOpen:n.state.lockMenuIsOpened,toggle:n.changeLockType},a.a.createElement(Bi.e,null,a.a.createElement("i",{title:e,key:t,className:"material-icons lock"},t)),a.a.createElement(Bi.d,null,a.a.createElement(Bi.c,{onClick:n.changeSimpleLockType},n.props.translate("NG_PPE_LockSimple_long")),a.a.createElement(Bi.c,{onClick:n.changePasswordProtectedLockTypeMenu},n.props.translate("NG_PPE_LockPassword_long"))))},n.renderExportModal=function(){return a.a.createElement(Bi.f,{className:"process-plan-json-modal",isOpen:n.state.exportModalIsOpened,toggle:n.toggleModal},a.a.createElement(Bi.i,{toggle:n.toggleModal},"Process plan converted to json"),a.a.createElement(Bi.g,null,a.a.createElement(cs.a,{className:"code-mirror",value:n.props.modalText,options:{mode:"application/json",lineNumbers:!0,readOnly:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},autoFocus:!0})),a.a.createElement(Bi.h,null,a.a.createElement(Bi.a,{color:"primary",onClick:n.toggleModal},"Ok")))},n.renderModalLockWithPassword=function(){return a.a.createElement(Bi.f,{className:"process-plan-json-modal",isOpen:n.state.lockWithPasswordModalIsOpened,toggle:n.togglePasswordProtectedLockModal},a.a.createElement(Bi.g,null,a.a.createElement("div",{className:"locking-body-password "},a.a.createElement("label",{id:"password-enter-label",htmlFor:"password-enter"},n.props.translate("NG_PPE_PasswordEnter_long")),a.a.createElement("input",{type:"password",ref:n.setPasswordLock,"aria-labelledby":"password-enter","aria-live":"off",className:"password",onDrop:function(e){return e.preventDefault()}})),a.a.createElement("div",{className:"locking-body-password "},a.a.createElement("label",{id:"password-confirmation-enter-label",htmlFor:"password-confirmation-enter"},n.props.translate("NG_PPE_PasswordConfirm_long")),a.a.createElement("input",{type:"password",ref:n.setPasswordConfirmation,"aria-labelledby":"password-confirmation-enter","aria-live":"off",className:"password",onDrop:function(e){return e.preventDefault()}}),m.a.isUndefined(n.passwordConfirmation)||m.a.isNil(n.passwordConfirmation)||m.a.isUndefined(n.passwordLock)||m.a.isNil(n.passwordLock)?"":n.renderConfirmPopover(n.passwordConfirmation))),a.a.createElement(Bi.h,null,a.a.createElement(Bi.a,{color:"primary",onClick:n.changePasswordProtectedLockType},n.props.translate("NG_PPE_ButtonOK_long")),a.a.createElement(Bi.a,{color:"primary",onClick:n.togglePasswordProtectedLockModal},n.props.translate("NG_PPE_ButtonCancel_long"))))},n.renderConfirmPopover=function(){return a.a.createElement(Bi.j,{placement:"bottom",isOpen:n.state.passwordConfirmationPopoverOpen,target:n.passwordConfirmation,toggle:n.toggle},a.a.createElement(Bi.k,null,n.props.translate("NG_PPE_PasswordInvalid_long")))},n.renderModalUnlockWithPassword=function(){return n.props.isLockedProcessPlan&&n.props.hasPassword?a.a.createElement(Bi.f,{className:"process-plan-json-modal",isOpen:n.state.unlockWithPasswordModalIsOpened,toggle:n.togglePasswordProtectedUnlockModal},a.a.createElement(Bi.g,null,a.a.createElement("div",{className:"locking-body-password "},a.a.createElement("label",{id:"password-enter-label",htmlFor:"password-enter"},n.props.translate("NG_PPE_PasswordEnter_long")),a.a.createElement("input",{type:"password",ref:n.setPassword,"aria-labelledby":"password-enter","aria-live":"off",className:"password",onDrop:function(e){return e.preventDefault()}}),m.a.isUndefined(n.password)||m.a.isNil(n.password)?"":n.renderPopover(n.password))),a.a.createElement(Bi.h,null,a.a.createElement(Bi.a,{color:"primary",onClick:n.changePasswordProtectedUnlockType},n.props.translate("NG_PPE_ButtonOK_long")),a.a.createElement(Bi.a,{color:"primary",onClick:n.togglePasswordProtectedUnlockModal},n.props.translate("NG_PPE_ButtonCancel_long")))):null},n.renderPopover=function(){return a.a.createElement(Bi.j,{placement:"bottom",isOpen:n.state.popoverOpen,target:n.password,toggle:n.toggle},a.a.createElement(Bi.k,null,n.props.translate("NG_PPE_PasswordInvalid_long")))},n.handleNameChange=function(e){n.props.onChangeProcessPlanName(e)},n.changeLockType=function(){n.props.isLockedProcessPlan?n.props.hasPassword?n.setState({unlockWithPasswordModalIsOpened:!n.state.unlockWithPasswordModalIsOpened}):n.changeSimpleUnlockType():n.setState({lockMenuIsOpened:!n.state.lockMenuIsOpened})},n.moreDetails=function(e){e.stopPropagation(),n.props.isHideProcessPlanInfo(!n.props.isHidden)},n.toggleModal=function(){n.setState({exportModalIsOpened:!n.state.exportModalIsOpened})},n.togglePasswordProtectedLockModal=function(){n.setState({lockWithPasswordModalIsOpened:!n.state.lockWithPasswordModalIsOpened})},n.togglePasswordProtectedUnlockModal=function(){n.setState({unlockWithPasswordModalIsOpened:!n.state.unlockWithPasswordModalIsOpened}),n.password.value=n.password.value?"":n.password.value=""},n.changeSimpleUnlockType=function(){n.props.onChangeLockType(!n.props.locked)},n.changeSimpleLockType=function(){n.props.onChangeLockType(!n.props.locked),n.setState({lockMenuIsOpened:!n.state.lockMenuIsOpened}),n.props.onChangePassword(!1)},n.changePasswordProtectedLockTypeMenu=function(){n.setState({lockMenuIsOpened:!1}),n.setState({lockWithPasswordModalIsOpened:!0})},n.changePasswordProtectedUnlockType=function(){D.checkPassword(n.password.value).then((function(e){e?(n.props.onChangeLockType(!n.props.locked),n.setState({unlockWithPasswordModalIsOpened:!n.state.unlockWithPasswordModalIsOpened})):(n.password.value="",n.setState({popoverOpen:!0}))}))},n.changePasswordProtectedLockType=function(){n.passwordLock.value===n.passwordConfirmation.value?(D.setPassword(n.passwordLock.value),n.props.onChangePassword(!0),n.setState(Object(E.a)({},n.state,{passwordConfirmationPopoverOpen:!1,lockWithPasswordModalIsOpened:!n.state.lockWithPasswordModalIsOpened})),n.props.onChangeLockType(!n.props.locked)):n.setState({passwordConfirmationPopoverOpen:!0}),n.passwordLock.value="",n.passwordConfirmation.value=""},n.handleExportButtonClick=function(e){e.stopPropagation(),n.props.isLockedProcessPlan||(n.closeFullscreen(),n.props.onProcessPlanExport(),n.toggleModal())},n.closeFullscreen=function(){document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.mozFullScreenElement&&document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitFullscreenElement&&document.webkitExitFullscreen?document.webkitExitFullscreen():document.msFullscreenElement&&document.msExitFullscreen&&document.msExitFullscreen()},n.headerMouseUp=function(){n.props.isExistTempTransition&&n.props.destroyTempTransition()},n.state={exportModalIsOpened:!1,lockMenuIsOpened:!1,lockWithPasswordModalIsOpened:!1,passwordConfirmationPopoverOpen:!1,unlockWithPasswordModalIsOpened:!1,popoverOpen:!1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return this.props.fetching?null:a.a.createElement("div",{className:"header",onMouseUp:this.headerMouseUp},a.a.createElement(Gi,{type:"text","aria-live":"polite","aria-label":this.props.translate("NG_PPE_Process_plan_name_long"),label:"variable-processPlan-name",className:"variable-processPlan-name",value:this.props.name,isLockedProcessPlan:this.props.isLockedProcessPlan,onDrop:function(e){return e.preventDefault()},onChange:this.handleNameChange,multiLine:!1}),this.renderValidationTooltip(),this.renderExportButton(),this.renderLockMenu(),a.a.createElement("span",{role:"button",title:this.props.translate("NG_PPE_More_details_long"),"aria-label":this.props.translate("NG_PPE_More_details_long"),"aria-expanded":!this.props.isHidden,"aria-controls":"process-plan-details",onClick:this.moreDetails},a.a.createElement("i",{className:"material-icons more_vert"},"more_vert")),!this.props.isHidden&&a.a.createElement(ss,{isLockedProcessPlan:this.props.isLockedProcessPlan}),this.renderExportModal(),this.renderModalLockWithPassword(),this.renderModalUnlockWithPassword())}}]),t}(o.Component)),ps=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Change process plan name"))).name=e,n.prevName=null,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyProcessPlanNameChange",value:function(e){return this.prevName=e.name,Object(E.a)({},e,{name:this.name})}},{key:"revertProcessPlanNameChange",value:function(e){return Object(E.a)({},e,{name:this.prevName})}}]),t}(qe),us=Object(c.b)((function(e){var t=e.processPlan;return{name:t.name,locked:t.locked,hasPassword:t.hasPassword,fetching:!(fa(e)&&so(e)),isHidden:t.isHidden,isExportAvailable:!R,isExistTempTransition:!m.a.isEmpty(vn(e)),modalText:va(e),validationTooltip:Pa(e),translate:Object(v.c)(e.localize)}}),(function(e){return{onChangeProcessPlanName:function(t){e(Be(new ps(t)))},onChangeLockType:function(t){e(ua(t))},onChangePassword:function(t){e(pa(t))},isHideProcessPlanInfo:function(t){e(ra(t))},onProcessPlanExport:function(){return e((function(e,t){e(la(aa(t())))}))},destroyTempTransition:function(){e(un(null))}}}))(ls),ds=(n(200),100),hs=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,e))).setApp=function(e){n.app=e},n.setMain=function(e){n.main=e},n.getMobileOperatingSystem=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"},n.handleFullScreen=function(){if(n.props.onClick(),"unknown"!==n.getMobileOperatingSystem()){var e=document.getElementById("root");e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},n.handleDrop=function(e){if(!n.props.isLockedProcessPlan){var t;e.preventDefault();try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(a){return}var o={x:e.clientX-t.offsetX-5,y:e.clientY-t.offsetY-5-ds};n.props.onDrop(t.stepType,o)}},n.handleMouseUp=function(){n.props.onMouseUp()},n.handleKeyDown=function(e){e.altKey&&67===e.which||e.altKey&&67===e.keyCode?(e.preventDefault(),n.props.onFocusOnGlobalArea(ia),n.props.onSelectDrawingArea()):e.altKey&&80===e.which||e.altKey&&80===e.keyCode?(e.preventDefault(),n.props.onFocusOnGlobalArea("side-panel")):e.ctrlKey&&89===e.which||e.metaKey&&e.shiftKey&&90===e.keyCode||e.metaKey&&e.shiftKey&&90===e.which?(e.preventDefault(),n.props.onRedo()):(e.ctrlKey&&90===e.which||e.metaKey&&90===e.keyCode)&&(e.preventDefault(),n.props.onUndo())},n.deleteElement=function(){n.props.isLockedProcessPlan||("step"===n.props.selectedObjectType?n.props.onDeleteStep(n.props.selectedStep.id):n.props.onDeleteTransition(n.props.selectedTransition.id))},n.onAutoGenerateLayout=function(){n.props.isLockedProcessPlan||n.props.onUpdateLayout()},n.handleUndo=function(){n.props.isLockedProcessPlan||n.props.onUndo()},n.handleRedo=function(){n.props.isLockedProcessPlan||n.props.onRedo()},n.handleResize=function(){n.props.onMainRender({width:window.innerWidth-300,height:window.innerHeight-ds}),n.props.onUpdateScreenSize()},n.toolbarMouseUp=function(){n.props.isExistTempTransition&&n.props.destroyTempTransition()},n.state={isGotTranslation:!1},n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"app",tabIndex:"0",ref:this.setApp,onClick:this.handleFullScreen,onKeyDown:this.handleKeyDown,id:"full-screen"},a.a.createElement(us,{className:"header",isLockedProcessPlan:this.props.isLockedProcessPlan}),a.a.createElement("div",{className:"toolbar",ref:this.setToolbar,tabIndex:"0",onMouseUp:this.toolbarMouseUp},a.a.createElement("div",{className:"edit-toolbar"},a.a.createElement("div",{className:"undo-redo-icon"+(this.props.isLockedProcessPlan||!this.props.isAvailableUndo?" undo-redo-icon-disabled":""),onClick:this.handleUndo,title:this.props.translate("NG_PPE_Undo_long"),role:"button","aria-label":this.props.translate("NG_PPE_Undo_long")},a.a.createElement("i",{className:"material-icons"},"undo")),a.a.createElement("div",{className:"undo-redo-icon"+(this.props.isLockedProcessPlan||!this.props.isAvailableRedo?" undo-redo-icon-disabled":""),onClick:this.handleRedo,title:this.props.translate("NG_PPE_Redo_long"),role:"button","aria-label":this.props.translate("NG_PPE_Redo_long")},a.a.createElement("i",{className:"material-icons"},"redo")),"step"===this.props.selectedObjectType&&!m.a.isUndefined(this.props.selectedStep)||"transition"===this.props.selectedObjectType?a.a.createElement("div",{className:"delete-button"+(this.props.isLockedProcessPlan?" delete-button-disabled":""),title:this.props.translate("NG_PPE_Delete_long"),role:"button","aria-label":this.props.translate("NG_PPE_Delete_long")+this.props.selectedObjectType,onClick:this.deleteElement},a.a.createElement("i",{className:"material-icons"},"delete_forever")):""),a.a.createElement(ii,{className:"zoom-toolbar"}),a.a.createElement("div",{className:"visualization-buttons"},a.a.createElement("div",{className:"transition-info-button",title:this.props.translate("NG_PPE_Show_transition_info_long")+(this.props.showTransitionInfo?this.props.translate("NG_PPE_On_long"):this.props.translate("NG_PPE_Off_long")),role:"button","aria-label":this.props.translate("NG_PPE_Show_transition_info_long"),"aria-pressed":this.props.showTransitionInfo,onClick:this.props.onTransitionInfoButtonClick},this.props.showTransitionInfo?a.a.createElement("i",{key:"on",className:"material-icons"},"visibility"):a.a.createElement("i",{key:"off",className:"material-icons"},"visibility_off")),a.a.createElement("div",{className:"snap-to-grid"+(this.props.isLockedProcessPlan?" snap-to-grid-disabled":""),title:this.props.translate("NG_PPE_Snap_to_grid_long")+(this.props.snapToGrid?this.props.translate("NG_PPE_On_long"):this.props.translate("NG_PPE_Off_long")),role:"button","aria-label":"".concat(this.props.snapToGrid?this.props.translate("NG_PPE_Reset_Snap_to_grid_long"):this.props.translate("NG_PPE_Set_Snap_to_grid_long")),"aria-pressed":this.props.snapToGrid,onClick:this.props.onSnapToGridButtonClick},this.props.snapToGrid?a.a.createElement("i",{key:"on",className:"material-icons"},"grid_on"):a.a.createElement("i",{key:"off",className:"material-icons"},"grid_off")),a.a.createElement("div",{className:"auto-generate-layout"+(this.props.isLockedProcessPlan?" auto-generate-layout-disabled":""),title:this.props.translate("NG_PPE_Auto_generate_layout_long"),role:"button","aria-label":this.props.translate("NG_PPE_Auto_generate_layout_long"),onClick:this.onAutoGenerateLayout},a.a.createElement("i",{className:"material-icons"},"clear_all")))),a.a.createElement("div",{className:"main",id:"mainSvgField",ref:this.setMain,onMouseUp:this.handleMouseUp,onDrop:this.handleDrop,onDragStart:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()}},a.a.createElement(oi,{isLockedProcessPlan:this.props.isLockedProcessPlan})),a.a.createElement("div",{className:"aside"},this.renderSidePanel()),a.a.createElement("div",{className:"loading-overlay"+(this.state.isGotTranslation?" hidden":"")}))}},{key:"renderSidePanel",value:function(){switch(this.props.selectedObjectType){case"step":return a.a.createElement($i,{isLockedProcessPlan:this.props.isLockedProcessPlan});case"transition":return a.a.createElement(Qi,{isLockedProcessPlan:this.props.isLockedProcessPlan});default:return a.a.createElement(pi,{isLockedProcessPlan:this.props.isLockedProcessPlan})}}},{key:"componentDidMount",value:function(){this.props.onMainRender({width:window.innerWidth-300,height:window.innerHeight-ds}),window.addEventListener("resize",this.handleResize),this.app.focus()}},{key:"componentDidUpdate",value:function(e,t){t.isGotTranslation||m.a.isEmpty(this.props.translations)||(this.setState({isGotTranslation:!0}),this.props.initialize({languages:[{name:"",code:""}],translation:this.props.translations,options:{renderToStaticMarkup:O.renderToStaticMarkup}}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}}]),t}(o.Component),fs=Object(v.e)(hs),ys=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(x.a)(this,Object(_.a)(t).call(this,"Generate auto layout"))).processPlan=e.newProcessPlan,n.prevProcessPlan=e.currentProcessPlan,n}return Object(I.a)(t,e),Object(P.a)(t,[{key:"applyLayoutAutoGenerationForSteps",value:function(){return this.processPlan.steps}},{key:"revertLayoutAutoGenerationForSteps",value:function(){return this.prevProcessPlan.steps}},{key:"applyLayoutAutoGenerationForStepsLayout",value:function(){return this.processPlan.stepsLayout}},{key:"revertLayoutAutoGenerationForStepsLayout",value:function(){return this.prevProcessPlan.stepsLayout}},{key:"applyProcessPlanLayoutAutoGenerationStepProperties",value:function(){return this.processPlan.stepProperties}},{key:"revertProcessPlanLayoutAutoGenerationStepProperties",value:function(){return this.prevProcessPlan.stepProperties}},{key:"applyLayoutAutoGenerationForTransitions",value:function(){return this.processPlan.transitions}},{key:"revertLayoutAutoGenerationForTransitions",value:function(){return this.prevProcessPlan.transitions}},{key:"applyLayoutAutoGenerationForTransitionsLayout",value:function(){return this.processPlan.transitionsLayout}},{key:"revertAutoGenerationForTransitionsLayout",value:function(){return this.prevProcessPlan.transitionsLayout}},{key:"applyLayoutAutoGenerationForTransitionProperties",value:function(){return this.processPlan.transitionProperties}},{key:"revertLayoutAutoGenerationForTransitionProperties",value:function(){return this.prevProcessPlan.transitionProperties}},{key:"applyLayoutAutoGenerationForConnections",value:function(){return m.a.chain(this.processPlan.stepProperties).filter((function(e){return"step_id"===e.name})).map((function(e){return{startStepId:e.stepId,endStepId:e.value}})).map((function(e){return Object(E.a)({},e,{endPosition:null})})).value()}},{key:"revertLayoutAutoGenerationForConnections",value:function(){return this.prevProcessPlan.connectionsLayout}}]),t}(qe),vs=Object(c.b)((function(e){return{selectedObjectType:m.a.isNil(Hn(e))?m.a.isNil(je(e))?null:"transition":"step",selectedStep:Ga(e),selectedTransition:Ce(e),showTransitionInfo:Bn(e),snapToGrid:Kn(e),translations:qn(e),isAvailableUndo:We(e).length>0,isAvailableRedo:Ye(e).length>0,isLockedProcessPlan:ba(e),isExistTempTransition:!m.a.isEmpty(vn(e))}}),(function(e,t){var n=t.isLockedProcessPlan;return{onDrop:function(t,n){var o=G()();e(wa(o,t,n)),e(In(!0)),e(Ta(o))},onMainRender:function(t){e(Sn(t)),e(Tn(t))},onMouseMove:function(t){return e(hn(t))},onMouseUp:function(){return e(un(null))},onClick:function(){return e(ra(!0))},onTransitionInfoButtonClick:function(){return e(On())},onFocusOnGlobalArea:function(t){return e(ca(t))},onSelectDrawingArea:function(){return e(In(!0))},onSnapToGridButtonClick:function(){n||e(jn())},onUndo:function(){n||e((function(e,t){var n=We(t());n.length>0&&e(He(n[n.length-1]))}))},onRedo:function(){n||e((function(e,t){var n=Ye(t());n.length>0&&e(Be(n[n.length-1]))}))},onDeleteStep:function(t){"start"!==t&&"end"!==t&&(e(Na(t)),e(Ta(null)),e(In(!0)),e(ca(ia)))},onDeleteTransition:function(t){e(Be(new Gt(t))),e(be(null)),e(In(!0)),e(ca(ia))},onUpdateLayout:function(){e((function(e,t){var n=aa(t());return"Error"!==n&&(n=JSON.parse(n),!m.a.isEqual(n.layout.stepsLayout,ta(n,ea)))}))&&e(Be(new ys(e((function(e,t){var n=aa(t());return delete(n=JSON.parse(n)).layout,{currentProcessPlan:t(),newProcessPlan:na(n)}})))))},onUpdateScreenSize:function(){e(Nn())},destroyTempTransition:function(){e(un(null))}}}))(fs),bs=n(206),ms=Object(r.c)({localize:v.d,processPlan:da,steps:La,transitions:Se,stepsLayout:et,transitionsLayout:Q,availableObjects:ao,stepProperties:So,transitionProperties:jo,tempTransition:yn,drawingArea:Gn,changeStack:Ke,connectionsLayout:Jt,transitionActionType:At,transitionCopy:Kt}),gs=Object(bs.a)((function(e,t){return e.pipe(Object(w.a)(sa.toString(),An.toString()),Object(C.a)((function(){return fa(t.value)&&Yn(t.value)&&Wn(t.value)})),Object(j.a)((function(){return Cn(t.value.stepsLayout)})))}),(function(e,t){return e.pipe(Object(w.a)(to.toString(),no.toString(),oo.toString()),Object(Ue.a)((function(e){var n=e.payload,o=e.meta;return Object(Ve.a)(D.loadObjects()).pipe(Object(Fe.a)((function(e){var a=[eo(e)];return m.a.isNil(n)?a.push((function(){return o.onSuccess(m.a.find(e.variables,["id",o.id]))})):!m.a.isNil(o)&&m.a.isFunction(o.onSuccess)?a.push((function(){return o.onSuccess(m.a.find(e.variables,["id",n]))})):a.push(Be(new Ze(Hn(t.value),"id",n))),a})))})))}));Object(f.polyfill)();var Ps,xs=Object(h.a)(),_s=Object(r.d)(ms,Object(r.a)(p.a,d.a,xs));xs.run(gs),window.store=_s,_s.dispatch($n());var Is=window.location.search.split(/[?&]+/).find((function(e){return/sample=.*/.test(e)}));Is&&(Ps=Is.substring("sample=".length)),_s.dispatch(sa(Ps)),_s.dispatch(An()),s.a.render(a.a.createElement(c.a,{store:_s},a.a.createElement(v.a,{store:_s},a.a.createElement(vs,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),Object(y.polyfill)()},42:function(e,t,n){e.exports=n.p+"static/media/error_icon.cc2758a2.svg"}},[[121,1,2]]]);
//# sourceMappingURL=main.4a48774c.chunk.js.map